var $e=Object.defineProperty;var ne=Object.getOwnPropertySymbols;var Ie=Object.prototype.hasOwnProperty,Me=Object.prototype.propertyIsEnumerable;var ie=(s,e,l)=>e in s?$e(s,e,{enumerable:!0,configurable:!0,writable:!0,value:l}):s[e]=l,ae=(s,e)=>{for(var l in e||(e={}))Ie.call(e,l)&&ie(s,l,e[l]);if(ne)for(var l of ne(e))Me.call(e,l)&&ie(s,l,e[l]);return s};import{l as Se,c as B,r as v,o as n,a as i,b as t,d as S,w as _,t as m,e as f,T as H,f as G,g as b,h as g,v as M,i as A,j as h,F as z,n as w,k as y,m as q,p as ce,q as C,s as k,u as Z,_ as Te,x as De,y as Q,z as P,C as ue,D as pe,A as ee,B as te,E as Ae,G as Ue,H as Ne,I as Oe,J as Ge,K as Le}from"./vendor.021704bf.js";const Ee=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const p of r.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&a(p)}).observe(document,{childList:!0,subtree:!0});function l(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerpolicy&&(r.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?r.credentials="include":o.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function a(o){if(o.ep)return;o.ep=!0;const r=l(o);fetch(o.href,r)}};Ee();const de="board-changed",Je="",X=Pe();X.setup();function Pe(){var s=null;return{async setup(){s=Se(Je)},on(l,a){s.on(l,a)},off(l,a=null){!s||(a?s.off(l,a):s.removeAllListeners(l))},emit(l,a){s.emit(l,a)},terminate(){s=null}}}var x=(s,e)=>{const l=s.__vccOpts||s;for(const[a,o]of e)l[a]=o;return l};const Ve={methods:{test(){console.log("hi")}},created(){this.$store.dispatch("loadBoards"),this.$store.dispatch("loadUsers")},components:{}};function je(s,e,l,a,o,r){const p=v("router-view");return n(),B(p)}var Fe=x(Ve,[["render",je]]);const He={name:"app header",data(){return{}},methods:{async logout(){try{await this.$store.dispatch("logout")}catch(s){console.log(s)}}},created(){window.onscroll=function(){var s=document.getElementById("header");window.scrollY>10?(s.style.backgroundColor="white",s.style.boxShadow="0px 3px 3px 0px rgba(0,0,0,0.3)"):(s.style.backgroundColor="",s.style.boxShadow="")}},computed:{member(){return this.$store.getters.loggedinUser}},components:{}},Ke={id:"header",class:"home-header"},Qe=t("div",{class:"logo"},[t("span",null,[t("i",{class:"fa-brands fa-trello"})]),f(),t("h2",null,"Trellox")],-1),Re={key:0,class:"guest-nav"},qe=f("Log in"),We=f("Sign up"),ze={key:1,class:"member-nav"};function Ye(s,e,l,a,o,r){const p=v("router-link");return n(),i("header",Ke,[Qe,t("nav",null,[r.member?(n(),i("div",ze,[t("a",{onClick:e[0]||(e[0]=d=>this.$router.push("/workspace"))},"Welcome "+m(r.member.fullname.split(" ")[0]),1)])):(n(),i("div",Re,[S(p,{to:"/login"},{default:_(()=>[qe]),_:1}),S(p,{to:"/signup"},{default:_(()=>[We]),_:1})]))])])}var Xe=x(He,[["render",Ye]]);const Ze={name:"home",data(){return{}},methods:{toWorkSpace(){this.$router.push("/workspace")}},computed:{},components:{homeHeader:Xe}},et={class:"home-wrapper"},tt={class:"home-view main-layout"},st={class:"topside"},ot=t("h1",null,"Trellox helps teams move work forward.",-1),rt=t("p",null,"Collaborate, manage projects, and reach new productivity peaks. From high rises to the home office, the way your team works is unique accomplish it all with Trellox.",-1),lt=f("Get started "),nt=t("span",null,[t("i",{class:"fa-solid fa-arrow-right"})],-1),it=[lt,nt],at=t("div",{class:"background"},null,-1),dt=t("div",{class:"middle"},[t("h1",null,"It\u2019s more than work. It\u2019s a way of working together."),t("p",null," It\u2019s more than work. It\u2019s a way of working together. Start with a Trello board, lists, and cards. Customize and expand with more features as your teamwork grows. Manage projects, organize tasks, and build team spirit\u2014all in one place. "),t("img",{src:"https://res.cloudinary.com/trellox/image/upload/v1648555830/board_esjncu.png"})],-1);function ct(s,e,l,a,o,r){const p=v("home-header");return n(),i("main",et,[S(p),t("div",tt,[t("div",st,[t("article",null,[ot,rt,t("button",{onClick:e[0]||(e[0]=(...d)=>r.toWorkSpace&&r.toWorkSpace(...d))},it)]),at]),dt])])}var ut=x(Ze,[["render",ct]]);const pt={name:"login-view",data(){return{failed:!1,loginCred:{email:"",password:""}}},methods:{async login(){(!this.loginCred.email||!this.loginCred.password)&&this.failedLog();try{await this.$store.dispatch({type:"login",userCred:this.loginCred}),this.$router.push("/workspace")}catch{this.failedLog()}},failedLog(){this.failed=!0,setTimeout(()=>{this.failed=!1},6e3)}},computed:{},components:{}},ht={class:"login-view"},mt=t("span",null,[t("i",{class:"fa-brands fa-trello"})],-1),_t=t("h2",null,"Trellox",-1),gt=[mt,_t],ft={class:"login-container"},yt={key:0,class:"failed"},vt=t("p",null,"Logged in failed. Please enter valid email or password.",-1),bt=[vt],Ct=t("h3",null,"Log in to Trellox",-1),kt=t("hr",null,null,-1),wt=f("Sign up for an account");function Bt(s,e,l,a,o,r){const p=v("router-link"),d=A("focus");return n(),i("section",ht,[t("div",{onClick:e[0]||(e[0]=c=>this.$router.push("/")),class:"logo"},gt),t("div",ft,[S(H,{name:"failed"},{default:_(()=>[o.failed?(n(),i("div",yt,bt)):h("",!0)]),_:1}),Ct,t("form",{onKeyup:e[3]||(e[3]=G((...c)=>r.login&&r.login(...c),["enter"])),onSubmit:e[4]||(e[4]=b((...c)=>r.login&&r.login(...c),["prevent"])),class:"user-crad"},[g(t("input",{type:"email","onUpdate:modelValue":e[1]||(e[1]=c=>o.loginCred.email=c),placeholder:"Enter email"},null,512),[[d],[M,o.loginCred.email]]),g(t("input",{type:"password","onUpdate:modelValue":e[2]||(e[2]=c=>o.loginCred.password=c),placeholder:"Enter password"},null,512),[[M,o.loginCred.password]])],32),t("button",{onClick:e[5]||(e[5]=(...c)=>r.login&&r.login(...c)),class:"login-btn"},"Log in"),kt,S(p,{to:"/signup"},{default:_(()=>[wt]),_:1})])])}var xt=x(pt,[["render",Bt]]);const $t={name:"",data(){return{failed:!1,signupCred:{email:"",username:"",password:"",fullname:"",boardIds:[],imgUrl:null}}},methods:{async signup(){if((!this.signupCred.email||!this.signupCred.password||!this.signupCred.fullname)&&this.failedLog(),!(this.signupCred.fullname.split(" ").length<=1))try{const s=this.signupCred.fullname.split(" ");this.signupCred.fullname=s.reduce((e,l)=>e+" "+this.capitalizeFirstLetter(l),""),this.signupCred.fullname=this.signupCred.fullname.trim(),console.log("this.signupCred.fullname",this.signupCred.fullname),this.signupCred.username=this.signupCred.fullname.split(" ").join("").toLowerCase(),await this.$store.dispatch({type:"signup",userCred:this.signupCred}),console.log("this.signupCred",this.signupCred),this.$router.push("/workspace")}catch{console.log("error")}},async googleSignup(){try{const s=await this.$gAuth.signIn();if(console.log(s),!s)return;this.googleUser={email:s.Du.tv,fullname:s.Du.tf,username:s.Du.tf.split(" ").join("").toLowerCase(),password:"google",boardIds:[],imgUrl:s.Du.eN},await this.$store.dispatch({type:"signup",userCred:JSON.parse(JSON.stringify(this.googleUser))}),console.log("googleUser",JSON.parse(JSON.stringify(this.googleUser))),this.$router.push("/workspace")}catch(s){console.log(s)}},capitalizeFirstLetter(s){return s.charAt(0).toUpperCase()+s.slice(1)},failedLog(){this.failed=!0,setTimeout(()=>{this.failed=!1},6e3)}},computed:{},components:{}},It={class:"signup-view"},Mt=t("span",null,[t("i",{class:"fa-brands fa-trello"})],-1),St=t("h2",null,"Trellox",-1),Tt=[Mt,St],Dt={class:"login-container"},At={key:0,class:"failed"},Ut=t("p",null,"Sign up failed. Please enter valid email or password.",-1),Nt=[Ut],Ot=t("h3",null,"Sign up to Trellox",-1),Gt=t("span",null,"OR",-1),Lt=t("button",null,[t("a",{href:"http://localhost:3030/auth/facebook"},"LOGIN WITH FACEBOOK")],-1),Et=t("hr",null,null,-1),Jt=f("Already have an acount? Log in");function Pt(s,e,l,a,o,r){const p=v("router-link"),d=A("focus");return n(),i("section",It,[t("div",{onClick:e[0]||(e[0]=c=>this.$router.push("/")),class:"logo"},Tt),t("div",Dt,[S(H,{name:"failed"},{default:_(()=>[o.failed?(n(),i("div",At,Nt)):h("",!0)]),_:1}),Ot,t("form",{onKeyup:e[4]||(e[4]=G((...c)=>r.signup&&r.signup(...c),["enter"])),onSubmit:e[5]||(e[5]=b((...c)=>r.signup&&r.signup(...c),["prevent"])),class:"user-crad"},[g(t("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=c=>o.signupCred.fullname=c),placeholder:"Enter fullname"},null,512),[[d],[M,o.signupCred.fullname]]),g(t("input",{type:"email","onUpdate:modelValue":e[2]||(e[2]=c=>o.signupCred.email=c),placeholder:"Enter email"},null,512),[[M,o.signupCred.email]]),g(t("input",{type:"password","onUpdate:modelValue":e[3]||(e[3]=c=>o.signupCred.password=c),placeholder:"Enter password"},null,512),[[M,o.signupCred.password]])],32),t("button",{onClick:e[6]||(e[6]=(...c)=>r.signup&&r.signup(...c)),class:"login-btn"},"Sign up!"),Gt,t("button",{onClick:e[7]||(e[7]=(...c)=>r.googleSignup&&r.googleSignup(...c))},"Continue with Google"),Lt,Et,S(p,{to:"/login"},{default:_(()=>[Jt]),_:1})])])}var Vt=x($t,[["render",Pt]]);const jt={name:"board-preview",props:{board:Object},data(){return{color:null}},async created(){try{if(this.board.style.bgImgUrl){const s=new z;this.color=await s.getColorAsync(this.board.style.bgImgUrl)}}catch(s){console.log(s)}},methods:{linearGradient(){var s;return this.color?s=this.color.isDark?"0.1":"0.3":s="0.1",`linear-gradient(rgba(0, 0, 0, ${s}),rgba(0, 0, 0, ${s})), `},async toggleStar(){const s=JSON.parse(JSON.stringify(this.board));s.isStarred=!s.isStarred,await this.$store.dispatch({type:"saveBoard",board:s})}},computed:{},components:{}},Ft={class:"board-preview"},Ht={class:"txt-on-borad-img"};function Kt(s,e,l,a,o,r){const p=v("router-link");return n(),i("section",Ft,[S(p,{to:"/board/"+l.board._id},{default:_(()=>[t("div",{style:w({"background-image":r.linearGradient()+"url("+l.board.style.bgImgUrl+")","background-color":l.board.style.bgColor}),class:"board-preview-container"},null,4),t("span",Ht,m(l.board.title),1)]),_:1},8,["to"]),t("span",{class:y(["star",{full:l.board.isStarred}]),onClick:e[0]||(e[0]=d=>r.toggleStar())},null,2)])}var Qt=x(jt,[["render",Kt]]);const Rt={props:{isFirstPage:{type:Boolean,default:!0}},created(){},data(){return{}},methods:{closeModal(){this.$emit("closeModal")},goBack(){this.$emit("goBack")}},computed:{},components:{},unmounted(){},emits:["closeModal","goBack"]},qt={class:"custom-modal-container"},Wt={class:"custom-modal-header"},zt={class:"title"},Yt={class:"custom-modal-main"},Xt={class:"custom-modal-app-header"};function Zt(s,e,l,a,o,r){return n(),i("article",qt,[t("section",Wt,[l.isFirstPage?h("",!0):(n(),i("a",{key:0,onClick:e[0]||(e[0]=b((...p)=>r.goBack&&r.goBack(...p),["stop"])),class:"custom-back"})),t("span",zt,[q(s.$slots,"header")]),t("a",{onClick:e[1]||(e[1]=b((...p)=>r.closeModal&&r.closeModal(...p),["stop"])),class:"custom-close"})]),t("section",Yt,[q(s.$slots,"default")]),t("section",Xt,[q(s.$slots,"main")])])}var N=x(Rt,[["render",Zt]]);const E={delay:ts,getRandomInt:ss,makeId:os,makeAvatar:es,getFormattedTime:rs};function es(s){s=s.split(" ");var e=(s.split(" ")[0].split("")[0]+s.split(" ")[1].split("")[0]).toUpperCases();return e.toUpperCases()}function ts(s=1500){return new Promise(e=>{setTimeout(e,s)})}function ss(s,e){return s=Math.ceil(s),e=Math.floor(e),Math.floor(Math.random()*(e-s)+s)}function os(s=5){for(var e="",l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=0;a<s;a++)e+=l.charAt(Math.floor(Math.random()*l.length));return e}function rs(s){const l=Date.now()-s;var a="",o;if(l<=5e3)a="just now";else if(l<=2e4)a="a few seconds ago";else if(l<=12e4)a="a minute ago";else if(l<=36e5)o=Math.floor(l/60/1e3),a=o+" minutes ago";else if(l<=72e5)a="a hour ago";else if(l<=864e5)o=Math.floor(l/60/60/1e3),a=o+" hours ago";else{s=new Date(s);const r=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],p=s.getMinutes(),d=s.getHours();a+=r[s.getMonth()]+" ",a+=s.getDate()+" at ",a+=d<10?"0"+d:d,a+=":",a+=p<10?"0"+p:p}return a}const ls="/api/";var ns=ce.create({withCredentials:!0});const J={get(s,e){return R(s,"GET",e)},post(s,e){return R(s,"POST",e)},put(s,e){return R(s,"PUT",e)},delete(s,e){return R(s,"DELETE",e)}};async function R(s,e="GET",l=null){try{return(await ns({url:`${ls}${s}`,method:e,data:l,params:e==="GET"?l:null})).data}catch(a){throw console.log(`Had Issues ${e}ing to the backend, endpoint: ${s}, with data:`,l),console.dir(a),a.response&&a.response.status===401&&Be.push("/login"),a}}ce.defaults.withCredentials=!0;const D={query:is,getBoardById:as,removeBoard:ds,updateBoard:cs};async function is(s){return await J.get("board",s)}async function as(s,e={type:"none"}){return await J.get(`board/${s}`,e)}async function ds(s){return await J.delete(`board/${s}`)}async function cs(s){return s._id?await J.put(`board/${s._id}`,s):await J.post("board",s)}const se="loggedinUser",V={login:ps,signup:hs,logout:ms,getLoggedinUser:_s,getUsers:us};async function us(){return await J.get("user")}async function ps(s){const e=await J.post("auth/login",s);if(e)return he(e)}async function hs(s){console.log("userCred",s);const e=await J.post("auth/signup",s);return he(e)}async function ms(){return sessionStorage.removeItem(se),await J.post("auth/logout")}function he(s){return sessionStorage.setItem(se,JSON.stringify(s)),s}function _s(){return JSON.parse(sessionStorage.getItem(se)||"null")}const L={getEmptyBoard:gs,addGroup:fs,editGroup:ys,removeGroup:vs,addCard:bs,getCardById:Cs,updateCard:ks,removeCard:ws};function gs(){return{title:"",recentlyViewed:Date.now(),isStarred:!1,createdBy:V.getLoggedinUser()||{},style:{bgImUrl:"",bgColor:"",bgHeader:""},labels:Bs(),members:[V.getLoggedinUser()],groups:[W("Todo"),W("Doing"),W("Done")],activities:[],filterBy:{by:{none:!1,options:[]},due:{none:!1,over:!1,tommarow:!1},label:{none:!1,options:[]}}}}async function fs(s,e){try{var l=await D.getBoardById(s);return l.groups.push(W(e)),await D.updateBoard(l)}catch(a){throw a}}async function ys(s,e){try{var l=await D.getBoardById(s);const a=l.groups.findIndex(o=>o.id===e.id);return l.groups[a]=e,await D.updateBoard(l)}catch(a){throw a}}async function vs(s,e){try{var l=await D.getBoardById(s);const a=l.groups.findIndex(o=>o.id===e);return l.groups.splice(a,1)[0],await D.updateBoard(l)}catch(a){throw a}}async function bs(s,e,l){try{var a=await D.getBoardById(s);const o=a.groups.findIndex(r=>r.id===e);return a.groups[o].cards.push(xs(l)),await D.updateBoard(a)}catch(o){throw o}}async function Cs(s,e){try{var l=await D.getBoardById(s),a=null;return l.groups.forEach(o=>{o.cards.forEach(r=>{r.id===e&&(a={groupId:o.id,card:r})})}),a}catch(o){throw o}}async function ks(s,e,l){try{const a=await D.getBoardById(s),o=a.groups.findIndex(p=>p.id===e),r=a.groups[o].cards.findIndex(p=>p.id===l.id);return a.groups[o].cards.splice(r,1,l),await D.updateBoard(a)}catch(a){throw console.log("Can not update card"),a}}async function ws(s,e,l){try{var a=await D.getBoardById(s);const o=a.groups.findIndex(p=>p.id===e),r=a.groups[o].cards.findIndex(p=>p.id===l);return a.groups[o].cards.splice(r,1)[0],await D.updateBoard(a)}catch(o){throw o}}function Bs(){return[{id:"l101",title:"Copy Request",className:"color0"},{id:"l102",title:"One more step",className:"color1"},{id:"l103",title:"Priority",className:"color2"},{id:"l104",title:"Design Team",className:"color3"},{id:"l105",title:"Product Marketing",className:"color4"},{id:"l106",title:"Trello Tip",className:"color5"},{id:"l107",title:"Help",className:"color6"}]}function W(s=""){return{id:E.makeId(),title:s,cards:[]}}function xs(s=""){return{id:E.makeId(),title:s,status:"",description:"",dueDate:null,createdAt:Date.now(),attachments:[],checklists:[],comments:[],memberIds:[],labelIds:[],createdBy:V.getLoggedinUser()||{},style:{type:"",cover:"",fullCover:!1,isDark:!0}}}const $s={name:"",data(){return{newBoard:L.getEmptyBoard(),imagePicker:this.$store.getters.imagePicker,colorPicker:this.$store.getters.boardColors.slice(0,5)}},methods:{closeModal(){this.$emit("closeModal")},setBg(s){this.newBoard.style.bgColor="",this.newBoard.style.bgImgUrl=s},setColor(s){this.newBoard.style.bgImgUrl="",this.newBoard.style.bgColor=s.body,this.newBoard.style.bgHeader=s.header},async createBoard(){const s=await this.$store.dispatch({type:"saveBoard",board:this.newBoard});console.log("board",s),this.$router.push(`/board/${s._id}`),this.newBoard=L.getEmptyBoard()}},created(){},computed:{},components:{customModal:N}},Is=f(" Create board "),Ms=t("img",{src:"https://res.cloudinary.com/trellox/image/upload/v1648370075/demo-board_kga9ov.svg",alt:"demo board"},null,-1),Ss=[Ms],Ts={class:"background-picker"},Ds=t("h4",null,"Background",-1),As={class:"image-picker"},Us=["onClick"],Ns=["src"],Os={class:"color-picker"},Gs=["onClick"],Ls=t("h4",{class:"board-title"},[f("Board title "),t("span",null,"*")],-1);function Es(s,e,l,a,o,r){const p=v("custom-modal");return n(),B(p,{class:"board-add",onCloseModal:r.closeModal},{header:_(()=>[Is]),default:_(()=>[t("div",{style:w({"background-image":"url("+o.newBoard.style.bgImgUrl+")","background-color":o.newBoard.style.bgColor}),class:"demo-board"},Ss,4),t("div",Ts,[Ds,t("ul",As,[(n(!0),i(k,null,C(o.imagePicker,d=>(n(),i("li",{onClick:c=>r.setBg(d),key:d},[t("img",{src:d,alt:"board background image"},null,8,Ns)],8,Us))),128))]),t("ul",Os,[(n(!0),i(k,null,C(o.colorPicker,d=>(n(),i("li",{onClick:c=>r.setColor(d),key:d},[t("div",{class:"color",style:w({"background-color":d.body})},null,4)],8,Gs))),128))]),Ls,g(t("input",{"onUpdate:modelValue":e[0]||(e[0]=d=>o.newBoard.title=d),type:"text",placeholder:"Add board title"},null,512),[[M,o.newBoard.title]]),t("button",{onClick:e[1]||(e[1]=(...d)=>r.createBoard&&r.createBoard(...d))},"Create")])]),_:1},8,["onCloseModal"])}var Js=x($s,[["render",Es]]);const Ps={name:"board-list",props:{boards:Array,showCreate:Boolean},data(){return{openBoardCreation:!1,posLeft:null,posTop:null}},components:{boardPreview:Qt,boardAdd:Js},methods:{openCreateBoard(s){this.calcPosition(s.target.getBoundingClientRect()),this.openBoardCreation=!0},calcPosition(s){var{left:e,top:l}=s;const a=window.innerWidth;console.log("rect",s),a-e<500?this.posLeft=e-320:this.posLeft=e+160,this.posTop=l-350}},computed:{}},Vs={class:"boards-area"},js={class:"boards-name"},Fs=t("span",{class:"icon"},null,-1),Hs={class:"title"},Ks={class:"board-list"},Qs={class:"boards"},Rs=t("section",{class:"board-preview new-board"},[t("div",{class:"board-preview-container"},[t("span",{class:"txt-on-borad-img"},"Create new board")])],-1),qs=[Rs];function Ws(s,e,l,a,o,r){const p=v("board-preview"),d=v("board-add");return n(),i("section",Vs,[t("div",js,[Fs,t("h3",Hs,[q(s.$slots,"boards-name")])]),t("section",Ks,[t("ul",Qs,[(n(!0),i(k,null,C(l.boards,c=>(n(),i("li",{key:c._id},[S(p,{board:c},null,8,["board"])]))),128)),l.showCreate?(n(),i("li",{key:0,onClick:e[0]||(e[0]=c=>r.openCreateBoard(c))},qs)):h("",!0)]),o.openBoardCreation?(n(),B(d,{key:0,onCloseModal:e[1]||(e[1]=c=>o.openBoardCreation=!1),style:w(`top: ${o.posTop}px; left: ${o.posLeft}px`)},null,8,["style"])):h("",!0)])])}var zs=x(Ps,[["render",Ws]]);const Ys={name:"user-modal",data(){return{}},methods:{},computed:{member(){return this.$store.getters.loggedinUser},checkMember(){return this.member?this.member.fullname.split(" ")[0].split("")[0]+this.member.fullname.split(" ")[1].split("")[0]:"G"},async logout(){this.$emit("logout")}},components:{customModal:N}},Xs=f(" Acount "),Zs={class:"member-container"},eo=["title"],to=["src"],so={key:1},oo={class:"member-details"},ro=t("hr",null,null,-1),lo={class:"member-options"},no=t("li",null,"Activity",-1);function io(s,e,l,a,o,r){const p=v("custom-modal");return r.member?(n(),B(p,{key:0,class:"user-modal"},{header:_(()=>[Xs]),main:_(()=>{var d;return[t("div",Zs,[t("div",{class:"avatar-container",title:r.member?r.member.fullname:"Guest"},[(d=r.member)!=null&&d.imgUrl?(n(),i("img",{key:0,src:r.member.imgUrl,alt:""},null,8,to)):(n(),i("span",so,m(r.checkMember),1))],8,eo),t("div",oo,[t("h3",null,m(r.member.fullname),1),t("h5",null,m(r.member.email),1)])]),ro,t("ul",lo,[no,t("li",{onClick:e[0]||(e[0]=(...c)=>r.logout&&r.logout(...c))},"Log out")])]}),_:1})):h("",!0)}var ao=x(Ys,[["render",io]]);const co={name:"",data(){return{}},components:{customModal:N},methods:{toggleStar(s){this.$emit("toggleStar",s)}},computed:{boards(){return this.$store.getters.boards}}},uo=f(" Recent boards "),po=["onClick"],ho=["onClick"];function mo(s,e,l,a,o,r){const p=v("custom-modal");return n(),B(p,{class:"header-modal"},{header:_(()=>[uo]),default:_(()=>[t("ul",null,[(n(!0),i(k,null,C(r.boards,d=>(n(),i("li",{key:d._id,onClick:c=>this.$router.push("/board/"+d._id)},[t("section",{class:"bg",style:w({"background-image":"url("+d.style.bgImgUrl+")","background-color":d.style.bgColor})},null,4),t("div",null,[f(m(d.title)+" ",1),t("span",{class:y(["star",{full:d.isStarred}]),onClick:b(c=>r.toggleStar(d),["stop"])},null,10,ho)])],8,po))),128))])]),_:1})}var _o=x(co,[["render",mo]]);const go={name:"",data(){return{}},components:{customModal:N},methods:{toggleStar(s){this.$emit("toggleStar",s)}},computed:{starredBoards(){var s=this.$store.getters.boards;return s.filter(e=>e.isStarred)}}},fo=f(" Starred boards "),yo={key:0},vo=["onClick"],bo=["onClick"],Co={key:1,class:"starred-container"},ko=t("img",{src:"https://a.trellocdn.com/prgb/dist/images/starred-boards-menu/starred-board.cc47d0a8c646581ccd08.svg"},null,-1),wo=t("p",null,"Star important boards to access them quickly and easily.",-1),Bo=[ko,wo];function xo(s,e,l,a,o,r){const p=v("custom-modal");return n(),B(p,{class:"header-modal"},{header:_(()=>[fo]),default:_(()=>[r.starredBoards.length?(n(),i("ul",yo,[(n(!0),i(k,null,C(r.starredBoards,d=>(n(),i("li",{key:d._id,onClick:c=>this.$router.push("/board/"+d._id)},[t("section",{class:"bg",style:w({"background-image":"url("+d.style.bgImgUrl+")","background-color":d.style.bgColor})},null,4),t("div",null,[f(m(d.title)+" ",1),t("span",{class:y(["star",{full:d.isStarred}]),onClick:b(c=>r.toggleStar(d),["stop"])},null,10,bo)])],8,vo))),128))])):(n(),i("div",Co,Bo))]),_:1})}var $o=x(go,[["render",xo]]);const Io={name:"",props:{posLeft:Number,posTop:Number},data(){return{openBoardCreation:!1,newBoard:L.getEmptyBoard(),imagePicker:this.$store.getters.imagePicker,colorPicker:this.$store.getters.boardColors.slice(0,5)}},methods:{closeModal(){this.$emit("closeModal")},setBg(s){this.newBoard.style.bgColor="",this.newBoard.style.bgImgUrl=s},setColor(s){this.newBoard.style.bgImgUrl="",this.newBoard.style.bgColor=s.body,this.newBoard.style.bgHeader=s.header},async createBoard(){const s=await this.$store.dispatch({type:"saveBoard",board:this.newBoard});await this.$store.dispatch({type:"setCurrBoard",boardId:s._id}),this.$router.push(`/board/${s._id}`),this.newBoard=L.getEmptyBoard()}},computed:{},components:{customModal:N}},Mo={class:"create-board-modal-container"},So=f(" Create "),To=t("h3",null,"Create Board",-1),Do=t("p",null,"A board is made up of cards ordered on lists. Use it to manage projects, track information, or organize anything.",-1),Ao=[To,Do],Uo=t("li",{class:"template"},[t("h3",null,"Start with a template"),t("p",null,"Get started with a board template")],-1),No=f(" Create board "),Oo=t("img",{src:"https://res.cloudinary.com/trellox/image/upload/v1648370075/demo-board_kga9ov.svg",alt:"demo board"},null,-1),Go=[Oo],Lo={class:"background-picker"},Eo=t("h4",null,"Background",-1),Jo={class:"image-picker"},Po=["onClick"],Vo=["src"],jo={class:"color-picker"},Fo=["onClick"],Ho=t("h4",{class:"board-title"},[f("Board title "),t("span",null,"*")],-1);function Ko(s,e,l,a,o,r){const p=v("custom-modal");return n(),i("section",Mo,[o.openBoardCreation?h("",!0):(n(),B(p,{key:0,onCloseModal:r.closeModal,class:"create-board-modal",style:w(`top: ${l.posTop}px; left: ${l.posLeft}px`)},{header:_(()=>[So]),main:_(()=>[t("ul",null,[t("li",{onClick:e[0]||(e[0]=b(d=>o.openBoardCreation=!0,["stop"])),class:"create"},Ao),Uo])]),_:1},8,["onCloseModal","style"])),o.openBoardCreation?(n(),B(p,{key:1,onCloseModal:r.closeModal,class:"create-board-modal board-add",style:w(`top: ${l.posTop}px; left: ${l.posLeft}px`)},{header:_(()=>[No]),default:_(()=>[t("div",{style:w({"background-image":"url("+o.newBoard.style.bgImgUrl+")","background-color":o.newBoard.style.bgColor}),class:"demo-board"},Go,4),t("div",Lo,[Eo,t("ul",Jo,[(n(!0),i(k,null,C(o.imagePicker,d=>(n(),i("li",{onClick:c=>r.setBg(d),key:d},[t("img",{src:d,alt:"board background image"},null,8,Vo)],8,Po))),128))]),t("ul",jo,[(n(!0),i(k,null,C(o.colorPicker,d=>(n(),i("li",{onClick:c=>r.setColor(d),key:d},[t("div",{class:"color",style:w({"background-color":d.body})},null,4)],8,Fo))),128))]),Ho,g(t("input",{"onUpdate:modelValue":e[1]||(e[1]=d=>o.newBoard.title=d),type:"text",placeholder:"Add board title"},null,512),[[M,o.newBoard.title]]),t("button",{onClick:e[2]||(e[2]=(...d)=>r.createBoard&&r.createBoard(...d))},"Create")])]),_:1},8,["onCloseModal","style"])):h("",!0)])}var Qo=x(Io,[["render",Ko]]);const Ro={name:"",data(){return{openCreate:!1,openUser:!1,cmpName:null,posLeft:null,posTop:null}},components:{userModal:ao,recentModal:_o,createBoardModal:Qo,starredModal:$o},methods:{openModal(s,e){this.calcPosition(e.target.getBoundingClientRect()),this.cmpName=s},closeModal(){this.cmpName=null},async logout(){try{await this.$store.dispatch("logout"),this.$router.push("/")}catch(s){console.log(s)}},calcPosition(s){var{left:e}=s;const l=window.innerWidth;l-e<310&&(e=l-310),this.posTop=50,this.posLeft=e},async toggleStar(s){console.log("toggle star"),s.isStarred=!s.isStarred,await this.$store.dispatch({type:"saveBoard",board:s})}},computed:{member(){return this.$store.getters.loggedinUser},checkMember(){return this.member?this.member.fullname.split(" ")[0].split("")[0]+this.member.fullname.split(" ")[1].split("")[0]:"G"}}},qo={class:"app-header"},Wo={class:"left-header"},zo=t("i",{class:"fa-brands fa-trello"},null,-1),Yo=t("p",null,"Trellox",-1),Xo=[zo,Yo],Zo=t("i",{class:"fa-solid fa-chevron-down"},null,-1),er=[Zo],tr=t("i",{class:"fa-solid fa-chevron-down"},null,-1),sr=[tr],or={class:"right-header"},rr=t("label",null,[t("i",{class:"fa-solid fa-magnifying-glass"}),t("input",{type:"text",placeholder:"Search"})],-1),lr=t("button",{class:"notifications"},[t("i",{class:"fa-solid fa-bell"})],-1),nr=["title"],ir=["src"],ar={key:1};function dr(s,e,l,a,o,r){var d;const p=A("click-outside");return n(),i("header",qo,[t("div",Wo,[t("div",{onClick:e[0]||(e[0]=c=>this.$router.push("/workspace")),class:"logo"},Xo),t("button",{class:"recent",onClick:e[1]||(e[1]=c=>r.openModal("recent-modal",c))},er),t("button",{class:"starred",onClick:e[2]||(e[2]=c=>r.openModal("starred-modal",c))},sr),t("button",{onClick:e[3]||(e[3]=c=>r.openModal("create-board-modal",c))})]),t("div",or,[rr,lr,t("div",{onClick:e[4]||(e[4]=c=>r.openModal("user-modal",c)),class:"avatar-container",title:r.member?r.member.fullname:"Guest"},[(d=r.member)!=null&&d.imgUrl?(n(),i("img",{key:0,src:r.member.imgUrl,alt:""},null,8,ir)):(n(),i("span",ar,m(r.checkMember),1))],8,nr)]),o.cmpName?g((n(),B(Z(o.cmpName),{key:0,posLeft:o.posLeft,posTop:o.posTop,onToggleStar:r.toggleStar,onCloseModal:r.closeModal,onLogout:r.logout,style:w(`top: ${o.posTop}px; left: ${o.posLeft}px`)},null,8,["posLeft","posTop","onToggleStar","onCloseModal","onLogout","style"])),[[p,()=>r.closeModal()]]):h("",!0)])}var me=x(Ro,[["render",dr]]);const cr={name:"workspace-view",components:{boardList:zs,AppHeader:me},data(){return{}},methods:{setCurrpage(s){this.currpage=s}},computed:{boards(){return this.$store.getters.boards},starredBoards(){var s=this.$store.getters.boards;return s.filter(e=>e.isStarred)},noneStarredBoards(){var s=this.$store.getters.boards;return s.filter(e=>!e.isStarred)}}},ur={class:"workspace-view"},pr={class:"workspace-wrapper"},hr={class:"workspace-nav"},mr={class:"nav-options-top"},_r=t("span",{class:"board-icon icon"},null,-1),gr=t("span",{class:"view-name"},"Boards",-1),fr=t("span",{class:"home-icon icon"},null,-1),yr=t("span",{class:"view-name"},"Home",-1),vr={class:"board-list-container"},br=f("Starred"),Cr=f("Recently viewed"),kr=f("YOUR WORKSPACE");function wr(s,e,l,a,o,r){const p=v("app-header"),d=v("router-link"),c=v("board-list");return n(),i("section",ur,[S(p,{class:"workspace-header"}),t("div",pr,[t("nav",hr,[t("div",mr,[S(d,{to:"/workspace",class:"active"},{default:_(()=>[_r,gr]),_:1}),S(d,{to:"/"},{default:_(()=>[fr,yr]),_:1})])]),t("div",vr,[S(c,{boards:r.starredBoards,showCreate:!1,class:"starred"},{"boards-name":_(()=>[br]),_:1},8,["boards"]),S(c,{boards:r.noneStarredBoards,showCreate:!1,class:"recentlyViewed"},{"boards-name":_(()=>[Cr]),_:1},8,["boards"]),S(c,{boards:r.boards,showCreate:!0,class:"yourWorkspace"},{"boards-name":_(()=>[kr]),_:1},8,["boards"])])])])}var Br=x(cr,[["render",wr]]);const xr={props:{card:Object,posLeft:Number},components:{customModal:N},data(){return{labelIds:JSON.parse(JSON.stringify(this.card.labelIds)),newLabel:null,selectedColor:"color0",wantToDelete:!1,filterBy:""}},created(){},methods:{goBack(){this.newLabel=null},closeModal(){this.$emit("closeModal")},toggleLabel(s){const e=this.labelIds.findIndex(l=>l===s);e===-1?this.labelIds.push(s):this.labelIds.splice(e,1),this.save()},startCreating(s,e=!1){s&&!e?(this.newLabel=s,this.selectedColor=s.className):this.newLabel={title:e?s:"",className:this.selectedColor}},changeColor(s){this.newLabel.className=s,this.selectedColor=s},async saveLabel(){var s=this.$store.getters.currBoard,e=!1;if(this.newLabel.id){const l=s.labels.findIndex(a=>a.id===this.newLabel.id);s.labels.splice(l,1,this.newLabel)}else{e=!0;const l=this.labels.findIndex(a=>a.className===this.newLabel.className&&a.title===this.newLabel.title);l===-1?(this.newLabel.id=E.makeId(),s.labels.push(this.newLabel)):this.labelIds.findIndex(o=>o===this.labels[l].id)===-1&&this.labelIds.push(this.labels[l].id)}await this.$store.dispatch({type:"saveBoard",board:s}),e&&(this.labelIds.push(this.newLabel.id),this.save()),this.goBack()},async deleteLabel(){var s=this.$store.getters.currBoard;const e=s.labels.findIndex(l=>l.id===this.newLabel.id);s.labels.splice(e,1),s.groups=s.groups.map(l=>(l.cards=l.cards.map(a=>(a.labelIds=a.labelIds.filter(o=>o!==this.newLabel.id),a)),l)),await this.$store.dispatch({type:"saveBoard",board:s}),this.goBack(),this.wantToDelete=!1},save(){this.$emit("updateKey","labelIds",JSON.parse(JSON.stringify(this.labelIds)))}},computed:{labels(){var s=this.$store.getters.currBoard.labels;if(!this.filterBy)return s;const e=new RegExp(this.filterBy,"i");return s.filter(l=>e.test(l.title))},classColors(){var s=this.$store.getters.labelColors;return s.pop(),s},emptyColor(){return this.$store.getters.labelColors.pop()},btnTxt(){return this.newLabel.id?"Save":"Create"},titleTxt(){return this.newLabel.id?"Change label":"Create label"}},emits:["closeModal","updateKey"]},$r={class:"label-picker"},Ir=f(" Labels "),Mr=t("h4",null,"Labels",-1),Sr={class:"labels-container"},Tr=["onClick"],Dr=["onClick"],Ar={key:0,class:"v-icon"},Ur=t("hr",null,null,-1),Nr=t("button",{class:"custom-btn"},"Enable color blind friendly mode",-1),Or=t("label",{for:"name"},"Name",-1),Gr=t("label",{for:"color"},"Select a color",-1),Lr=["onClick"],Er={key:0,class:"v-icon"},Jr={class:"empty-card-container"},Pr={key:0,class:"v-icon"},Vr=t("div",null,[t("p",null,"No color."),t("p",null,"This won't show up on the front of cards.")],-1),jr={class:"add-btn"},Fr=f("Delete label?"),Hr=t("p",null,"There is no undo. This will remove this label from all cards and destroy its history.",-1);function Kr(s,e,l,a,o,r){const p=v("custom-modal"),d=A("focus");return n(),i("section",$r,[o.newLabel?h("",!0):(n(),B(p,{key:0,onCloseModal:r.closeModal,onGoBack:r.goBack,style:w(`left: ${l.posLeft}px`)},{header:_(()=>[Ir]),default:_(()=>[g(t("input",{"onUpdate:modelValue":e[0]||(e[0]=c=>o.filterBy=c),class:"custom-input",type:"text",placeholder:"Search labels..."},null,512),[[d],[M,o.filterBy]]),Mr,t("ul",Sr,[(n(!0),i(k,null,C(r.labels,c=>(n(),i("li",{key:c.id,onClick:u=>r.toggleLabel(c.id)},[t("span",{class:"edit-label",onClick:b(u=>r.startCreating(c),["stop"])},null,8,Dr),t("div",{class:y(["label-in-label-picker",c.className])},[f(m(c.title)+" ",1),o.labelIds.includes(c.id)?(n(),i("span",Ar)):h("",!0)],2)],8,Tr))),128))]),r.labels.length?(n(),i("button",{key:0,class:"custom-btn",onClick:e[1]||(e[1]=c=>r.startCreating(null))},"Create new label")):(n(),i("button",{key:1,class:"custom-btn",onClick:e[2]||(e[2]=c=>r.startCreating(o.filterBy,!0))},'Create new "'+m(o.filterBy)+'"" label',1)),Ur,Nr]),_:1},8,["onCloseModal","onGoBack","style"])),o.newLabel&&!o.wantToDelete?(n(),B(p,{key:1,onCloseModal:r.closeModal,onGoBack:r.goBack,style:w(`left: ${l.posLeft}px`),isFirstPage:!1},{header:_(()=>[f(m(r.titleTxt),1)]),default:_(()=>[t("form",{onSubmit:e[6]||(e[6]=b((...c)=>r.saveLabel&&r.saveLabel(...c),["prevent"])),class:"form-label"},[Or,g(t("input",{"onUpdate:modelValue":e[3]||(e[3]=c=>o.newLabel.title=c),id:"name",class:"custom-input",type:"text"},null,512),[[d],[M,o.newLabel.title]]),Gr,t("div",null,[(n(!0),i(k,null,C(r.classColors,c=>(n(),i("span",{key:c,class:y([c,"colorPalette"]),onClick:u=>r.changeColor(c)},[o.selectedColor===c?(n(),i("span",Er)):h("",!0)],10,Lr))),128))]),t("div",Jr,[t("span",{class:y([r.emptyColor,"colorPalette"]),onClick:e[4]||(e[4]=c=>r.changeColor(r.emptyColor))},[o.selectedColor===r.emptyColor?(n(),i("span",Pr)):h("",!0)],2),Vr]),t("button",jr,m(r.btnTxt),1),o.newLabel.id?(n(),i("div",{key:0,class:"delete-btn",onClick:e[5]||(e[5]=c=>o.wantToDelete=!0)},"Delete")):h("",!0)],32)]),_:1},8,["onCloseModal","onGoBack","style"])):h("",!0),o.newLabel&&o.wantToDelete?(n(),B(p,{key:2,onCloseModal:r.closeModal,onGoBack:e[8]||(e[8]=c=>o.wantToDelete=!1),style:w(`left: ${l.posLeft}px`),isFirstPage:!1,class:"delete-mode"},{header:_(()=>[Fr]),default:_(()=>[Hr,t("div",{class:"delete-btn",onClick:e[7]||(e[7]=(...c)=>r.deleteLabel&&r.deleteLabel(...c))},"Delete")]),_:1},8,["onCloseModal","style"])):h("",!0)])}var _e=x(xr,[["render",Kr]]);const Qr={props:{card:Object},components:{customModal:N},created(){},data(){return{newMember:null,memberIds:JSON.parse(JSON.stringify(this.card.memberIds)),filterBy:""}},methods:{closeModal(){this.$emit("closeModal")},toggleMember(s,e){var l="";const a=this.memberIds.findIndex(o=>o===s);a===-1?(this.memberIds.push(s),l=`${e} joined this card`):(this.memberIds.splice(a,1),l=`${e} left this card`),this.save(l)},save(s){this.$emit("updateKey","memberIds",JSON.parse(JSON.stringify(this.memberIds)),s)}},computed:{members(){var s=this.$store.getters.currBoard.members;if(!this.filterBy)return s;const e=new RegExp(this.filterBy,"i");return s.filter(l=>e.test(l.fullname)||e.test(l.username))}},unmounted(){}},Rr=f(" Members "),qr=t("h4",null,"Board members",-1),Wr={key:0,class:"members-container"},zr=["onClick"],Yr={class:"avatar-container"},Xr=["src"],Zr={key:1},el=t("span",{class:"v-icon"},null,-1),tl={key:1,class:"msg-no-members"},sl={key:2,class:"custom-btn"};function ol(s,e,l,a,o,r){const p=v("custom-modal"),d=A("focus");return n(),B(p,{onCloseModal:r.closeModal},{header:_(()=>[Rr]),default:_(()=>[g(t("input",{"onUpdate:modelValue":e[0]||(e[0]=c=>o.filterBy=c),class:"custom-input",type:"text",placeholder:"Search members..."},null,512),[[d],[M,o.filterBy]]),qr,r.members.length?(n(),i("ul",Wr,[(n(!0),i(k,null,C(r.members,c=>(n(),i("li",{key:c._id,onClick:u=>r.toggleMember(c._id,c.fullname)},[t("div",{class:y(["member",{active:o.memberIds.includes(c._id)}])},[t("div",Yr,[c.imgUrl?(n(),i("img",{key:0,src:c.imgUrl,alt:""},null,8,Xr)):(n(),i("span",Zr,m(c.fullname.split(" ")[0].split("")[0]+c.fullname.split(" ")[1].split("")[0]),1))]),t("span",null,m(c.fullname),1),t("span",null,"("+m(c.username)+")",1),el],2)],8,zr))),128))])):(n(),i("p",tl,"Looks like that person isn't a member yet. Enter their email address to add them to the card and board.")),r.members.length?(n(),i("button",sl,"Show other Workspace members")):h("",!0)]),_:1},8,["onCloseModal"])}var ge=x(Qr,[["render",ol]]);const rl={props:{card:Object},components:{customModal:N,Calendar:Te,DatePicker:De},created(){},data(){return{date:new Date,time:null}},methods:{closeModal(){this.$emit("closeModal")},async setDate(){this.time||(this.time="00:00");const s={date:this.date,time:this.time,isCompleted:null};await this.$emit("updateKey","dueDate",JSON.parse(JSON.stringify(s)),`added a due date ${s.date} at ${s.time}`),this.closeModal()},async removeDate(){await this.$emit("updateKey","dueDate",JSON.parse(JSON.stringify(null)),"removed due date from card"),this.closeModal()}},computed:{readDate(){const s=this.date.getDate(),e=this.date.getMonth()+1,l=this.date.getFullYear(),a=s<10?"0"+s:s,o=e<10?"0"+e:e;return`${l}-${o}-${a}`}},unmounted(){}},ll=f(" Dates "),nl={class:"calendar-container"},il=t("h4",null,"Due date",-1),al={class:"date-options"},dl=t("h4",null,"Reminders will be sent to all members and watchers of this card.",-1);function cl(s,e,l,a,o,r){const p=v("DatePicker",!0),d=v("custom-modal");return n(),B(d,{class:"date-picker",onCloseModal:r.closeModal},{header:_(()=>[ll]),default:_(()=>[t("div",nl,[S(p,{modelValue:o.date,"onUpdate:modelValue":e[0]||(e[0]=c=>o.date=c)},null,8,["modelValue"])]),il,t("div",al,[g(t("input",{disabled:"",type:"date","onUpdate:modelValue":e[1]||(e[1]=c=>r.readDate=c),class:"custom-input"},null,512),[[M,r.readDate]]),g(t("input",{type:"time",class:"custom-input","onUpdate:modelValue":e[2]||(e[2]=c=>o.time=c)},null,512),[[M,o.time]])]),dl,t("button",{onClick:e[3]||(e[3]=(...c)=>r.setDate&&r.setDate(...c)),class:"custom-btn save"},"Save"),t("button",{onClick:e[4]||(e[4]=(...c)=>r.removeDate&&r.removeDate(...c)),class:"custom-btn"},"Remove")]),_:1},8,["onCloseModal"])}var fe=x(rl,[["render",cl]]);const ul={name:"",data(){return{checklist:{title:"Checklist",newTodo:"",todos:[]}}},methods:{closeModal(){this.$emit("closeModal")},save(){!this.checklist.title||(this.$emit("updateKey","checklists",JSON.parse(JSON.stringify(this.checklist)),`added checklist ${this.checklist.title}`),this.$emit("closeModal"))}},computed:{},components:{customModal:N}},pl=f(" Add checklist "),hl=t("h4",null,"Title",-1),ml=t("h4",null,"Copy items from...",-1),_l=t("p",null,"to put here dropdown select",-1);function gl(s,e,l,a,o,r){const p=v("custom-modal"),d=A("focus");return n(),B(p,{onCloseModal:r.closeModal},{header:_(()=>[pl]),default:_(()=>[hl,g(t("input",{"onUpdate:modelValue":e[0]||(e[0]=c=>o.checklist.title=c),class:"custom-input",type:"text"},null,512),[[M,o.checklist.title],[d]]),ml,_l,t("button",{class:"add-btn",onClick:e[1]||(e[1]=(...c)=>r.save&&r.save(...c))},"Add")]),_:1},8,["onCloseModal"])}var fl=x(ul,[["render",gl]]);const K={getBgImages:vl,uploadImg:yl};function yl(s){const e="Trellox_1",a="https://api.cloudinary.com/v1_1/trellox/image/upload",o=new FormData;return o.append("file",s.target.files[0]),o.append("upload_preset",e),fetch(a,{method:"POST",body:o}).then(r=>r.json()).then(r=>r).catch(r=>console.error(r))}async function vl(s){try{return(await fetch(`https://api.unsplash.com/search?query=${s}&client_id=oMe4LiG85eXMR9Nf7b8cxU6jsTRHCtO81O_MjX-J4L0`,{method:"GET"})).json()}catch(e){console.log("cannot get images",e)}}const bl={props:{card:Object},name:"",data(){return{style:JSON.parse(JSON.stringify(this.card.style)),attachments:JSON.parse(JSON.stringify(this.card.attachments)),colors:this.$store.getters.coverColors,images:this.$store.getters.coverImages,searchPhotos:!1,searchVal:"",photos:null}},created(){this.searchImages("chill",!0)},methods:{closeModal(){this.$emit("closeModal")},async onUploadImg(s){const e=await K.uploadImg(s),l={name:e.public_id,createdAt:e.created_at,url:e.url,format:e.format};this.attachments.push(l),this.$emit("updateKey","attachments",JSON.parse(JSON.stringify(this.attachments)),"added an attachment"),this.style.cover=e.url,this.style.type="url",this.save()},setColor(s){this.style.cover===s?(this.style.cover="",this.style.type=""):(this.style.cover=s,this.style.type="color"),this.save()},setBgUrl(s){this.style.cover===s?(this.style.cover="",this.style.type=""):(this.style.cover=s,this.style.type="url"),this.goBack(),this.save()},setCoverSize(s){this.style.fullCover=s,this.save()},save(){const s=this.style.cover?"updated card cover":"removed card cover";this.$emit("updateKey","style",JSON.parse(JSON.stringify(this.style)),s)},async searchImages(s,e=!1){e||(this.searchVal=s);const l=await K.getBgImages(s);this.photos=l.photos.results},goBack(){this.searchVal="",this.searchPhotos=!1},setDark(s){this.style.isDark=s,this.save()}},computed:{background(){return this.style.type==="url"?`background-image:url('${this.style.cover}')`:`background-color: ${this.style.cover}`}},components:{customModal:N}},Cl=f(" Cover "),kl=t("h4",null,"Size",-1),wl={class:"cover-preview-container"},Bl=t("div",{class:"cover-bottom"},[t("div",{class:"wide"}),t("div",{class:"narrow"}),t("div",{class:"content-container"},[t("div",{class:"content"}),t("div",{class:"content"})]),t("div",{class:"member"})],-1),xl=[Bl],$l=t("div",{class:"full-content-container"},[t("div",{class:"wide"}),t("div",{class:"narrow"})],-1),Il=[$l],Ml={key:0,class:"custom-btn"},Sl={key:1,class:"text-color-container"},Tl=t("h4",null,"Text color",-1),Dl={class:"preview-container"},Al=t("h4",null,"Colors",-1),Ul={class:"colors-container"},Nl=["onClick"],Ol=t("h4",null,"Attachments",-1),Gl={class:"attachment-container"},Ll=["onClick"],El={for:"file-input",class:"custom-btn"},Jl=f(" Upload a cover image "),Pl=t("span",{class:"tip"},"Tip: Drag an image on to the card to upload it.",-1),Vl=t("h4",{class:"images-header"},"Photos from Unsplash",-1),jl={class:"images-container"},Fl=["onClick"],Hl=f("Photo search"),Kl={key:0},Ql=t("h4",{style:{"margin-top":"16px","margin-bottom":"4px"}},"Results",-1),Rl={class:"large-image-container"},ql=["onClick"],Wl={key:1},zl=t("h4",null,"Suggested searches",-1),Yl={class:"buttons-container"},Xl=t("h4",{style:{"margin-top":"12px","margin-bottom":"4px"}},"Top photos",-1),Zl={key:0,class:"images-container"},en=["onClick"],tn=t("span",{class:"unsplash-txt"},[f("Photos from "),t("a",{target:"_blank",href:"https://unsplash.com/"},"Unsplash")],-1);function sn(s,e,l,a,o,r){const p=v("custom-modal"),d=A("focus");return o.searchPhotos?(n(),B(p,{key:1,isFirstPage:!1,onGoBack:r.goBack,class:"image-picker",onCloseModal:r.closeModal},{header:_(()=>[Hl]),default:_(()=>[g(t("input",{type:"text",onInput:e[6]||(e[6]=c=>r.searchImages(o.searchVal)),"onUpdate:modelValue":e[7]||(e[7]=c=>o.searchVal=c),class:"custom-input",placeholder:"Search Unsplash for photos"},null,544),[[d],[M,o.searchVal]]),o.searchVal?(n(),i("section",Kl,[Ql,t("div",Rl,[(n(!0),i(k,null,C(o.photos,c=>(n(),i("div",{key:c,class:"large-preview",onClick:u=>r.setBgUrl(c.urls.full),style:w(`background-image: url('${c.urls.small}')`)},null,12,ql))),128))])])):(n(),i("section",Wl,[zl,t("div",Yl,[t("button",{onClick:e[8]||(e[8]=b(c=>r.searchImages("Productivity"),["stop"])),class:"grey-btn"},"Productivity"),t("button",{onClick:e[9]||(e[9]=b(c=>r.searchImages("Perspective"),["stop"])),class:"grey-btn"},"Perspective"),t("button",{onClick:e[10]||(e[10]=b(c=>r.searchImages("Organization"),["stop"])),class:"grey-btn"},"Organization"),t("button",{onClick:e[11]||(e[11]=b(c=>r.searchImages("Colorful"),["stop"])),class:"grey-btn"},"Colorful"),t("button",{onClick:e[12]||(e[12]=b(c=>r.searchImages("Nature"),["stop"])),class:"grey-btn"},"Nature"),t("button",{onClick:e[13]||(e[13]=b(c=>r.searchImages("Business"),["stop"])),class:"grey-btn"},"Business"),t("button",{onClick:e[14]||(e[14]=b(c=>r.searchImages("Minimal"),["stop"])),class:"grey-btn"},"Minimal"),t("button",{onClick:e[15]||(e[15]=b(c=>r.searchImages("Space"),["stop"])),class:"grey-btn"},"Space"),t("button",{onClick:e[16]||(e[16]=b(c=>r.searchImages("Animals"),["stop"])),class:"grey-btn"},"Animals")]),Xl,o.photos?(n(),i("div",Zl,[(n(!0),i(k,null,C(o.photos,c=>(n(),i("div",{key:c,class:y(["attachment-preview",c.urls.full===o.style.cover?"active":""]),onClick:u=>r.setBgUrl(c.urls.full),style:w(`background-image: url('${c.urls.small}')`)},null,14,en))),128))])):h("",!0),tn]))]),_:1},8,["onGoBack","onCloseModal"])):(n(),B(p,{key:0,onCloseModal:r.closeModal,class:"cover-picker"},{header:_(()=>[Cl]),default:_(()=>[kl,t("div",wl,[t("div",{onClick:e[0]||(e[0]=c=>r.setCoverSize(!1)),class:y(["cover-preview",!o.style.fullCover&&o.style.cover?"active":""])},[t("div",{class:"cover-top",style:w(r.background)},xl,4)],2),t("div",{onClick:e[1]||(e[1]=c=>r.setCoverSize(!0)),class:y(["full-cover-preview",o.style.fullCover&&o.style.cover?"active":""])},[t("div",{class:"cover-top",style:w(r.background)},Il,4)],2)]),o.style.cover?(n(),i("button",Ml,"Remove cover")):h("",!0),o.style.type==="url"&&o.style.fullCover&&o.style.cover?(n(),i("section",Sl,[Tl,t("div",Dl,[t("div",{class:y(["dark",o.style.isDark?"active":""]),onClick:e[2]||(e[2]=c=>r.setDark(!0)),style:w(`background-image: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url('${o.style.cover}');`)},m(l.card.title),7),t("div",{class:y(["light",o.style.isDark?"":"active"]),onClick:e[3]||(e[3]=c=>r.setDark(!1)),style:w(`background-image: linear-gradient(rgba(255, 255, 255, 0.5), rgba(255, 255, 255, 0.5)), url('${o.style.cover}');`)},m(l.card.title),7)])])):h("",!0),Al,t("div",Ul,[(n(!0),i(k,null,C(o.colors,c=>(n(),i("div",{key:c,class:y(["color-preview",c===o.style.cover?"active":""]),style:w("background-color:"+c),onClick:u=>r.setColor(c)},null,14,Nl))),128))]),Ol,t("div",Gl,[(n(!0),i(k,null,C(o.attachments,c=>(n(),i("div",{key:c,class:y(["attachment-preview",c.url===o.style.cover?"active":""]),onClick:u=>r.setBgUrl(c.url),style:w(`background-image: url('${c.url}')`)},null,14,Ll))),128))]),t("label",El,[Jl,t("input",{type:"file",onInput:e[4]||(e[4]=(...c)=>r.onUploadImg&&r.onUploadImg(...c)),class:"file-input",hidden:"",id:"file-input"},null,32)]),Pl,Vl,t("div",jl,[(n(!0),i(k,null,C(o.images,c=>(n(),i("div",{key:c,class:y(["attachment-preview",c===o.style.cover?"active":""]),onClick:u=>r.setBgUrl(c),style:w(`background-image: url('${c}')`)},null,14,Fl))),128))]),t("button",{onClick:e[5]||(e[5]=c=>o.searchPhotos=!0),class:"custom-btn"},"Search for photos")]),_:1},8,["onCloseModal"]))}var ye=x(bl,[["render",sn]]);const on={name:"",data(){return{}},methods:{async onUploadImg(s){const e=await K.uploadImg(s),l={name:e.public_id,createdAt:e.created_at,url:e.url,format:e.format};this.$emit("updateKey","attachments",JSON.parse(JSON.stringify(l)))}},components:{customModal:N}},rn=f(" Attach from... "),ln={class:"attachment-picker"},nn=f("Computer "),an=t("li",null,[t("label",null,"Google Drive ")],-1);function dn(s,e,l,a,o,r){const p=v("custom-modal");return n(),B(p,{class:"attachment-container"},{header:_(()=>[rn]),default:_(()=>[t("ul",ln,[t("li",null,[t("label",null,[nn,t("input",{type:"file",onChange:e[0]||(e[0]=(...d)=>r.onUploadImg&&r.onUploadImg(...d))},null,32)])]),an])]),_:1})}var cn=x(on,[["render",dn]]);const un={data(){return{}},methods:{removeCard(){this.$emit("removeCard")},closeModal(){this.$emit("closeModal")}},computed:{},components:{customModal:N}},pn=f(" Delete card? "),hn=t("p",{style:{margin:"0 0 8px"}}," All actions will be removed from the activity feed and you won\u2019t be able to re-open the card. There is no undo. ",-1);function mn(s,e,l,a,o,r){const p=v("custom-modal");return n(),B(p,{onCloseModal:r.closeModal},{header:_(()=>[pn]),default:_(()=>[hn,t("button",{class:"delete-btn",style:{width:"100%","justify-content":"center"},onClick:e[0]||(e[0]=(...d)=>r.removeCard&&r.removeCard(...d))},"Delete")]),_:1},8,["onCloseModal"])}var ve=x(un,[["render",mn]]);const _n={props:{card:Object,isCopyCard:Boolean},data(){return{chosenBoard:this.$store.getters.currBoard,groupPos:0,cardPos:0,newTitle:JSON.parse(JSON.stringify(this.card.title)),currBoard:null}},methods:{closeModal(){this.$emit("closeModal")},async moveCard(){this.currBoard=JSON.parse(JSON.stringify(this.$store.getters.currBoard));const s=JSON.parse(JSON.stringify(this.chosenBoard));var e=JSON.parse(JSON.stringify(this.card));this.isCopyCard&&(e.title=this.newTitle),s.groups[this.groupPos].cards.splice(this.cardPos,0,e),await this.$store.dispatch({type:"saveBoard",board:s}),await this.$store.dispatch({type:"setCurrBoard",boardId:this.currBoard._id}),this.isCopyCard||this.$emit("removeCard"),this.closeModal()}},computed:{boards(){return this.$store.getters.boards}},components:{customModal:N}},gn={key:0},fn=t("h4",null,"Title",-1),yn={class:"move-card"},vn={class:"board-info"},bn=t("p",null,"Board",-1),Cn=["value"],kn={class:"board-info"},wn=t("p",null,"Group",-1),Bn=["value"],xn={class:"board-info"},$n=t("p",null,"Position",-1),In=["value"];function Mn(s,e,l,a,o,r){const p=v("custom-modal");return n(),B(p,{onCloseModal:r.closeModal},{header:_(()=>[f(m(l.isCopyCard?"Copy":"Move")+" card ",1)]),default:_(()=>[l.isCopyCard?(n(),i("div",gn,[fn,g(t("textarea",{type:"text","onUpdate:modelValue":e[0]||(e[0]=d=>o.newTitle=d),class:"custom-input"},null,512),[[M,o.newTitle]])])):h("",!0),t("h4",null,m(l.isCopyCard?"Copy to...":"Select destination"),1),t("div",yn,[t("form",{onSubmit:e[4]||(e[4]=b((...d)=>r.moveCard&&r.moveCard(...d),["prevent"]))},[t("label",null,[t("div",vn,[bn,t("p",null,m(o.chosenBoard.title),1),g(t("select",{"onUpdate:modelValue":e[1]||(e[1]=d=>o.chosenBoard=d)},[(n(!0),i(k,null,C(r.boards,d=>(n(),i("option",{key:d._id,value:d},m(d.title),9,Cn))),128))],512),[[Q,o.chosenBoard]])])]),t("label",null,[t("div",kn,[wn,t("p",null,m(o.chosenBoard.groups[o.groupPos].title),1),g(t("select",{"onUpdate:modelValue":e[2]||(e[2]=d=>o.groupPos=d)},[(n(!0),i(k,null,C(o.chosenBoard.groups,(d,c)=>(n(),i("option",{key:d,value:c},m(d.title),9,Bn))),128))],512),[[Q,o.groupPos]])])]),t("label",null,[t("div",xn,[$n,t("p",null,m(o.cardPos+1),1),o.chosenBoard.groups[o.groupPos].cards.length?g((n(),i("select",{key:0,"onUpdate:modelValue":e[3]||(e[3]=d=>o.cardPos=d)},[(n(!0),i(k,null,C(o.chosenBoard.groups[o.groupPos].cards,(d,c)=>(n(),i("option",{key:d.id,value:c},m(c+1),9,In))),128))],512)),[[Q,o.cardPos]]):h("",!0)])]),t("button",null,m(l.isCopyCard?"Copy":"Move"),1)],32)])]),_:1},8,["onCloseModal"])}var be=x(_n,[["render",Mn]]);const Sn={props:{card:Object},data(){return{}},created(){console.log("this.$route.params",this.$route.params)},methods:{closeModal(){this.$emit("closeModal")}},computed:{cardLink(){return`https://trelloxx.herokuapp.com/#/board/${this.$route.params.boardId}/edit/${this.card.id}`}},components:{customModal:N}},Tn=f("Share and more..."),Dn=t("h4",null,[f("Link to this card "),t("span",{class:"members-icon"})],-1);function An(s,e,l,a,o,r){const p=v("custom-modal"),d=A("focus");return n(),B(p,{onCloseModal:r.closeModal},{header:_(()=>[Tn]),default:_(()=>[Dn,g(t("input",{type:"text",autofocus:"","onUpdate:modelValue":e[0]||(e[0]=c=>r.cardLink=c),style:{resize:"none"},class:"custom-input"},null,512),[[d],[M,r.cardLink]])]),_:1},8,["onCloseModal"])}var Un=x(Sn,[["render",An]]);const Nn={components:{labelPicker:_e,memberPicker:ge,checklistAdd:fl,coverPicker:ye,attachments:cn,confirmDelete:ve,datePicker:fe,moveCard:be,shareCard:Un},data(){var s;return{isTextArea:!1,card:null,boardId:null,cardId:null,groupId:null,isShowActivity:!1,isCommentsInput:!1,newComment:{txt:"",createdAt:null,byMemberId:((s=this.$store.getters.loggedinUser)==null?void 0:s._id)||""},cmpName:null,description:null,isAddTodo:null,newTodo:{title:"",isDone:!1},coverColor:null,isCopyCard:!1,posTop:null,posLeft:null}},created(){this.cardId=this.$route.params.cardId,this.boardId=this.$route.params.boardId,this.loadCard()},methods:{openModal(s,e){this.calcPosition(e.target.getBoundingClientRect()),s==="copy-card"?(this.isCopyCard=!0,s="move-card"):this.isCopyCard=!1,this.cmpName=s},calcPosition(s){var{left:e}=s;const l=window.innerWidth;l-e<300&&(e=l-330),this.posTop=100,this.posLeft=e},closeModal(){this.cmpName=null},async updateKey(s,e,l){s==="checklists"||s==="attachments"?(e.id=E.makeId(),this.card[s].push(e)):this.card[s]=e,l&&await this.addActivity(l),await this.updateCard()},closeEdit(){this.$router.push(`/board/${this.boardId}`)},async loadCard(){var e;const s=await this.$store.dispatch({type:"getCardById",boardId:this.boardId,cardId:this.cardId});this.card=s.card,this.description=((e=s.card)==null?void 0:e.description)||"",this.groupId=s.groupId,this.checkCover()},showActivity(){this.isShowActivity=!this.isShowActivity},toggleCommentsInput(){this.isCommentsInput=!this.isCommentsInput},postComment(){if(!!this.newComment.txt){var s=JSON.parse(JSON.stringify(this.newComment));s.txt.trim(),s.createdAt=Date.now(),s.id=E.makeId(),this.card.comments.unshift(s),this.updateCard(),this.isCommentsInput=!1,this.newComment.txt=""}},async updateCard(){!this.card.title||(await this.$store.dispatch({type:"updateCard",groupId:this.groupId,card:this.card}),this.loadCard())},calcProgress(s){if(!s.length)return"0%";var l=(s.reduce((a,o)=>(o.isDone&&a++,a),0)*100/s.length).toFixed(0)+"%";return l},async toggleTodo(s,e){const l=this.card.checklists.findIndex(o=>o.id===e),a=this.card.checklists[l].todos.findIndex(o=>o.id===s);this.card.checklists[l].todos[a].isDone=!this.card.checklists[l].todos[a].isDone,this.card.checklists[l].todos[a].isDone?await this.addActivity(`marked ${this.card.checklists[l].todos[a].title} completed at checklist ${this.card.checklists[l].title}`):await this.addActivity(`unmarked ${this.card.checklists[l].todos[a].title} at checklist ${this.card.checklists[l].title}`),this.updateCard()},async updateDescription(){this.card.description=this.description,await this.addActivity(`added description to card ${this.card.title}`),this.updateCard(),this.isTextArea=!1},getMemberById(s){console.log("memberId",s)},async addTodo(s,e){var l=JSON.parse(JSON.stringify(this.newTodo));if(l.title=JSON.parse(JSON.stringify(e.newTodo)),e.newTodo="",!l.title)return;l.id=E.makeId();const a=this.card.checklists.findIndex(o=>o.id===s);this.card.checklists[a].todos.push(l),await this.addActivity(`added ${l.title} to the checklist ${this.card.checklists[a].title}`),this.updateCard()},closeTodoInput(s){s.newTodo="",this.isAddTodo=null},openUrl(s){window.open(s)},async removeChecklist(s){await this.addActivity(`removed checklist ${this.card.checklists[s].title}`),this.card.checklists.splice(s,1),this.updateCard()},async checkCover(){if(!this.card.style.cover)return"";try{const s=new z;this.card.style.type==="url"&&(this.coverColor=await s.getColorAsync(this.card.style.cover))}catch(s){console.log(s)}},async removeCard(){this.addActivity(`removed card ${this.card.title}`),await this.$store.dispatch("removeCard",{groupId:this.groupId,cardId:this.cardId}),this.closeEdit()},async addActivity(s){await this.$store.dispatch({type:"addActivity",txt:s,card:this.card})},async joinToCard(){this.card.memberIds.push(this.$store.getters.loggedinUser._id),await this.addActivity(`${this.$store.getters.loggedinUser.fullname} Joined card`),this.updateCard()},formattedTime(s){return E.getFormattedTime(s)}},computed:{commentsInputStyle(){return this.isCommentsInput?"active-input":""},isCommentsText(){return this.newComment.txt?"save-btn":"not-allowed-btn"},labels(){var s=this.$store.getters.currBoard.labels;return s.filter(e=>this.card.labelIds.includes(e.id))},members(){var s=this.$store.getters.currBoard.members;return s.filter(e=>this.card.memberIds.includes(e._id))},comments(){var s=JSON.parse(JSON.stringify(this.$store.getters.users));return s.push(JSON.parse(JSON.stringify(this.$store.getters.currBoard.members))),JSON.parse(JSON.stringify(this.card)).comments.map(l=>{var a=s.find(o=>o._id===l.byMemberId);return l.byMember=a,l})},groupTitle(){return this.$store.getters.currBoard.groups.find(l=>l.id===this.groupId).title},cover(){return this.card.style.type==="url"?`background-image:url('${this.card.style.cover}')`:`background-color: ${this.card.style.cover}`},coverType(){return this.card.style.type==="url"?"card-cover-image":"card-cover-color"},coverButtonClass(){var s;return this.card.style.cover?this.card.style.type==="color"?this.card.style.cover==="#172B4D"?"on-cover-icon-dark":"on-cover-icon":(s=this.coverColor)!=null&&s.isDark?"on-cover-icon-dark":"on-cover-icon":""},formattedDate(){const s=new Date(this.card.dueDate.date),e=s.toLocaleString("en-US",{month:"short"}),l=s.getDate(),a=this.card.dueDate.time;return`${e} ${l} at ${a}`},activities(){const s=this.$store.getters.currBoard.activities;return s.length?s.filter(e=>e.card.id===this.card.id):[]},checkUser(){var s;return this.card.memberIds.includes((s=this.$store.getters.loggedinUser)==null?void 0:s._id)}}},On={key:0,class:"card-edit"},Gn={class:"card-modal-details"},Ln={class:"modal-header"},En=t("span",{class:"modal-header-icon"},null,-1),Jn={class:"modal-header-title"},Pn={class:"inline-content"},Vn=f(" in list "),jn={style:{"text-decoration":"underline"}},Fn={class:"modal-main-content"},Hn={class:"card-details"},Kn={key:0,class:"card-details-item"},Qn=t("h3",null,"Members",-1),Rn=["title"],qn=["src"],Wn={key:1},zn=t("i",{class:"fa-solid fa-plus"},null,-1),Yn=[zn],Xn={key:1,class:"card-details-item"},Zn=t("h3",null,"Labels",-1),ei=["title"],ti=t("i",{class:"fa-solid fa-plus"},null,-1),si=[ti],oi={key:2,class:"card-details-item card-date"},ri=t("h3",null,"Due date",-1),li={key:0,class:"complete"},ni=t("i",{class:"fa-solid fa-angle-down"},null,-1),ii={class:"description-container"},ai=t("div",{class:"title"},[t("span",{class:"icon-description"}),t("h3",null,"Description")],-1),di={class:"description-input"},ci=t("p",null,"Add a more detailed description\u2026",-1),ui=[ci],pi={key:2},hi=t("i",{class:"fa-solid fa-xmark"},null,-1),mi=[hi],_i={key:0,class:"attachments-container"},gi=t("div",{class:"title"},[t("span",{class:"icon-attachment"}),t("h3",null,"Attachments")],-1),fi={class:"attachment-info"},yi=["onClick"],vi={class:"title"},bi=t("span",{style:{top:"7px"},class:"icon-checklist"},null,-1),Ci=["onClick"],ki={class:"checklist-progress"},wi={class:"progress-precent"},Bi={class:"progress-bar"},xi=["onClick"],$i={class:"todo-title"},Ii={class:"add-todo-container"},Mi=["onUpdate:modelValue","onKeydown","hidden"],Si=["onClick"],Ti=["onClick"],Di=["onClick"],Ai=t("i",{class:"fa-solid fa-xmark"},null,-1),Ui=[Ai],Ni={class:"activity-container"},Oi={class:"title"},Gi=t("span",{style:{top:"7px"},class:"icon-activity"},null,-1),Li=t("h3",null,"Activity",-1),Ei={class:"comments-frame"},Ji={class:"comments-input"},Pi={class:"avatar-container member"},Vi=["src"],ji={key:1},Fi={class:"card-comment"},Hi={class:"comment-by"},Ki={class:"comment-date"},Qi={class:"the-comment"},Ri={key:1},qi={class:"avatar-container member"},Wi=["src"],zi={key:1},Yi={class:"card-comment activities"},Xi={class:"comment-by"},Zi={class:"activity-txt"},ea={class:"comment-date"},ta={class:"modal-side-bar"},sa={key:0,class:"action-container"},oa=t("h3",null,"Suggested",-1),ra=t("span",{class:"icon ic-join"},null,-1),la=t("span",null,"Join",-1),na=[ra,la],ia={class:"action-container"},aa=t("h3",null,"Add to card",-1),da=t("span",{class:"icon ic-join"},null,-1),ca=t("span",null,"Members",-1),ua=[da,ca],pa=t("span",{class:"icon ic-label"},null,-1),ha=t("span",null,"Labels",-1),ma=[pa,ha],_a=t("span",{class:"icon ic-checklist"},null,-1),ga=t("span",null,"Checklist",-1),fa=[_a,ga],ya=t("span",{class:"icon ic-date"},null,-1),va=t("span",null,"Dates",-1),ba=[ya,va],Ca=t("span",{class:"icon ic-attachment"},null,-1),ka=t("span",null,"Attachment",-1),wa=[Ca,ka],Ba=t("span",{class:"icon ic-cover"},null,-1),xa=t("span",null,"Cover",-1),$a=[Ba,xa],Ia={class:"action-container"},Ma=t("h3",null,"Actions",-1),Sa=t("span",{class:"icon ic-move"},null,-1),Ta=t("span",null,"Move",-1),Da=[Sa,Ta],Aa=t("span",{class:"icon ic-copy"},null,-1),Ua=t("span",null,"Copy",-1),Na=[Aa,Ua],Oa=t("div",{class:"action-btn"},[t("span",{class:"icon ic-template"}),t("span",null,"Make template")],-1),Ga=t("div",{class:"action-btn"},[t("span",{class:"icon ic-watch"}),t("span",null,"Watch")],-1),La=t("hr",null,null,-1),Ea=t("span",{class:"icon ic-remove remove"},null,-1),Ja=t("span",null,"Delete",-1),Pa=[Ea,Ja],Va=t("span",{class:"icon ic-share"},null,-1),ja=t("span",null,"Share",-1),Fa=[Va,ja];function Ha(s,e,l,a,o,r){var c;const p=A("focus"),d=A("click-outside");return o.card?(n(),i("section",On,[t("div",{onMousedown:e[33]||(e[33]=(...u)=>r.closeEdit&&r.closeEdit(...u)),class:"window-overlay"},[t("div",{onMousedown:e[32]||(e[32]=b(()=>{},["stop"])),class:"card-modal"},[t("div",Gn,[o.card.style.cover?(n(),i("div",{key:0,style:w(r.cover),class:y(r.coverType)},null,6)):h("",!0),t("span",{onClick:e[0]||(e[0]=(...u)=>r.closeEdit&&r.closeEdit(...u)),class:y(["close-modal-button",r.coverButtonClass])},null,2),t("div",Ln,[En,t("div",Jn,[g(t("textarea",{placeholder:"Enter card title","onUpdate:modelValue":e[1]||(e[1]=u=>o.card.title=u),onInput:e[2]||(e[2]=(...u)=>r.updateCard&&r.updateCard(...u)),onKeydown:e[3]||(e[3]=G(b((...u)=>r.updateCard&&r.updateCard(...u),["prevent"]),["enter"])),dir:"auto","data-autosize":"true"},null,544),[[M,o.card.title]])]),t("div",Pn,[Vn,t("span",jn,m(r.groupTitle),1)])]),t("div",Fn,[t("div",Hn,[r.members.length?(n(),i("div",Kn,[Qn,(n(!0),i(k,null,C(r.members,u=>(n(),i("div",{class:"avatar-container",key:u.id,title:u.fullname},[u.imgUrl?(n(),i("img",{key:0,src:u.imgUrl,alt:""},null,8,qn)):(n(),i("span",Wn,m(u.fullname.split(" ")[0].split("")[0]+u.fullname.split(" ")[1].split("")[0]),1))],8,Rn))),128)),t("div",{class:"add-member",onClick:e[4]||(e[4]=u=>r.openModal("member-picker"))},Yn)])):h("",!0),r.labels.length?(n(),i("div",Xn,[Zn,t("div",null,[(n(!0),i(k,null,C(r.labels,u=>(n(),i("span",{class:y(["label-span",u.className]),key:u.id,title:u.title},[t("span",{onClick:e[5]||(e[5]=U=>r.openModal("label-picker"))},m(u.title),1)],10,ei))),128)),t("div",{class:"add-label",onClick:e[6]||(e[6]=u=>r.openModal("label-picker"))},si)])])):h("",!0),(c=o.card.dueDate)!=null&&c.date?(n(),i("div",oi,[ri,g(t("input",{onInput:e[7]||(e[7]=(...u)=>r.updateCard&&r.updateCard(...u)),"onUpdate:modelValue":e[8]||(e[8]=u=>o.card.dueDate.isCompleted=u),type:"checkbox",class:y({full:o.card.dueDate.isCompleted})},null,34),[[P,o.card.dueDate.isCompleted]]),t("span",{class:"date-info",onClick:e[9]||(e[9]=u=>r.openModal("date-picker"))},[f(m(r.formattedDate),1),o.card.dueDate.isCompleted?(n(),i("span",li,"complete")):h("",!0),ni])])):h("",!0)]),t("div",ii,[ai,t("div",di,[!o.isTextArea&&o.card.description.length?(n(),i("pre",{key:0,onClick:e[10]||(e[10]=u=>o.isTextArea=!0)},m(o.card.description),1)):h("",!0),!o.isTextArea&&!o.card.description?(n(),i("div",{key:1,class:"fake-text-area",onClick:e[11]||(e[11]=u=>o.isTextArea=!0)},ui)):h("",!0),o.isTextArea?g((n(),i("div",pi,[g(t("textarea",{"onUpdate:modelValue":e[12]||(e[12]=u=>o.description=u),placeholder:"Add a more detailed description\u2026"},null,512),[[p],[M,o.description]]),t("button",{onClick:e[13]||(e[13]=(...u)=>r.updateDescription&&r.updateDescription(...u)),class:"save-btn"},"Save"),t("span",{onClick:e[14]||(e[14]=u=>o.isTextArea=!1),class:"x-icon"},mi)])),[[d,()=>o.isTextArea=!1]]):h("",!0)])]),o.card.attachments.length?(n(),i("div",_i,[gi,t("ul",null,[(n(!0),i(k,null,C(o.card.attachments,u=>(n(),i("li",{key:u},[t("div",{class:"attachment",style:w({"background-image":"url("+u.url+")"})},null,4),t("div",fi,[t("h5",null,[f(m(u.name)+"."+m(u.format)+" ",1),t("span",{onClick:U=>r.openUrl(u.url)},null,8,yi)]),t("p",null,"Added "+m(u.createdAt),1)])]))),128))])])):h("",!0),(n(!0),i(k,null,C(o.card.checklists,(u,U)=>(n(),i("div",{key:u.id,class:"checklist-container"},[t("div",vi,[bi,t("h3",null,m(u.title),1),t("button",{onClick:T=>r.removeChecklist(U),class:"grey-btn"},"Delete",8,Ci)]),t("div",ki,[t("span",wi,m(r.calcProgress(u.todos)),1),t("div",Bi,[t("div",{style:w("width:"+r.calcProgress(u.todos)),class:y([r.calcProgress(u.todos)==="100%"?"progress-completed":"","current-progress"])},null,6)])]),t("div",null,[(n(!0),i(k,null,C(u.todos,T=>(n(),i("div",{key:T.id,class:"checklist-todos-container"},[t("div",{onClick:I=>r.toggleTodo(T.id,u.id),class:y(["todo-checkbox",T.isDone?"completed":""])},[t("span",{class:y(T.isDone?"checked":"")},null,2)],10,xi),t("div",{class:y(["todo-title-container",T.isDone?"todo-completed":""])},[t("div",$i,m(T.title),1)],2)]))),128))]),g((n(),i("div",Ii,[o.isAddTodo===u.id?g((n(),i("textarea",{key:0,"onUpdate:modelValue":T=>u.newTodo=T,onKeydown:G(b(T=>r.addTodo(u.id,u),["prevent"]),["enter"]),placeholder:"Add an item",hidden:!o.isAddTodo},null,40,Mi)),[[M,u.newTodo],[p]]):h("",!0),o.isAddTodo===u.id?(n(),i("button",{key:1,class:y(u.newTodo?"save-btn":"not-allowed-btn"),onClick:b(T=>r.addTodo(u.id,u),["stop"])},"Add",10,Si)):(n(),i("button",{key:2,class:"grey-btn",onClick:b(T=>o.isAddTodo=u.id,["stop"]),style:{margin:"unset"}},"Add an item",8,Ti)),o.isAddTodo===u.id&&u.newTodo?(n(),i("span",{key:3,onClick:T=>r.closeTodoInput(u),class:"x-icon"},Ui,8,Di)):h("",!0)])),[[d,()=>o.isAddTodo=null]])]))),128)),t("div",Ni,[t("div",Oi,[Gi,Li,o.isShowActivity?(n(),i("button",{key:0,onClick:e[15]||(e[15]=(...u)=>r.showActivity&&r.showActivity(...u)),class:"grey-btn"},"Hide details")):(n(),i("button",{key:1,onClick:e[16]||(e[16]=(...u)=>r.showActivity&&r.showActivity(...u)),class:"grey-btn"},"Show details"))]),t("div",Ei,[g((n(),i("div",Ji,[g(t("textarea",{onFocus:e[17]||(e[17]=u=>o.isCommentsInput=!0),class:y(r.commentsInputStyle),"onUpdate:modelValue":e[18]||(e[18]=u=>o.newComment.txt=u),onKeydown:e[19]||(e[19]=G(b((...u)=>r.postComment&&r.postComment(...u),["prevent"]),["enter"])),placeholder:"Write a comment..."},null,34),[[M,o.newComment.txt]]),o.isCommentsInput?(n(),i("button",{key:0,onClick:e[20]||(e[20]=b((...u)=>r.postComment&&r.postComment(...u),["stop"])),class:y(r.isCommentsText)},"Save",2)):h("",!0)])),[[d,()=>o.isCommentsInput=!1]])])]),t("div",null,[(n(!0),i(k,null,C(r.comments,u=>{var U,T,I;return n(),i("div",{class:"card-comment-container",key:u.id},[t("div",Pi,[(U=u.byMember)!=null&&U.imgUrl?(n(),i("img",{key:0,src:u.byMember.imgUrl,alt:""},null,8,Vi)):(n(),i("span",ji,m((T=u.byMember)!=null&&T._id?u.byMember.fullname.split(" ")[0].split("")[0]+u.byMember.fullname.split(" ")[1].split("")[0]:"G"),1))]),t("div",Fi,[t("span",Hi,m(((I=u.byMember)==null?void 0:I.fullname)||"Guest"),1),t("span",Ki,m(r.formattedTime(u.createdAt)),1),t("div",Qi,[t("p",null,m(u.txt),1)])])])}),128))]),r.activities.length&&o.isShowActivity?(n(),i("div",Ri,[(n(!0),i(k,null,C(r.activities,u=>{var U;return n(),i("div",{class:"card-comment-container",key:u.id},[t("div",qi,[u.byMember.imgUrl?(n(),i("img",{key:0,src:u.byMember.imgUrl,alt:""},null,8,Wi)):(n(),i("span",zi,m((U=u.byMember)!=null&&U._id?u.byMember.fullname.split(" ")[0].split("")[0]+u.byMember.fullname.split(" ")[1].split("")[0]:"G"),1))]),t("div",Yi,[t("div",null,[t("span",Xi,m(u.byMember.fullname),1),t("span",Zi,m(u.txt),1)]),t("span",ea,m(r.formattedTime(u.createdAt)),1)])])}),128))])):h("",!0)]),t("div",ta,[r.checkUser?h("",!0):(n(),i("div",sa,[oa,t("div",{onClick:e[21]||(e[21]=(...u)=>r.joinToCard&&r.joinToCard(...u)),class:"action-btn"},na)])),t("div",ia,[aa,t("div",{class:"action-btn",onClick:e[22]||(e[22]=u=>r.openModal("member-picker",u))},ua),t("div",{class:"action-btn",onClick:e[23]||(e[23]=u=>r.openModal("label-picker",u))},ma),o.cmpName?g((n(),B(Z(o.cmpName),{key:0,card:o.card,posLeft:o.posLeft,isCopyCard:o.isCopyCard,onRemoveCard:r.removeCard,onCloseModal:r.closeModal,onUpdateKey:r.updateKey,style:w(`top: ${o.posTop}px; left: ${o.posLeft}px`)},null,8,["card","posLeft","isCopyCard","onRemoveCard","onCloseModal","onUpdateKey","style"])),[[d,()=>r.closeModal()]]):h("",!0),t("div",{class:"action-btn",onClick:e[24]||(e[24]=u=>r.openModal("checklist-add",u))},fa),t("div",{class:"action-btn",onClick:e[25]||(e[25]=u=>r.openModal("date-picker",u))},ba),t("div",{class:"action-btn",onClick:e[26]||(e[26]=u=>r.openModal("attachments",u))},wa),t("div",{class:"action-btn",onClick:e[27]||(e[27]=u=>r.openModal("cover-picker",u))},$a)]),t("div",Ia,[Ma,t("div",{class:"action-btn",onClick:e[28]||(e[28]=u=>r.openModal("move-card",u))},Da),t("div",{class:"action-btn",onClick:e[29]||(e[29]=u=>r.openModal("copy-card",u))},Na),Oa,Ga,La,t("div",{class:"action-btn remove",onClick:e[30]||(e[30]=u=>r.openModal("confirm-delete",u))},Pa),t("div",{class:"action-btn",onClick:e[31]||(e[31]=u=>r.openModal("share-card",u))},Fa)])])])],32)],32)])):h("",!0)}var Ce=x(Nn,[["render",Ha]]);const Ka={name:"",data(){return{}},methods:{openModal(s){this.$emit("openModal",s)}},computed:{},components:{}},Qa={class:"quick-edit-actions-container"},Ra=t("span",{class:"icon card"},null,-1),qa=t("span",{class:"txt"},"Open card",-1),Wa=[Ra,qa],za=t("span",{class:"icon label"},null,-1),Ya=t("span",{class:"txt"},"Edit labels",-1),Xa=[za,Ya],Za=t("span",{class:"icon member"},null,-1),ed=t("span",{class:"txt"},"Change members",-1),td=[Za,ed],sd=t("span",{class:"icon cover"},null,-1),od=t("span",{class:"txt"},"Change cover",-1),rd=[sd,od],ld=t("span",{class:"icon move"},null,-1),nd=t("span",{class:"txt"},"Move",-1),id=[ld,nd],ad=t("span",{class:"icon copy"},null,-1),dd=t("span",{class:"txt"},"Copy",-1),cd=[ad,dd],ud=t("span",{class:"icon date"},null,-1),pd=t("span",{class:"txt"},"Edit dates",-1),hd=[ud,pd],md=t("span",{class:"icon remove"},null,-1),_d=t("span",{class:"txt"},"Delete",-1),gd=[md,_d];function fd(s,e,l,a,o,r){return n(),i("section",Qa,[t("div",{onClick:e[0]||(e[0]=p=>s.$emit("openCard")),class:"action-button"},Wa),t("div",{onClick:e[1]||(e[1]=p=>r.openModal("label-picker")),class:"action-button"},Xa),t("div",{onClick:e[2]||(e[2]=p=>r.openModal("member-picker")),class:"action-button"},td),t("div",{onClick:e[3]||(e[3]=p=>r.openModal("cover-picker")),class:"action-button"},rd),t("div",{onClick:e[4]||(e[4]=p=>r.openModal("move-card")),class:"action-button"},id),t("div",{onClick:e[5]||(e[5]=p=>r.openModal("copy-card")),class:"action-button"},cd),t("div",{onClick:e[6]||(e[6]=p=>r.openModal("date-picker")),class:"action-button"},hd),t("div",{onClick:e[7]||(e[7]=p=>r.openModal("confirm-delete")),class:"action-button"},gd)])}var yd=x(Ka,[["render",fd]]);const vd={name:"card-preview",props:{card:Object,isQuickEdit:Object,groupId:String},components:{cardEdit:Ce,quickEditActions:yd,labelPicker:_e,memberPicker:ge,coverPicker:ye,datePicker:fe,confirmDelete:ve,moveCard:be},data(){return{activeColor:"red",isChecklistDone:!1,newTitle:"",cmpName:null,isCopyCard:!1,posTop:null,posLeft:null}},methods:{openCard(){this.$emit("closeQuickEdit")},openCardEdit(){if(this.isQuickEdit.boolean)return;const s=this.$router.currentRoute._value.fullPath;this.$router.push(`${s}/edit/${this.card.id}`)},toggleLabelTitle(){this.$store.commit({type:"toggleLabelTitle"})},calcProgress(){const s=this.card.checklists.reduce((e,l)=>{const a=l.todos.reduce((o,r)=>(r.isDone&&o++,o),0);return e.todosCount+=l.todos.length,e.doneTodos+=a,e},{todosCount:0,doneTodos:0});return s.todosCount===s.doneTodos?this.isChecklistDone=!0:this.isChecklistDone=!1,`${s.doneTodos}/${s.todosCount}`},openQuickEdit(s){this.calcPosition(s.target.getBoundingClientRect()),this.newTitle=JSON.parse(JSON.stringify(this.card.title)),this.$emit("openQuickEdit",this.card.id)},async updateTitle(){if(!this.newTitle)return;const s=JSON.parse(JSON.stringify(this.card));s.title=this.newTitle,await this.addActivity("updated this card title"),this.$store.dispatch({type:"updateCard",groupId:this.groupId,card:s}),this.$emit("closeQuickEdit")},openModal(s){s==="copy-card"?(this.isCopyCard=!0,s="move-card"):this.isCopyCard=!1,this.cmpName=s},calcPosition(s){var{left:e,top:l}=s;const a=window.innerHeight;l+320>a&&(l=a-320),this.posTop=l},closeModal(){this.cmpName=null},async updateKey(s,e,l){const a=JSON.parse(JSON.stringify(this.card));s==="checklists"?(e.id=utilService.makeId(),a[s].push(e)):a[s]=e,l&&await this.addActivity(l),this.$store.dispatch({type:"updateCard",groupId:this.groupId,card:a})},async removeCard(){await this.addActivity(`removed card ${this.card.title}`),await this.$store.dispatch("removeCard",{groupId:this.groupId,cardId:this.cardId}),this.$emit("closeQuickEdit")},async completeDate(){const s=JSON.parse(JSON.stringify(this.card));s.dueDate.isCompleted=!s.dueDate.isCompleted,s.dueDate.isCompleted?await this.addActivity("marked the due date complete"):await this.addActivity("marked the due date incomplete"),this.$store.dispatch({type:"updateCard",groupId:this.groupId,card:s})},async addActivity(s){await this.$store.dispatch({type:"addActivity",txt:s,card:this.card})}},computed:{labels(){var s=this.$store.getters.currBoard.labels;return s=s.filter(({className:e})=>e!=="color10"),s.filter(e=>this.card.labelIds.includes(e.id))},labelTitleShown(){return this.$store.getters.labelTitleShown?"open":""},doneChecklist(){return this.isChecklistDone?"completed":""},computedQuickEdit(){return this.isQuickEdit.boolean&&this.isQuickEdit.cardId===this.card.id?"quick-card-editor-open":""},checkQuickEdit(){return this.isQuickEdit.boolean&&this.isQuickEdit.cardId===this.card.id},members(){var s=this.$store.getters.currBoard.members;return s.filter(e=>this.card.memberIds.includes(e._id))},formattedDate(){const s=new Date(this.card.dueDate.date),e=s.toLocaleString("en-US",{month:"short"}),l=s.getDate();return`${e} ${l}`},checkUser(){var s;return this.card.memberIds.includes((s=this.$store.getters.loggedinUser)==null?void 0:s._id)},computedStyle(){var s=this.card.style.fullCover&&this.card.style.type==="url"||this.computedQuickEdit?"overflow-y: unset":"";return s+=";",s+=this.checkQuickEdit?`top: ${this.posTop}px`:"",s}}},bd=t("div",{class:"card-preview-cover-color"},null,-1),Cd={key:1,class:"card-preview-inside-container"},kd={key:0,class:"card-preview-cover"},wd=["src"],Bd=["src"],xd=["title"],$d={key:0},Id={key:2},Md={key:4,class:"card-preview-title"},Sd={class:"card-icons-container"},Td={key:0,title:"watch",class:"icon-div"},Dd=t("span",{class:"eyecon"},null,-1),Ad=[Dd],Ud={key:0,class:"date-complete-icon"},Nd={key:1,class:"date-icon"},Od={class:"date"},Gd={key:2,title:"description",class:"icon-div"},Ld=t("span",{class:"desc"},null,-1),Ed=[Ld],Jd={key:3,title:"comments",class:"icon-div"},Pd=t("span",{class:"comment"},null,-1),Vd={class:"txt"},jd={key:4,title:"attachments",class:"icon-div"},Fd=t("span",{class:"attachment"},null,-1),Hd={class:"txt"},Kd=t("span",{class:"check"},null,-1),Qd={class:"txt"},Rd=["title"],qd=["src"],Wd={key:1};function zd(s,e,l,a,o,r){const p=v("quick-edit-actions"),d=A("focus"),c=A("click-outside");return n(),i("section",null,[t("div",{onClick:e[9]||(e[9]=(...u)=>r.openCardEdit&&r.openCardEdit(...u)),class:y(["card-preview",r.computedQuickEdit]),style:w(r.computedStyle)},[l.card.style.fullCover&&!r.checkQuickEdit?(n(),i("div",{key:0,style:w(l.card.style.type==="color"?`background: ${l.card.style.cover}`:`background-image: url('${l.card.style.cover}')`),class:y(["card-preview-full-cover",l.card.style.type==="color"?"":"imgUrl"])},[bd,t("div",{class:y(["full-cover-title",l.card.style.isDark?"dark":"light"])},[t("span",null,m(l.card.title),1)],2),t("span",{onClick:e[0]||(e[0]=b((...u)=>r.openQuickEdit&&r.openQuickEdit(...u),["stop"])),class:"edit-card"})],6)):(n(),i("div",Cd,[l.card.style.cover?(n(),i("div",kd,[l.card.style.type==="url"?(n(),i("img",{key:0,class:"card-image",src:l.card.style.cover},null,8,wd)):(n(),i("div",{key:1,class:"card-preview-cover-color",style:w(`background-color: ${l.card.style.cover};`)},null,4))])):h("",!0),l.card.attachments.length&&!l.card.style.cover?(n(),i("img",{key:1,class:"card-image",src:l.card.attachments[0].url},null,8,Bd)):h("",!0),t("div",{style:w(l.card.style.type==="url"&&!l.card.style.fullCover||l.card.attachments.length&&!l.card.style.cover&&!l.card.style.fullCover?"margin-top: unset":""),class:"card-label-container"},[(n(!0),i(k,null,C(r.labels,u=>(n(),i("span",{key:u.id,onClick:e[1]||(e[1]=b((...U)=>r.toggleLabelTitle&&r.toggleLabelTitle(...U),["stop"])),class:y([[u.className,r.labelTitleShown],"card-label"]),title:u.title},[r.labelTitleShown?(n(),i("span",$d,m(u.title),1)):h("",!0)],10,xd))),128))],4),r.checkQuickEdit&&r.labels.length?(n(),i("br",Id)):h("",!0),t("span",{onClick:e[2]||(e[2]=b(u=>r.openQuickEdit(u),["stop"])),class:"edit-card"}),r.checkQuickEdit?g((n(),i("textarea",{key:3,style:w(r.labels.length?"transform: translateY(-9px)":"transform: translateY(3px);"),"onUpdate:modelValue":e[3]||(e[3]=u=>o.newTitle=u),onFocus:e[4]||(e[4]=u=>u.target.select()),onKeydown:e[5]||(e[5]=G(b((...u)=>r.updateTitle&&r.updateTitle(...u),["prevent"]),["enter"]))},null,36)),[[M,o.newTitle],[d]]):(n(),i("span",Md,m(l.card.title),1)),t("div",Sd,[t("div",null,[r.checkUser?(n(),i("div",Td,Ad)):h("",!0),l.card.dueDate?(n(),i("div",{key:1,class:y([{complete:l.card.dueDate.isCompleted},"icon-div date-preview"]),title:"date",onClick:e[6]||(e[6]=b((...u)=>r.completeDate&&r.completeDate(...u),["stop"]))},[l.card.dueDate.isCompleted?(n(),i("span",Ud)):(n(),i("span",Nd)),t("span",Od,m(r.formattedDate),1)],2)):h("",!0),l.card.description?(n(),i("div",Gd,Ed)):h("",!0),l.card.comments.length?(n(),i("div",Jd,[Pd,t("span",Vd,m(l.card.comments.length),1)])):h("",!0),l.card.attachments.length?(n(),i("div",jd,[Fd,t("span",Hd,m(l.card.attachments.length),1)])):h("",!0),l.card.checklists.length?(n(),i("div",{key:5,title:"Checklist items",class:y(["icon-div",r.doneChecklist])},[Kd,t("span",Qd,m(r.calcProgress()),1)],2)):h("",!0),(n(!0),i(k,null,C(r.members,u=>(n(),i("div",{class:"avatar-container",key:u.id,title:u.fullname},[u.imgUrl?(n(),i("img",{key:0,src:u.imgUrl,alt:""},null,8,qd)):(n(),i("span",Wd,m(u.fullname.split(" ")[0].split("")[0]+u.fullname.split(" ")[1].split("")[0]),1))],8,Rd))),128))])]),r.checkQuickEdit?(n(),i("button",{key:5,class:"save-quick-edit",onClick:e[7]||(e[7]=b((...u)=>r.updateTitle&&r.updateTitle(...u),["stop"]))},"Save")):h("",!0),S(p,{onMousedown:e[8]||(e[8]=b(()=>{},["stop"])),onOpenCard:r.openCard,onOpenModal:r.openModal,hidden:!r.checkQuickEdit,class:y(r.checkQuickEdit?"fade-in":"")},null,8,["onOpenCard","onOpenModal","hidden","class"]),o.cmpName&&r.checkQuickEdit?g((n(),B(Z(o.cmpName),{key:6,isCopyCard:o.isCopyCard,card:l.card,onRemoveCard:r.removeCard,onCloseModal:r.closeModal,onUpdateKey:r.updateKey},null,8,["isCopyCard","card","onRemoveCard","onCloseModal","onUpdateKey"])),[[c,()=>r.closeModal()]]):h("",!0)]))],6)])}var Yd=x(vd,[["render",zd]]);const Xd={name:"group-actions",props:{isSort:Boolean},data(){return{groupTitle:"",openCopyGroup:!1,openMoveGroup:!1,openMoveCards:!1,openSortCards:!1,currentGroups:this.$store.getters.currBoard.groups,chosenBoard:this.$store.getters.currBoard,groupPos:null}},methods:{addCard(){this.$emit("addCard")},removeGroup(){this.$emit("removeGroup")},copyGroup(){this.$emit("copyGroup",this.groupTitle),this.groupTitle=""},moveGroup(){const s=this.boards.find(e=>e._id===this.chosenBoard._id);this.$emit("moveGroup",s,this.groupPos)},moveAllCards(s){this.$emit("moveAllCards",s)},removeCards(){this.$emit("removeCards")},closeGrpAct(){this.$emit("closeGrpAct")},sortBy(s){this.$emit("sortBy",s)}},computed:{boards(){return this.$store.getters.boards}},components:{}},Zd={class:"group-actions"},ec={class:"grp-act-header"},tc=t("p",null,"List actions",-1),sc=t("i",{class:"fa-solid fa-xmark"},null,-1),oc=[sc],rc={key:0},lc=t("a",null,"Add card...",-1),nc=[lc],ic=t("a",null,"Copy list...",-1),ac=[ic],dc=t("a",null,"Move list...",-1),cc=[dc],uc={key:0},pc=t("a",null,"Sort By...",-1),hc=[pc],mc=t("hr",null,null,-1),_c=t("a",null,"Move all cards in this list...",-1),gc=[_c],fc=t("a",null,"Remove all cards in this list...",-1),yc=[fc],vc=t("hr",null,null,-1),bc=t("a",null,"Remove this list",-1),Cc=[bc],kc={key:1,class:"copy-group"},wc={key:2,class:"move-group"},Bc={class:"board-info"},xc=t("p",null,"Board",-1),$c=["value"],Ic={class:"board-info"},Mc=t("p",null,"Position",-1),Sc=["value"],Tc=t("button",null,"Save",-1),Dc={key:3},Ac=["onClick"],Uc={key:4},Nc={class:"sort"};function Oc(s,e,l,a,o,r){const p=A("focus");return n(),i("section",Zd,[t("div",ec,[tc,t("span",{onClick:e[0]||(e[0]=(...d)=>r.closeGrpAct&&r.closeGrpAct(...d))},oc)]),!o.openCopyGroup&&!o.openMoveGroup&&!o.openMoveCards&&!o.openSortCards?(n(),i("div",rc,[t("ul",null,[t("li",{onClick:e[1]||(e[1]=(...d)=>r.addCard&&r.addCard(...d))},nc),t("li",{onClick:e[2]||(e[2]=b(d=>o.openCopyGroup=!0,["stop"]))},ac),t("li",{onClick:e[3]||(e[3]=b(d=>o.openMoveGroup=!0,["stop"]))},cc)]),t("ul",null,[l.isSort?(n(),i("hr",uc)):h("",!0),l.isSort?(n(),i("li",{key:1,onClick:e[4]||(e[4]=b(d=>o.openSortCards=!0,["stop"]))},hc)):h("",!0),mc]),t("ul",null,[t("li",{onClick:e[5]||(e[5]=b(d=>o.openMoveCards=!0,["stop"]))},gc),t("li",{onClick:e[6]||(e[6]=(...d)=>r.removeCards&&r.removeCards(...d))},yc)]),t("ul",null,[vc,t("li",{onClick:e[7]||(e[7]=(...d)=>r.removeGroup&&r.removeGroup(...d))},Cc)])])):h("",!0),o.openCopyGroup?(n(),i("div",kc,[g(t("input",{"onUpdate:modelValue":e[8]||(e[8]=d=>o.groupTitle=d),type:"text",placeholder:"Enter list title"},null,512),[[p],[M,o.groupTitle]]),t("button",{onClick:e[9]||(e[9]=(...d)=>r.copyGroup&&r.copyGroup(...d))},"Create list")])):h("",!0),o.openMoveGroup?(n(),i("div",wc,[t("form",{onSubmit:e[12]||(e[12]=b((...d)=>r.moveGroup&&r.moveGroup(...d),["prevent"]))},[t("label",null,[t("div",Bc,[xc,t("p",null,m(o.chosenBoard.title),1),g(t("select",{"onUpdate:modelValue":e[10]||(e[10]=d=>o.chosenBoard=d)},[(n(!0),i(k,null,C(r.boards,d=>(n(),i("option",{key:d._id,value:d},m(d.title),9,$c))),128))],512),[[Q,o.chosenBoard]])])]),t("label",null,[t("div",Ic,[Mc,t("p",null,m(o.groupPos+1),1),g(t("select",{"onUpdate:modelValue":e[11]||(e[11]=d=>o.groupPos=d)},[(n(!0),i(k,null,C(o.chosenBoard.groups,(d,c)=>(n(),i("option",{key:d,value:c},m(c+1),9,Sc))),128))],512),[[Q,o.groupPos]])])]),Tc],32)])):h("",!0),o.openMoveCards?(n(),i("div",Dc,[t("ul",null,[(n(!0),i(k,null,C(o.currentGroups,d=>(n(),i("li",{onClick:c=>r.moveAllCards(d),key:d.id},m(d.title),9,Ac))),128))])])):h("",!0),o.openSortCards?(n(),i("div",Uc,[t("ul",Nc,[t("li",{onClick:e[13]||(e[13]=d=>r.sortBy("createdNew"))},"Date created (newest first)"),t("li",{onClick:e[14]||(e[14]=d=>r.sortBy("createdOld"))},"Date created (oldest first)"),t("li",{onClick:e[15]||(e[15]=d=>r.sortBy("name"))},"Card name (alphabetically)"),t("li",{onClick:e[16]||(e[16]=d=>r.sortBy("dueDate"))},"Due date")])])):h("",!0)])}var Gc=x(Xd,[["render",Oc]]);const ke=(s,e)=>{const{removedIndex:l,addedIndex:a,payload:o}=e;if(l===null&&a===null)return s;const r=[...s];let p=o;return l!==null&&(p=r.splice(l,1)[0]),a!==null&&r.splice(a,0,p),r};const Lc={name:"group",props:{group:Object},components:{cardPreview:Yd,groupActions:Gc,Container:ue,Draggable:pe},created(){},data(){return{isAddCard:!1,groupTitle:JSON.parse(JSON.stringify(this.group.title)),cardTitle:"",editTitle:!1,openGrpAct:!1,isQuickEdit:{boolean:!1,cardId:""},posLeft:null}},methods:{toggleGroupActions(s){this.openGrpAct=!this.openGrpAct,this.calcPosition(s.target.getBoundingClientRect())},addCard(){!this.cardTitle||(this.$store.dispatch({type:"addCard",groupId:this.group.id,title:this.cardTitle}),this.cardTitle="")},actionAdd(){this.isAddCard=!0,this.openGrpAct=!1},removeGroup(){this.$store.dispatch({type:"removeGroup",groupId:this.group.id}),this.openGrpAct=!1},removeCard(s){this.$store.dispatch({type:"removeCard",groupId:this.group.id,cardId:s})},onCardDrop(s,e){const l=Object.assign({},JSON.parse(JSON.stringify(s)));l.cards=ke(l.cards,e),this.$emit("onCardDrop",{cards:l.cards,groupId:l.id})},copyGroup(s){this.openGrpAct=!1;const e=this.board.groups.findIndex(a=>a.id===this.group.id),l=JSON.parse(JSON.stringify(this.group));l.title=s,l.id=E.makeId,this.board.groups.splice(e+1,0,l),this.$store.dispatch({type:"saveBoard",board:this.board})},async moveGroup(s,e){this.openGrpAct=!1,s.groups.splice(e,0,JSON.parse(JSON.stringify(this.group))),await this.$store.dispatch({type:"saveBoard",board:s});const l=this.board.groups.findIndex(a=>a.id===this.group.id);this.board.groups.splice(l,1),this.$store.dispatch({type:"saveBoard",board:this.board})},moveAllCards(s){this.openGrpAct=!1;const e=JSON.parse(JSON.stringify(this.group)),l=JSON.parse(JSON.stringify(this.group.cards));s.cards.push(...l),e.cards=[];const a=this.board.groups.findIndex(r=>r.id===e.id);this.board.groups.splice(a,1,e);const o=this.board.groups.findIndex(r=>r.id===s.id);this.board.groups.splice(o,1,s),this.$store.dispatch({type:"saveBoard",board:this.board})},removeCards(){const s=JSON.parse(JSON.stringify(this.group));s.cards=[];const e=this.board.groups.findIndex(l=>l.id===this.group.id);this.board.groups[e]=s,this.$store.dispatch({type:"saveBoard",board:this.board})},closeQuickEdit(){this.isQuickEdit.boolean=!1,this.isQuickEdit.cardId=""},openQuickEdit(s){this.isQuickEdit.boolean=!0,this.isQuickEdit.cardId=s},getChildPayload(s){return this.group.cards[s]},changeGrpTitle(){const s=JSON.parse(JSON.stringify(this.group));s.title=this.groupTitle;const e=this.board.groups.findIndex(l=>l.id===this.group.id);this.board.groups.splice(e,1,s),this.$store.dispatch({type:"saveBoard",board:this.board}),this.editTitle=!1},sortCards(s){this.openGrpAct=!1;var e={type:"sort",groupId:this.group.id,sortBy:s};this.$store.dispatch({type:"filterBoard",boardId:this.board._id,filterBy:e})},calcPosition(s){}},computed:{board(){return this.$store.getters.currBoard},computedQuickEdit(){return this.isQuickEdit.boolean?"quick-card-editor":""}}},we=s=>(ee("data-v-3597c268"),s=s(),te(),s),Ec={class:"group-preview"},Jc={class:"group-header-container"},Pc={key:0,class:"add-card-container"},Vc={class:"add-card-actions"},jc=we(()=>t("i",{class:"fa-solid fa-xmark"},null,-1)),Fc=[jc],Hc=we(()=>t("div",{class:"add-card-btn"},[t("i",{class:"fa-solid fa-plus"}),t("span",null,"Add a card")],-1)),Kc=[Hc];function Qc(s,e,l,a,o,r){const p=v("group-actions"),d=v("card-preview"),c=v("Draggable"),u=v("Container"),U=A("click-outside"),T=A("focus");return n(),i("section",Ec,[t("div",null,[t("div",Jc,[o.editTitle?h("",!0):(n(),i("p",{key:0,class:"group-title",onClick:e[0]||(e[0]=I=>o.editTitle=!0)},m(l.group.title),1)),o.editTitle?g((n(),i("input",{key:1,onKeyup:e[1]||(e[1]=G((...I)=>r.changeGrpTitle&&r.changeGrpTitle(...I),["enter"])),onFocus:e[2]||(e[2]=I=>I.target.select()),"onUpdate:modelValue":e[3]||(e[3]=I=>o.groupTitle=I)},null,544)),[[U,r.changeGrpTitle],[T],[M,o.groupTitle]]):h("",!0),t("span",{class:"act-btn",onClick:e[4]||(e[4]=I=>r.toggleGroupActions(I))}),o.openGrpAct?g((n(),B(p,{key:2,isSort:l.group.cards.length>1,onCloseGrpAct:e[5]||(e[5]=I=>o.openGrpAct=!1),onRemoveCards:r.removeCards,onMoveAllCards:r.moveAllCards,onMoveGroup:r.moveGroup,onCopyGroup:r.copyGroup,onRemoveGroup:r.removeGroup,onAddCard:r.actionAdd,onSortBy:r.sortCards,style:w(`left: ${o.posLeft}px`)},null,8,["isSort","onRemoveCards","onMoveAllCards","onMoveGroup","onCopyGroup","onRemoveGroup","onAddCard","onSortBy","style"])),[[U,()=>o.openGrpAct=!1]]):h("",!0)]),S(u,{"drag-class":"on-dragging",class:"card-preview-container",onDrop:e[11]||(e[11]=I=>r.onCardDrop(l.group,I)),"group-name":"1","get-child-payload":r.getChildPayload},{default:_(()=>[(n(!0),i(k,null,C(l.group.cards,I=>(n(),B(c,{key:I.id},{default:_(()=>[I.isShown?(n(),B(d,{key:0,onOpenQuickEdit:r.openQuickEdit,onCloseQuickEdit:r.closeQuickEdit,groupId:l.group.id,isQuickEdit:o.isQuickEdit,card:I},null,8,["onOpenQuickEdit","onCloseQuickEdit","groupId","isQuickEdit","card"])):h("",!0)]),_:2},1024))),128)),o.isAddCard?(n(),i("div",Pc,[g(t("textarea",{onKeydown:e[6]||(e[6]=G(b(()=>{},["prevent"]),["enter"])),onKeyup:e[7]||(e[7]=G((...I)=>r.addCard&&r.addCard(...I),["enter"])),class:"add-card-textarea","onUpdate:modelValue":e[8]||(e[8]=I=>o.cardTitle=I),placeholder:"Enter a title for this card..."},null,544),[[U,()=>r.addCard()],[T],[M,o.cardTitle]]),t("div",Vc,[t("button",{onClick:e[9]||(e[9]=(...I)=>r.addCard&&r.addCard(...I))},"Add card"),t("span",{onClick:e[10]||(e[10]=I=>o.isAddCard=!1)},Fc)])])):h("",!0)]),_:1},8,["get-child-payload"]),o.isAddCard?h("",!0):(n(),i("div",{key:0,class:"open-card-container",onClick:e[12]||(e[12]=I=>o.isAddCard=!0)},Kc))]),o.isQuickEdit.boolean?(n(),i("div",{key:0,name:"quick-card-editor",onMousedown:e[13]||(e[13]=b(()=>{},["stop"])),onClick:e[14]||(e[14]=b(I=>o.isQuickEdit.boolean=!1,["stop"])),class:y(r.computedQuickEdit)},null,34)):h("",!0)])}var Rc=x(Lc,[["render",Qc],["__scopeId","data-v-3597c268"]]);const qc={name:"board-menu",data(){return{openChangeBg:!1,images:null,colors:this.$store.getters.boardColors,search:"",openChangeImg:!1,openChangeColor:!1}},created(){this.searchImages("nature")},methods:{async searchImages(s){const e=await K.getBgImages(s);this.images=e.photos.results.splice(0,10)},async onUploadImg(s){const e=await K.uploadImg(s);this.$emit("setBoardBg",e.url)},setBoardBg(s){this.$emit("setBoardBg",s)},setBoardClr(s){this.$emit("setBoardClr",s)},closeModal(){this.$emit("closeMenu")},goBack(){this.openChangeImg||this.openChangeColor?(this.openChangeImg=!1,this.openChangeColor=!1):this.openChangeBg=!1},formattedTime(s){return E.getFormattedTime(s)}},computed:{isFirstPage(){return!(this.openChangeBg||this.openChangeImg||this.openChangeColor)},activities(){return this.$store.getters.currBoard.activities||[]}},components:{imgService:K,customModal:N}},O=s=>(ee("data-v-5e59d962"),s=s(),te(),s),Wc=O(()=>t("p",{class:"header-title"},"Menu",-1)),zc={key:0},Yc={class:"menu-options"},Xc=O(()=>t("li",null,[t("i",{class:"fa-brands fa-trello"}),f(),t("a",null,"About this board")],-1)),Zc=O(()=>t("i",{class:"fa-solid fa-image"},null,-1)),eu=f(),tu=O(()=>t("a",null,"Change background",-1)),su=[Zc,eu,tu],ou=O(()=>t("hr",null,null,-1)),ru=O(()=>t("ul",{class:"menu-options"},[t("li",null,[t("i",{class:"fa-solid fa-list-ul"}),f(),t("a",{class:"activity"},"Activity")])],-1)),lu={key:0,class:"activities-container"},nu={class:"avatar-container member"},iu=["src"],au={key:1},du={class:"card-comment activities"},cu={class:"comment-by"},uu={class:"activity-txt"},pu={class:"comment-date"},hu={key:0,class:"bg-choose"},mu={class:"bg-choose-top"},_u=O(()=>t("img",{src:"https://res.cloudinary.com/trellox/image/upload/v1648369955/background_ffsmh3.jpg",alt:"background image picker"},null,-1)),gu=O(()=>t("p",null,"Photos",-1)),fu=[_u,gu],yu=O(()=>t("img",{src:"https://res.cloudinary.com/trellox/image/upload/v1648369959/colors_ucac3l.jpg",alt:"color picker"},null,-1)),vu=O(()=>t("p",null,"Colors",-1)),bu=[yu,vu],Cu=O(()=>t("hr",null,null,-1)),ku=O(()=>t("h2",null,"Custom",-1)),wu={class:"bg-picker"},Bu={class:"custom-bg"},xu=O(()=>t("i",{class:"fa-solid fa-plus"},null,-1)),$u={key:0,class:"bg-choose-img"},Iu={key:0,class:"bg-images"},Mu=["onClick"],Su=["src"],Tu={key:0,class:"bg-choose-color"},Du={key:0,class:"bg-colors"},Au=["onClick"];function Uu(s,e,l,a,o,r){const p=v("custom-modal");return n(),B(p,{isFirstPage:r.isFirstPage,onGoBack:r.goBack,class:"board-menu",onCloseModal:r.closeModal},{header:_(()=>[Wc]),default:_(()=>[!o.openChangeBg&&!o.openChangeImg&&!o.openChangeColor?(n(),i("menu",zc,[t("ul",Yc,[Xc,t("li",{onClick:e[0]||(e[0]=d=>o.openChangeBg=!0)},su)]),ou,ru,r.activities.length?(n(),i("div",lu,[(n(!0),i(k,null,C(r.activities.splice(0,20),d=>(n(),i("div",{class:"card-comment-container",key:d.id},[t("div",nu,[d.byMember.imgUrl?(n(),i("img",{key:0,src:d.byMember.imgUrl,alt:""},null,8,iu)):(n(),i("span",au,m(d.byMember._id?d.byMember.fullname.split(" ")[0].split("")[0]+d.byMember.fullname.split(" ")[1].split("")[0]:"G"),1))]),t("div",du,[t("div",null,[t("span",cu,m(d.byMember.fullname),1),t("span",uu,m(d.txt),1)]),t("span",pu,m(r.formattedTime(d.createdAt)),1)])]))),128))])):h("",!0)])):h("",!0),S(H,{name:"inside-menu"},{default:_(()=>[o.openChangeBg&&!o.openChangeImg&&!o.openChangeColor?(n(),i("div",hu,[t("div",mu,[t("div",{onClick:e[1]||(e[1]=d=>o.openChangeImg=!0),class:"bg-picker"},fu),t("div",{onClick:e[2]||(e[2]=d=>o.openChangeColor=!0),class:"bg-picker"},bu)]),Cu,ku,t("div",wu,[t("div",Bu,[t("label",null,[xu,t("input",{type:"file",onChange:e[3]||(e[3]=(...d)=>r.onUploadImg&&r.onUploadImg(...d))},null,32)])])])])):h("",!0)]),_:1}),S(H,{name:"inside-menu"},{default:_(()=>[o.openChangeImg?(n(),i("div",$u,[g(t("input",{class:"custom-input",placeholder:"Photos",type:"text","onUpdate:modelValue":e[4]||(e[4]=d=>o.search=d),onInput:e[5]||(e[5]=d=>r.searchImages(o.search))},null,544),[[M,o.search]]),o.images?(n(),i("ul",Iu,[(n(!0),i(k,null,C(o.images,d=>(n(),i("li",{key:d.id},[t("div",{onClick:c=>r.setBoardBg(d.urls.full)},[t("img",{src:d.urls.small},null,8,Su)],8,Mu)]))),128))])):h("",!0)])):h("",!0)]),_:1}),S(H,{name:"inside-menu"},{default:_(()=>[o.openChangeColor?(n(),i("div",Tu,[o.images?(n(),i("ul",Du,[(n(!0),i(k,null,C(o.colors,d=>(n(),i("li",{key:d},[t("div",{onClick:c=>r.setBoardClr(d),class:"bg-color",style:w({"background-color":d.body})},null,12,Au)]))),128))])):h("",!0)])):h("",!0)]),_:1})]),_:1},8,["isFirstPage","onGoBack","onCloseModal"])}var Nu=x(qc,[["render",Uu],["__scopeId","data-v-5e59d962"]]);const Ou={props:{},components:{customModal:N},data(){return{filterBy:null}},created(){this.filterBy=JSON.parse(JSON.stringify(this.$store.getters.currBoard.filterBy))},methods:{closeModal(){this.$emit("closeModal")},updateKey(){this.$emit("updateKey","filterBy",JSON.parse(JSON.stringify(this.filterBy)))}},computed:{members(){return this.$store.getters.currBoard.members},labels(){return this.$store.getters.currBoard.labels},loggedinUserFullname(){return"Shani Kupiec"}},unmounted(){},watch:{filterBy:{handler(){this.updateKey()},deep:!0}}},Gu=f(" Filter "),Lu=t("p",null,"Keyword",-1),Eu=t("p",{class:"mini"},"Search cards, members, labels, and more.",-1),Ju=t("p",null,"Members",-1),Pu={key:0},Vu=t("div",{class:"avatar-container custom"},[t("i",{class:"fa-solid fa-user"})],-1),ju=t("span",{class:"label-txt"},"No members",-1),Fu=["value"],Hu=t("div",{class:"avatar-container"},[t("span",null,"X")],-1),Ku={class:"label-txt"},Qu=t("p",null,"Due date",-1),Ru={key:0},qu=t("div",{class:"avatar-container custom"},[t("i",{class:"fa-solid fa-user"})],-1),Wu=t("span",{class:"label-txt"},"No dates",-1),zu=t("div",{class:"avatar-container"},[t("span",null,"X")],-1),Yu=t("span",{class:"label-txt"},"Over due",-1),Xu=t("div",{class:"avatar-container"},[t("span",null,"X")],-1),Zu=t("span",{class:"label-txt"},"Due in the next day",-1),ep={key:0},tp=t("p",null,"Labels",-1),sp={key:0},op=t("div",{class:"avatar-container custom"},[t("i",{class:"fa-solid fa-user"})],-1),rp=t("span",{class:"label-txt"},"No labels",-1),lp=["onUpdate:modelValue","value"],np={class:"label-txt"};function ip(s,e,l,a,o,r){const p=v("custom-modal");return n(),B(p,{onCloseModal:r.closeModal,class:"board-filter-body"},{header:_(()=>[Gu]),default:_(()=>[t("section",null,[Lu,Eu,t("div",null,[Ju,t("ul",null,[o.filterBy.txt?h("",!0):(n(),i("li",Pu,[t("label",null,[g(t("input",{"onUpdate:modelValue":e[0]||(e[0]=d=>o.filterBy.by.none=d),class:y({full:o.filterBy.by.none}),type:"checkbox"},null,2),[[P,o.filterBy.by.none]]),Vu,ju])])),(n(!0),i(k,null,C(r.members,d=>(n(),i("li",{key:d._id},[t("label",null,[g(t("input",{"onUpdate:modelValue":e[1]||(e[1]=c=>o.filterBy.by.options=c),class:y({full:o.filterBy.by.options.includes(d._id)}),value:d._id,type:"checkbox"},null,10,Fu),[[P,o.filterBy.by.options]]),Hu,t("span",Ku,m(d.fullname),1)])]))),128))])]),t("div",null,[Qu,t("ul",null,[o.filterBy.txt?h("",!0):(n(),i("li",Ru,[t("label",null,[g(t("input",{"onUpdate:modelValue":e[2]||(e[2]=d=>o.filterBy.due.none=d),class:y({full:o.filterBy.due.none}),type:"checkbox"},null,2),[[P,o.filterBy.due.none]]),qu,Wu])])),t("li",null,[t("label",null,[g(t("input",{"onUpdate:modelValue":e[3]||(e[3]=d=>o.filterBy.due.over=d),class:y({full:o.filterBy.due.over}),type:"checkbox"},null,2),[[P,o.filterBy.due.over]]),zu,Yu])]),t("li",null,[t("label",null,[g(t("input",{"onUpdate:modelValue":e[4]||(e[4]=d=>o.filterBy.due.tommarow=d),class:y({full:o.filterBy.due.tommarow}),type:"checkbox"},null,2),[[P,o.filterBy.due.tommarow]]),Xu,Zu])])])]),r.labels.length?(n(),i("div",ep,[tp,t("ul",null,[o.filterBy.txt?h("",!0):(n(),i("li",sp,[t("label",null,[g(t("input",{"onUpdate:modelValue":e[5]||(e[5]=d=>o.filterBy.label.none=d),class:y({full:o.filterBy.label.none}),type:"checkbox"},null,2),[[P,o.filterBy.label.none]]),op,rp])])),(n(!0),i(k,null,C(r.labels,d=>(n(),i("li",{key:d.id},[t("label",null,[g(t("input",{"onUpdate:modelValue":c=>o.filterBy.label.options=c,class:y({full:o.filterBy.label.options.includes(d.id)}),value:d.id,type:"checkbox"},null,10,lp),[[P,o.filterBy.label.options]]),t("span",np,m(d.title),1)])]))),128))])])):h("",!0),f(" "+m(o.filterBy.label.options)+" "+m(o.filterBy.by.options),1)])]),_:1},8,["onCloseModal"])}var ap=x(Ou,[["render",ip]]);const dp={components:{customModal:N},data(){return{filterBy:"",users:""}},methods:{closeModal(){this.$emit("closeModal")},filterUsers(){this.users=this.$store.getters.users;const s=new RegExp(this.filterBy,"i");this.users=this.users.filter(e=>s.test(e.fullname)||s.test(e.email))},inviteUser(s){const e=JSON.parse(JSON.stringify(this.$store.getters.currBoard));e.members.includes(s)||(e.members.push(s),this.$store.dispatch({type:"saveBoard",board:e}),console.log("user",s))}},computed:{members(){}},unmounted(){}},cp=f(" Invite to board "),up={class:"users-container"},pp=["onClick"],hp={class:"user-container"},mp={class:"user"},_p={class:"avatar"},gp={class:"img"},fp={key:1},yp={class:"user-info"},vp={class:"fullname"};function bp(s,e,l,a,o,r){const p=v("custom-modal"),d=A("focus");return n(),B(p,{onCloseModal:r.closeModal,class:"user-invite"},{header:_(()=>[cp]),default:_(()=>[g(t("input",{"onUpdate:modelValue":e[0]||(e[0]=c=>o.filterBy=c),onInput:e[1]||(e[1]=(...c)=>r.filterUsers&&r.filterUsers(...c)),class:"custom-input",type:"text",placeholder:"Email address or name..."},null,544),[[d],[M,o.filterBy]]),t("div",up,[(n(!0),i(k,null,C(o.users,c=>(n(),i("div",{class:"users",key:c._id,onClick:u=>r.inviteUser(c)},[t("div",hp,[t("div",mp,[t("div",_p,[t("div",gp,[c.imgUrl?(n(),i("span",{key:0,style:w(`background-image: url('${c.imgUrl}')`)},null,4)):(n(),i("span",fp,m(c.fullname.split(" ")[0].split("")[0]+c.fullname.split(" ")[1].split("")[0]),1))])]),t("div",yp,[t("div",vp,m(c.fullname),1)])])])],8,pp))),128))])]),_:1},8,["onCloseModal"])}var Cp=x(dp,[["render",bp]]);const kp={components:{groupPreview:Rc,Container:ue,Draggable:pe,appHeader:me,boardMenu:Nu,boardFilter:ap,userInvite:Cp},data(){return{isAddGroup:!1,groupTitle:"",board:null,openMenu:!1,savingGroup:!1,lastBoard:null,groupsCount:0,openFilter:!1,openInvite:!1,editTitle:!1,headerClr:null,filteringCount:-1}},async created(){const{boardId:s}=this.$route.params;this.board=await this.$store.dispatch({type:"setCurrBoard",boardId:s}),this.updateKey("recentlyViewed",Date.now());const e=JSON.parse(JSON.stringify(this.board)),l=new z;this.headerClr=await l.getColorAsync(e.style.bgImgUrl),this.board=filter(e)},methods:{async updateKey(s,e){var l=JSON.parse(JSON.stringify(this.board));e==="toggle"?l[s]=!l[s]:l[s]=e,s==="filterBy"&&(l=this.filter(l)),await this.$store.dispatch({type:"saveBoard",board:l}),this.board=l},calcIfTommarow(s){const e=new Date(s),l=new Date(Date.now());var a=e.getHours()*60*60*1e3;s-=a;var o=s-Date.now();const r=o-24*60*60*1e3<0,p=s>Date.now(),d=e.getDay()!==l.getDay();return r&&p&&d},async addGroup(){!this.groupTitle||(await this.$store.dispatch({type:"addGroup",title:this.groupTitle}),this.groupTitle="")},async onGroupDrop(s){try{const e=Object.assign({},this.board);e.groups=ke(e.groups,s),this.lastBoard=JSON.parse(JSON.stringify(this.board)),this.board=e,await this.$store.dispatch({type:"saveBoard",board:e})}catch(e){console.log("err",e),this.board=this.lastBoard}},async onCardDrop({cards:s,groupId:e}){try{const l=JSON.parse(JSON.stringify(this.board)),a=this.board.groups.findIndex(o=>o.id===e);l.groups[a].cards=s,this.groupsCount===0&&(this.lastBoard=JSON.parse(JSON.stringify(this.board))),this.board=l,this.groupsCount++,this.groupsCount===this.board.groups.length&&(await this.$store.dispatch({type:"saveBoard",board:l}),this.groupsCount=0)}catch(l){console.log("err",l),this.board=this.lastBoard}},async setBoardBg(s){const e=JSON.parse(JSON.stringify(this.board));e.style.bgColor="",e.style.bgHeader="",e.style.bgImgUrl=s;const l=new z;this.headerClr=await l.getColorAsync(e.style.bgImgUrl),this.$store.dispatch({type:"saveBoard",board:e})},setBoardClr(s){const e=JSON.parse(JSON.stringify(this.board));e.style.bgImgUrl="",e.style.bgColor=s.body,e.style.bgHeader=s.header,this.headerClr=null,this.$store.dispatch({type:"saveBoard",board:e})},editBoardTitle(){if(this.editTitle=!1,!this.board.title)return;const s=JSON.parse(JSON.stringify(this.board));this.$store.dispatch({type:"saveBoard",board:s})},filter(s){const e=s.filterBy,l=e.by.none===!1&&e.by.options.length===0&&e.due.none===!1&&e.due.over===!1&&e.due.tommarow===!1&&e.label.none===!1&&e.label.options.length===0;return l?(this.filteringCount=-1,s.groups=s.groups.map(a=>(a.cards=a.cards.map(o=>(o.isShown=l,o)),a)),s):(this.filteringCount=0,s.groups=s.groups.map(a=>(a.cards=a.cards.map(o=>{var r=[];if(e.by.none)r.push(o.memberIds.length===0);else if(e.by.options.length){var p=o.memberIds.filter(c=>e.by.options.includes(c));r.push(p.length>0)}if(e.due.none?r.push(o.dueDate):e.due.over?r.push(o.dueDate>Date.now()):e.due.tommarow&&r.push(this.calcIfTommarow(o.dueDate)),e.label.none)r.push(o.labelIds.length===0);else if(e.label.options.length){var d=o.labelIds.filter(c=>e.label.options.includes(c));r.push(d.length>0)}return r.includes(!1)?o.isShown=!1:(this.filteringCount++,o.isShown=!0),o}),a)),s)}},computed:{boardFromStore(){return this.$store.getters.currBoard},members(){return this.$store.getters.currBoard.members}},watch:{boardFromStore:{handler(){this.board=this.boardFromStore},deep:!0}}},j=s=>(ee("data-v-2620bc37"),s=s(),te(),s),wp={class:"board-view"},Bp={class:"left-nav"},xp=j(()=>t("span",{class:"seperator"},"|",-1)),$p={class:"members-container"},Ip=["title"],Mp=["src"],Sp={key:1},Tp={class:"right-nav"},Dp=j(()=>t("i",{class:"fa-solid fa-filter"},null,-1)),Ap=j(()=>t("span",null,"Filter",-1)),Up={key:0,class:"filterCount"},Np=j(()=>t("i",{class:"fa-solid fa-ellipsis"},null,-1)),Op=f(" Show menu"),Gp=[Np,Op],Lp=j(()=>t("i",{class:"fa-solid fa-plus"},null,-1)),Ep=j(()=>t("span",null,"Add another list",-1)),Jp=[Lp,Ep],Pp={key:1,class:"add-group-container"},Vp={class:"add-group-actions"},jp=j(()=>t("i",{class:"fa-solid fa-xmark"},null,-1)),Fp=[jp];function Hp(s,e,l,a,o,r){var re,le;const p=v("app-header"),d=v("user-invite"),c=v("boardFilter"),u=v("board-menu"),U=v("group-preview"),T=v("Draggable"),I=v("Container"),xe=v("router-view"),oe=A("focus"),Y=A("click-outside");return o.board?(n(),i("section",{key:0,class:"board-wrapper",style:w({"background-image":"url("+o.board.style.bgImgUrl+")","background-color":o.board.style.bgColor})},[S(p,{class:y([((re=o.headerClr)==null?void 0:re.isDark)||!o.headerClr?"white-color":"dark-color","board-header"]),style:w({"background-color":o.headerClr?o.headerClr.hex:o.board.style.bgHeader})},null,8,["class","style"]),t("div",wp,[t("nav",{class:y([((le=o.headerClr)==null?void 0:le.isDark)||!o.headerClr?"white-color":"dark-color","board-nav"])},[t("div",Bp,[o.editTitle?g((n(),i("input",{key:1,style:w("width:"+o.board.title.length*12+"px"),class:"custom-input, title-input",type:"text","onUpdate:modelValue":e[1]||(e[1]=$=>o.board.title=$),onKeyup:e[2]||(e[2]=G((...$)=>r.editBoardTitle&&r.editBoardTitle(...$),["enter"]))},null,36)),[[oe],[M,o.board.title],[Y,()=>r.editBoardTitle()]]):(n(),i("h2",{key:0,onClick:e[0]||(e[0]=$=>o.editTitle=!0)},m(o.board.title),1)),t("button",{class:y(["star",{full:o.board.isStarred}]),onClick:e[3]||(e[3]=$=>r.updateKey("isStarred","toggle"))},null,2),xp,t("div",$p,[(n(!0),i(k,null,C(r.members,$=>(n(),i("div",{class:"avatar-container",key:$.id,title:$.fullname},[$.imgUrl?(n(),i("img",{key:0,src:$.imgUrl,alt:""},null,8,Mp)):(n(),i("span",Sp,m($.fullname.split(" ")[0].split("")[0]+$.fullname.split(" ")[1].split("")[0]),1))],8,Ip))),128))]),t("button",{class:"invite",onClick:e[4]||(e[4]=$=>o.openInvite=!0)},"Invite"),o.openInvite?g((n(),B(d,{key:2,onCloseModal:e[5]||(e[5]=$=>o.openInvite=!1)},null,512)),[[Y,()=>o.openInvite=!1]]):h("",!0)]),t("div",Tp,[t("button",{onClick:e[6]||(e[6]=$=>o.openFilter=!o.openFilter),class:y(["filter",{active:o.openFilter||this.filteringCount>-1}])},[Dp,Ap,this.filteringCount>-1?(n(),i("span",Up,m(this.filteringCount),1)):h("",!0)],2),t("button",{onClick:e[7]||(e[7]=$=>o.openMenu=!o.openMenu)},Gp)]),o.openFilter?g((n(),B(c,{key:0,onUpdateKey:r.updateKey,onCloseModal:e[8]||(e[8]=$=>o.openFilter=!1)},null,8,["onUpdateKey"])),[[Y,()=>o.openFilter=!1]]):h("",!0)],2),S(H,{name:"menu"},{default:_(()=>[o.openMenu?(n(),B(u,{key:0,onCloseMenu:e[9]||(e[9]=$=>o.openMenu=!1),onSetBoardClr:r.setBoardClr,onSetBoardBg:r.setBoardBg},null,8,["onSetBoardClr","onSetBoardBg"])):h("",!0)]),_:1}),S(I,{"drag-class":"on-dragging",orientation:"horizontal",class:"group-container",onDrop:e[15]||(e[15]=$=>r.onGroupDrop($))},{default:_(()=>[(n(!0),i(k,null,C(o.board.groups,$=>(n(),B(T,{key:$.id},{default:_(()=>[S(U,{group:$,onOnCardDrop:r.onCardDrop},null,8,["group","onOnCardDrop"])]),_:2},1024))),128)),o.isAddGroup?(n(),i("div",Pp,[g(t("input",{onKeyup:e[11]||(e[11]=G((...$)=>r.addGroup&&r.addGroup(...$),["enter"])),"onUpdate:modelValue":e[12]||(e[12]=$=>o.groupTitle=$),type:"text",placeholder:"Enter list title..."},null,544),[[M,o.groupTitle],[oe]]),t("div",Vp,[t("button",{onClick:e[13]||(e[13]=(...$)=>r.addGroup&&r.addGroup(...$))},"Add list"),t("span",{onClick:e[14]||(e[14]=$=>o.isAddGroup=!1)},Fp)])])):(n(),i("div",{key:0,class:"open-group-container",onClick:e[10]||(e[10]=$=>o.isAddGroup=!0)},Jp))]),_:1}),S(xe)])],4)):h("",!0)}var Kp=x(kp,[["render",Hp],["__scopeId","data-v-2620bc37"]]);const Be=Ae({history:Ue("/"),routes:[{path:"/",name:"home",component:ut},{path:"/login",name:"login",component:xt},{path:"/signup",name:"signup",component:Vt},{path:"/workspace",name:"workspace",component:Br},{path:"/board/:boardId",name:"board",component:Kp,children:[{path:"edit/:cardId",component:Ce}]}]});var Qp={state:{boards:[],currBoard:null,labelTitleShown:!1,labelColors:["color0","color1","color2","color3","color4","color5","color6","color7","color8","color9","color10"],imagePicker:["https://images.unsplash.com/photo-1483728642387-6c3bdd6c93e5?crop=entropy&cs=srgb&fm=jpg&ixid=MnwzMTI4NzN8MHwxfHNlYXJjaHw0fHxtb3VudGFpbnxlbnwwfHx8fDE2NDgyMjMxMjg&ixlib=rb-1.2.1&q=85","https://images.unsplash.com/photo-1480497490787-505ec076689f?ixlib=rb-1.2.1&q=85&fm=jpg&crop=entropy&cs=srgb","https://images.unsplash.com/photo-1454496522488-7a8e488e8606?crop=entropy&cs=srgb&fm=jpg&ixid=MnwzMTI4NzN8MHwxfHNlYXJjaHwzfHxtb3VudGFpbnxlbnwwfHx8fDE2NDgyMjMxMjg&ixlib=rb-1.2.1&q=85","https://images.unsplash.com/photo-1433477155337-9aea4e790195?ixlib=rb-1.2.1&q=85&fm=jpg&crop=entropy&cs=srgb"],boardColors:[{body:"#0079bf",header:"#0066a0"},{body:"#d29034",header:"#b0792c"},{body:"#519839",header:"#448030"},{body:"#b04632",header:"#943b2a"},{body:"#89609e",header:"#735185"},{body:"#cd5a91",header:"#ac4c7a"},{body:"#4bbf6b",header:"#3fa05a"},{body:"#00aecc",header:"#0092ab"}],coverColors:["#7BC86C","#F5DD29","#FFAF3F","#EF7564","#CD8DE5","#5BA4CF","#29CCE5","#6DECA9","#FF8ED4","#172B4D"],coverImages:["https://images.unsplash.com/photo-1499750310107-5fef28a66643?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=2070&q=80","https://images.unsplash.com/photo-1500673922987-e212871fec22?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1170&q=80","https://images.unsplash.com/photo-1486870591958-9b9d0d1dda99?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1170&q=80","https://images.unsplash.com/photo-1518655048521-f130df041f66?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1170&q=80","https://images.unsplash.com/photo-1463584954611-9d8ebd80dfd2?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1170&q=80","https://images.unsplash.com/photo-1483835724473-d69ca66efb25?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1170&q=80"]},getters:{boards(s){return JSON.parse(JSON.stringify(s.boards))},currBoard(s){return JSON.parse(JSON.stringify(s.currBoard))},labelTitleShown(s){return s.labelTitleShown},imagePicker(s){return s.imagePicker},boardColors(s){return s.boardColors},labelColors(s){return JSON.parse(JSON.stringify(s.labelColors))},coverColors(s){return JSON.parse(JSON.stringify(s.coverColors))},coverImages(s){return JSON.parse(JSON.stringify(s.coverImages))}},mutations:{setBoards(s,{boards:e}){s.boards=e},setCurrBoard(s,{board:e}){s.currBoard=e},toggleLabelTitle(s){s.labelTitleShown=!s.labelTitleShown},removeBoard(s,{id:e}){const l=s.boards.findIndex(a=>a._id===e);s.boards.splice(l,1)},saveBoard(s,{board:e}){const l=s.boards.findIndex(a=>a._id===e._id);l!==-1?(s.currBoard&&e._id===s.currBoard._id&&(s.currBoard=e),s.boards.splice(l,1,e)):(s.boards.push(e),s.currBoard=e)},addGroup(s,{emptyGroup:e}){s.currBoard.groups.push(e)},addActivity(s,{activity:e}){s.currBoard.activities.unshift(e)}},actions:{async loadBoards({commit:s,state:e}){try{var l=await D.query({});s({type:"setBoards",boards:l}),X.off(de),X.on(de,a=>{s({type:"saveBoard",board:a})})}catch(a){throw console.error("Cannot Load boards",a),a}},async setCurrBoard({commit:s},{boardId:e}){try{const l=await D.getBoardById(e);return s({type:"setCurrBoard",board:l}),l}catch(l){throw console.log("Cannot find board",l),l}},async removeBoard({commit:s},{id:e}){try{var e=await D.removeBoard(e);s({type:"removeBoard",id:e})}catch(l){throw console.error("Cannot remove board",l),l}},async saveBoard({commit:s},{board:e}){try{var e=await D.updateBoard(e);return s({type:"saveBoard",board:e}),e}catch(l){throw console.error("Cannot Edit/Add board",l),l}},async filterBoard({commit:s},{boardId:e,filterBy:l}){try{const a=await D.getBoardById(e,l);s({type:"saveBoard",board:a})}catch(a){throw console.log("Cannot find card",a),a}},async addGroup({commit:s,state:e},{title:l}){try{const a=await L.addGroup(e.currBoard._id,l);console.log("store addGroup board",a),s({type:"saveBoard",board:a})}catch(a){throw console.log("Cannot add group",a),a}},async addCard({commit:s,state:e},{groupId:l,title:a}){try{const o=await L.addCard(e.currBoard._id,l,a);s({type:"saveBoard",board:o})}catch(o){throw console.log("Cannot add card",o),o}},async removeGroup({commit:s,state:e},{groupId:l}){try{const a=await L.removeGroup(e.currBoard._id,l);s({type:"saveBoard",board:a})}catch(a){throw console.log("Cannot remove group",a),a}},async removeCard({commit:s,state:e},{groupId:l,cardId:a}){try{const o=await L.removeCard(e.currBoard._id,l,a);s({type:"saveBoard",board:o})}catch(o){throw console.log("Cannot remove group",o),o}},async updateCard({commit:s,state:e},{groupId:l,card:a}){try{const o=await L.updateCard(e.currBoard._id,l,a);s({type:"saveBoard",board:o})}catch(o){throw console.log("Cannot update card",o),o}},async getCardById({commit:s},{boardId:e,cardId:l}){try{return await L.getCardById(e,l)}catch(a){throw console.log("Cannot find card",a),a}},async addActivity({commit:s,getters:e,dispatch:l},{txt:a,card:o}){var p,d,c;const r={id:E.makeId(),txt:a,createdAt:Date.now(),byMember:{_id:((p=e.loggedinUser)==null?void 0:p._id)||"",fullname:((d=e.loggedinUser)==null?void 0:d.fullname)||"Guest",imgUrl:((c=e.loggedinUser)==null?void 0:c.imgUrl)||""},card:{id:o.id,title:o.title}};s({type:"addActivity",activity:r}),await l({type:"saveBoard",board:e.currBoard})}}},Rp={state:{loggedinUser:V.getLoggedinUser(),users:[]},getters:{users({users:s}){return s},loggedinUser({loggedinUser:s}){return s}},mutations:{setLoggedinUser(s,{user:e}){s.loggedinUser=e?ae({},e):null},setUsers(s,{users:e}){s.users=e}},actions:{async loadUsers({commit:s}){try{const e=await V.getUsers();s({type:"setUsers",users:e})}catch(e){throw console.log("Error load users",e),e}},async login({commit:s},{userCred:e}){try{const l=await V.login(e);return s({type:"setLoggedinUser",user:l}),l}catch(l){throw console.log("cannot set user",l),l}},async logout({commit:s}){try{await V.logout(),s({type:"setLoggedinUser",user:null})}catch(e){console.log("logout failed",e)}},async signup({commit:s},{userCred:e}){try{const l=await V.signup(e);s({type:"setLoggedinUser",user:l})}catch(l){throw console.log("signup failed",l),l}}}};const qp=Ne({strict:!0,state:{isLoading:!1},getters:{isLoading(s){return s.isLoading}},mutations:{setIsLoading(s,{isLoading:e}){s.isLoading=e}},actions:{},modules:{boardModules:Qp,userModules:Rp}});const Wp={mounted:s=>{s.focus()}},zp={beforeMount(s,e,l){s.clickOutsideEvent=a=>{s===a.target||s.contains(a.target)||e.value(a,s)},window.requestAnimationFrame(()=>{document.addEventListener("click",s.clickOutsideEvent)})},unmounted(s){document.removeEventListener("click",s.clickOutsideEvent)}};let Yp="438420074378-5cu9up50dsabv90v8ak9p72vrmfgdaod.apps.googleusercontent.com";const F=Oe(Fe);F.directive("focus",Wp);F.directive("click-outside",zp);F.use(Ge,{clientId:Yp,scope:"email",prompt:"consent"});F.use(Le,{});F.use(Be);F.use(qp);F.mount("#app");
