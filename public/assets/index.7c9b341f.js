var fe=Object.defineProperty;var Y=Object.getOwnPropertySymbols;var be=Object.prototype.hasOwnProperty,ye=Object.prototype.propertyIsEnumerable;var X=(s,e,n)=>e in s?fe(s,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):s[e]=n,Z=(s,e)=>{for(var n in e||(e={}))be.call(e,n)&&X(s,n,e[n]);if(Y)for(var n of Y(e))ye.call(e,n)&&X(s,n,e[n]);return s};import{l as Ce,c as M,r as v,o as i,a as d,b as t,d as y,w as h,e as g,F as C,T as P,f as J,g as x,h as b,v as S,i as N,j as p,t as m,k as oe,n as A,m as f,p as q,q as re,s as w,u as W,x as ke,y as ee,C as ne,D as le,z as ie,A as ae,B as we,E as Be,G as $e,H as xe}from"./vendor.1af1ab9f.js";const Ie=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))a(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&a(u)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerpolicy&&(o.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?o.credentials="include":r.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}};Ie();const te="board-changed",Me="",K=Se();K.setup();function Se(){var s=null;return{async setup(){s=Ce(Me)},on(n,a){s.on(n,a)},off(n,a=null){!s||(a?s.off(n,a):s.removeAllListeners(n))},emit(n,a){s.emit(n,a)},terminate(){s=null}}}var k=(s,e)=>{const n=s.__vccOpts||s;for(const[a,r]of e)n[a]=r;return n};const Te={methods:{test(){console.log("hi")}},created(){this.$store.dispatch("loadBoards"),K.on("test",this.test)},components:{}};function Ae(s,e,n,a,r,o){const u=v("router-view");return i(),M(u)}var Ne=k(Te,[["render",Ae]]);const Oe={name:"app header",data(){return{}},methods:{},computed:{},components:{}},Ge={class:"home-header"},Ee=t("div",{class:"logo"},[t("span",null,[t("i",{class:"fa-brands fa-trello"})]),g(),t("h2",null,"Trellox")],-1),De=g("login"),Ue=g("Home");function Je(s,e,n,a,r,o){const u=v("router-link");return i(),d("header",Ge,[Ee,t("nav",null,[y(u,{to:"/login"},{default:h(()=>[De]),_:1}),y(u,{to:"/"},{default:h(()=>[Ue]),_:1})])])}var Le=k(Oe,[["render",Je]]);const Pe={name:"home",data(){return{}},methods:{toWorkSpace(){this.$router.push("/workspace")}},computed:{},components:{homeHeader:Le}},je={class:"home-view main-layout"},Qe=t("h1",null,"Trellox helps teams move work forward.",-1),Ve=t("p",null,"Collaborate, manage projects, and reach new productivity peaks. From high rises to the home office, the way your team works is unique\u2014accomplish it all with Trello.",-1),He=g("Start now "),Re=t("span",null,[t("i",{class:"fa-solid fa-arrow-right"})],-1),Fe=[He,Re],Ke=t("img",{src:"https://res.cloudinary.com/trellox/image/upload/v1648060642/cooperation_rdrrnf.png"},null,-1);function qe(s,e,n,a,r,o){const u=v("home-header");return i(),d(C,null,[y(u),t("main",je,[t("article",null,[Qe,Ve,t("button",{onClick:e[0]||(e[0]=(...c)=>o.toWorkSpace&&o.toWorkSpace(...c))},Fe)]),Ke])],64)}var We=k(Pe,[["render",qe]]);const ze={name:"login-view",data(){return{failed:!1,loginCred:{email:"",password:""}}},methods:{async login(){(!this.loginCred.email||!this.loginCred.password)&&this.failedLog();try{await this.$store.dispatch({type:"login",userCred:this.loginCred}),this.$router.push("/workspace")}catch{this.failedLog()}},failedLog(){this.failed=!0,setTimeout(()=>{this.failed=!1},6e3)}},computed:{},components:{}},Ye={class:"login-view"},Xe=t("div",{class:"logo"},[t("span",null,[t("i",{class:"fa-brands fa-trello"})]),t("h2",null,"Trellox")],-1),Ze={class:"login-container"},et={key:0,class:"failed"},tt=t("p",null,"Logged in failed. Please enter valid email or password.",-1),st=[tt],ot=t("h3",null,"Log in to Trellox",-1),rt=t("hr",null,null,-1),nt=g("Sign up for an account");function lt(s,e,n,a,r,o){const u=v("router-link"),c=N("focus");return i(),d("section",Ye,[Xe,t("div",Ze,[y(P,{name:"failed"},{default:h(()=>[r.failed?(i(),d("div",et,st)):p("",!0)]),_:1}),ot,t("form",{onKeyup:e[2]||(e[2]=J((...l)=>o.login&&o.login(...l),["enter"])),onSubmit:e[3]||(e[3]=x((...l)=>o.login&&o.login(...l),["prevent"])),class:"user-crad"},[b(t("input",{type:"email","onUpdate:modelValue":e[0]||(e[0]=l=>r.loginCred.email=l),placeholder:"Enter email"},null,512),[[c],[S,r.loginCred.email]]),b(t("input",{type:"password","onUpdate:modelValue":e[1]||(e[1]=l=>r.loginCred.password=l),placeholder:"Enter password"},null,512),[[S,r.loginCred.password]])],32),t("button",{onClick:e[4]||(e[4]=(...l)=>o.login&&o.login(...l)),class:"login-btn"},"Log in"),rt,y(u,{to:"/signup"},{default:h(()=>[nt]),_:1})])])}var it=k(ze,[["render",lt]]);const at={name:"",data(){return{failed:!1,signupCred:{email:"",username:"",password:"",fullname:""}}},methods:{async signup(){if((!this.signupCred.email||!this.signupCred.password||!this.signupCred.fullname)&&this.failedLog(),!(this.signupCred.fullname.split(" ").length<=1))try{this.signupCred.username=this.signupCred.fullname.split(" ").join("").toLowerCase(),await this.$store.dispatch({type:"signup",userCred:this.signupCred}),this.$router.push("/workspace")}catch{console.log("error")}},failedLog(){this.failed=!0,setTimeout(()=>{this.failed=!1},6e3)}},computed:{},components:{}},dt={class:"signup-view"},ct=t("div",{class:"logo"},[t("span",null,[t("i",{class:"fa-brands fa-trello"})]),t("h2",null,"Trellox")],-1),ut={class:"login-container"},pt={key:0,class:"failed"},ht=t("p",null,"Sign up failed. Please enter valid email or password.",-1),mt=[ht],_t=t("h3",null,"Sign up to Trellox",-1),gt=t("hr",null,null,-1),vt=g("Already have an acount? Log in");function ft(s,e,n,a,r,o){const u=v("router-link"),c=N("focus");return i(),d("section",dt,[ct,t("div",ut,[y(P,{name:"failed"},{default:h(()=>[r.failed?(i(),d("div",pt,mt)):p("",!0)]),_:1}),_t,t("form",{onKeyup:e[3]||(e[3]=J((...l)=>o.signup&&o.signup(...l),["enter"])),onSubmit:e[4]||(e[4]=x((...l)=>o.signup&&o.signup(...l),["prevent"])),class:"user-crad"},[b(t("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=l=>r.signupCred.fullname=l),placeholder:"Enter fullname"},null,512),[[c],[S,r.signupCred.fullname]]),b(t("input",{type:"email","onUpdate:modelValue":e[1]||(e[1]=l=>r.signupCred.email=l),placeholder:"Enter email"},null,512),[[S,r.signupCred.email]]),b(t("input",{type:"password","onUpdate:modelValue":e[2]||(e[2]=l=>r.signupCred.password=l),placeholder:"Enter password"},null,512),[[S,r.signupCred.password]])],32),t("button",{onClick:e[5]||(e[5]=(...l)=>o.signup&&o.signup(...l)),class:"login-btn"},"Sign up!"),gt,y(u,{to:"/login"},{default:h(()=>[vt]),_:1})]),g(" "+m(r.signupCred),1)])}var bt=k(at,[["render",ft]]);const yt={name:"board-preview",props:{board:Object},data(){return{color:null}},async created(){try{const s=new oe;this.color=await s.getColorAsync(this.board.style.bgImgUrl)}catch(s){console.log(s)}},methods:{linearGradient(){var s;return this.color?s=this.color.isDark?"0.05":"0.3":s="0.1",`linear-gradient(rgba(0, 0, 0, ${s}),rgba(0, 0, 0, ${s})), `},async toggleStar(){const s=JSON.parse(JSON.stringify(this.board));s.isStarred=!s.isStarred,await this.$store.dispatch({type:"saveBoard",board:s}),this.board=s}},computed:{},components:{}},Ct={class:"board-preview"},kt={class:"txt-on-borad-img"};function wt(s,e,n,a,r,o){const u=v("router-link");return i(),d("section",Ct,[y(u,{to:"/board/"+n.board._id},{default:h(()=>[t("div",{style:A({"background-image":o.linearGradient()+"url("+n.board.style.bgImgUrl+")","background-color":n.board.style.bgColor}),class:"board-preview-container"},null,4),t("span",kt,m(n.board.title),1)]),_:1},8,["to"]),t("span",{class:f(["star",{full:n.board.isStarred}]),onClick:e[0]||(e[0]=c=>o.toggleStar())},null,2)])}var Bt=k(yt,[["render",wt]]);const $t={props:{isFirstPage:{type:Boolean,default:!0}},created(){},data(){return{}},methods:{closeModal(){this.$emit("closeModal")},goBack(){this.$emit("goBack")}},computed:{},components:{},unmounted(){},emits:["closeModal","goBack"]},xt={class:"custom-modal-container"},It={class:"custom-modal-header"},Mt={class:"title"},St={class:"custom-modal-main"};function Tt(s,e,n,a,r,o){return i(),d("article",xt,[t("section",It,[n.isFirstPage?p("",!0):(i(),d("a",{key:0,onClick:e[0]||(e[0]=x((...u)=>o.goBack&&o.goBack(...u),["stop"])),class:"custom-back"})),t("span",Mt,[q(s.$slots,"header")]),t("a",{onClick:e[1]||(e[1]=x((...u)=>o.closeModal&&o.closeModal(...u),["stop"])),class:"custom-close"})]),t("section",St,[q(s.$slots,"default")])])}var G=k($t,[["render",Tt]]);const U={delay:Nt,getRandomInt:Ot,makeId:Gt,makeAvatar:At};function At(s){s=s.split(" ");var e=(s.split(" ")[0].split("")[0]+s.split(" ")[1].split("")[0]).toUpperCases();return e.toUpperCases()}function Nt(s=1500){return new Promise(e=>{setTimeout(e,s)})}function Ot(s,e){return s=Math.ceil(s),e=Math.floor(e),Math.floor(Math.random()*(e-s)+s)}function Gt(s=5){for(var e="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=0;a<s;a++)e+=n.charAt(Math.floor(Math.random()*n.length));return e}const Et="/api/";var Dt=re.create({withCredentials:!0});const D={get(s,e){return H(s,"GET",e)},post(s,e){return H(s,"POST",e)},put(s,e){return H(s,"PUT",e)},delete(s,e){return H(s,"DELETE",e)}};async function H(s,e="GET",n=null){try{return(await Dt({url:`${Et}${s}`,method:e,data:n,params:e==="GET"?n:null})).data}catch(a){throw console.log(`Had Issues ${e}ing to the backend, endpoint: ${s}, with data:`,n),console.dir(a),a.response&&a.response.status===401&&ge.push("/login"),a}}re.defaults.withCredentials=!0;const T={query:Ut,getBoardById:Jt,removeBoard:Lt,updateBoard:Pt};async function Ut(){return console.log("query front"),await D.get("board")}async function Jt(s,e={}){return console.log("getBoardById front"),await D.get(`board/${s}`,e)}async function Lt(s){return await D.delete(`board/${s}`)}async function Pt(s){return s._id?(console.log("updateBoard front"),await D.put(`board/${s._id}`,s)):await D.post("board",s)}const E={getEmptyBoard:jt,addGroup:Qt,editGroup:Vt,removeGroup:Ht,addCard:Rt,getCardById:Ft,updateCard:Kt,removeCard:qt};function jt(){return{title:"",createdAt:Date.now(),isStarred:!1,createdBy:{},style:{bgImUrl:"",bgColor:""},labels:Wt(),members:[],groups:[F("Todo"),F("Doing"),F("Done")],activities:[],cmpsOrder:[]}}async function Qt(s,e){try{var n=await T.getBoardById(s);return n.groups.push(F(e)),await T.updateBoard(n)}catch(a){throw a}}async function Vt(s,e){try{var n=await T.getBoardById(s);const a=n.groups.findIndex(r=>r.id===e.id);return n.groups[a]=e,await T.updateBoard(n)}catch(a){throw a}}async function Ht(s,e){try{var n=await T.getBoardById(s);const a=n.groups.findIndex(r=>r.id===e);return n.groups.splice(a,1)[0],await T.updateBoard(n)}catch(a){throw a}}async function Rt(s,e,n){try{var a=await T.getBoardById(s);const r=a.groups.findIndex(o=>o.id===e);return a.groups[r].cards.push(zt(n)),await T.updateBoard(a)}catch(r){throw r}}async function Ft(s,e){try{var n=await T.getBoardById(s),a=null;return n.groups.forEach(r=>{r.cards.forEach(o=>{o.id===e&&(a={groupId:r.id,card:o})})}),a}catch(r){throw r}}async function Kt(s,e,n){try{const a=await T.getBoardById(s),r=a.groups.findIndex(u=>u.id===e),o=a.groups[r].cards.findIndex(u=>u.id===n.id);return a.groups[r].cards.splice(o,1,n),await T.updateBoard(a)}catch(a){throw console.log("Can not update card"),a}}async function qt(s,e,n){try{var a=await T.getBoardById(s);const r=a.groups.findIndex(u=>u.id===e),o=a.groups[r].cards.findIndex(u=>u.id===n);return a.groups[r].cards.splice(o,1)[0],await T.updateBoard(a)}catch(r){throw r}}function Wt(){return[{id:"l101",title:"Copy Request",className:"color0"},{id:"l102",title:"One more step",className:"color1"},{id:"l103",title:"Priority",className:"color2"},{id:"l104",title:"Design Team",className:"color3"},{id:"l105",title:"Product Marketing",className:"color4"},{id:"l106",title:"Trello Tip",className:"color5"},{id:"l107",title:"Help",className:"color6"}]}function F(s=""){return{id:U.makeId(),title:s,cards:[]}}function zt(s=""){return{id:U.makeId(),title:s,status:"",description:"",dueDate:null,createdAt:Date.now(),attachments:[],checklists:[],comments:[],memberIds:[],labelIds:[],byMember:{},style:{type:"",cover:"",fullCover:!1}}}const Yt={name:"",data(){return{newBoard:E.getEmptyBoard(),imagePicker:this.$store.getters.imagePicker,colorPicker:this.$store.getters.boardColors.slice(0,5)}},methods:{closeModal(){this.$emit("closeModal")},setBg(s){this.newBoard.style.bgColor="",this.newBoard.style.bgImgUrl=s},setColor(s){this.newBoard.style.bgImgUrl="",this.newBoard.style.bgColor=s},async createBoard(){await this.$store.dispatch({type:"saveBoard",board:this.newBoard}),this.$router.push(`/board/${this.newBoard._id}`),this.newBoard=E.getEmptyBoard()}},created(){},computed:{},components:{customModal:G,localService:E}},Xt=g(" Create board "),Zt=t("img",{src:"https://res.cloudinary.com/trellox/image/upload/v1648370075/demo-board_kga9ov.svg",alt:"demo board"},null,-1),es=[Zt],ts={class:"background-picker"},ss=t("h4",null,"Background",-1),os={class:"image-picker"},rs=["onClick"],ns=["src"],ls={class:"color-picker"},is=["onClick"],as=t("h4",{class:"board-title"},[g("Board title "),t("span",null,"*")],-1);function ds(s,e,n,a,r,o){const u=v("custom-modal");return i(),M(u,{class:"board-add",onCloseModal:o.closeModal},{header:h(()=>[Xt]),default:h(()=>[t("div",{style:A({"background-image":"url("+r.newBoard.style.bgImgUrl+")","background-color":r.newBoard.style.bgColor}),class:"demo-board"},es,4),t("div",ts,[ss,t("ul",os,[(i(!0),d(C,null,w(r.imagePicker,c=>(i(),d("li",{onClick:l=>o.setBg(c),key:c},[t("img",{src:c,alt:"board background image"},null,8,ns)],8,rs))),128))]),t("ul",ls,[(i(!0),d(C,null,w(r.colorPicker,c=>(i(),d("li",{onClick:l=>o.setColor(c),key:c},[t("div",{class:"color",style:A({"background-color":c})},null,4)],8,is))),128))]),as,b(t("input",{"onUpdate:modelValue":e[0]||(e[0]=c=>r.newBoard.title=c),type:"text",placeholder:"Add board title"},null,512),[[S,r.newBoard.title]]),t("button",{onClick:e[1]||(e[1]=(...c)=>o.createBoard&&o.createBoard(...c))},"Create")])]),_:1},8,["onCloseModal"])}var cs=k(Yt,[["render",ds]]);const us={name:"board-list",props:{boards:Array,showCreate:Boolean},data(){return{openBoardCreation:!1}},methods:{},computed:{},components:{boardPreview:Bt,boardAdd:cs}},ps={class:"boards-area"},hs={class:"boards-name"},ms=t("span",{class:"icon"},null,-1),_s={class:"title"},gs={class:"board-list"},vs={class:"boards"},fs=t("section",{class:"board-preview new-board"},[t("div",{class:"board-preview-container"},[t("span",{class:"txt-on-borad-img"},"Create new board")])],-1);function bs(s,e,n,a,r,o){const u=v("board-preview"),c=v("board-add");return i(),d("section",ps,[t("div",hs,[ms,t("h3",_s,[q(s.$slots,"boards-name")])]),t("section",gs,[t("ul",vs,[(i(!0),d(C,null,w(n.boards,l=>(i(),d("li",{key:l._id},[y(u,{board:l},null,8,["board"])]))),128)),n.showCreate?(i(),d("li",{key:0,onClick:e[1]||(e[1]=l=>r.openBoardCreation=!0)},[fs,r.openBoardCreation?(i(),M(c,{key:0,onCloseModal:e[0]||(e[0]=l=>r.openBoardCreation=!1)})):p("",!0)])):p("",!0)])])])}var se=k(us,[["render",bs]]);const ys={name:"user-modal",data(){return{}},methods:{},computed:{member(){return this.$store.getters.loggedinUser},checkMember(){return this.member?this.member.fullname.split(" ")[0].split("")[0]+this.member.fullname.split(" ")[1].split("")[0]:"G"},async logout(){try{await this.$store.dispatch("logout")}catch(s){console.log(s)}}},components:{customModal:G}},Cs=g(" Acount "),ks={class:"member-container"},ws=["title"],Bs=["src"],$s={key:1},xs={class:"member-details"},Is=t("hr",null,null,-1),Ms={class:"member-options"},Ss=t("li",null,"Activity",-1);function Ts(s,e,n,a,r,o){const u=v("custom-modal");return o.member?(i(),M(u,{key:0,class:"user-modal"},{header:h(()=>[Cs]),default:h(()=>{var c;return[t("div",ks,[t("div",{class:"avatar-container",title:o.member?o.member.fullname:"Guest"},[(c=o.member)!=null&&c.imgUrl?(i(),d("img",{key:0,src:o.member.imgUrl,alt:""},null,8,Bs)):(i(),d("span",$s,m(o.checkMember),1))],8,ws),t("div",xs,[t("h3",null,m(o.member.fullname),1),t("h5",null,m(o.member.email),1)])]),Is,t("ul",Ms,[Ss,t("li",{onClick:e[0]||(e[0]=(...l)=>o.logout&&o.logout(...l))},"Log out")])]}),_:1})):p("",!0)}var As=k(ys,[["render",Ts]]);const Ns={name:"",data(){return{openCreate:!1,openUser:!1,cmpName:null}},methods:{openModal(s){this.cmpName=s},closeModal(){this.cmpName=null}},computed:{},components:{userModal:As},computed:{member(){return this.$store.getters.loggedinUser},checkMember(){return this.member?this.member.fullname.split(" ")[0].split("")[0]+this.member.fullname.split(" ")[1].split("")[0]:"G"}}},Os={class:"app-header"},Gs={class:"left-header"},Es=t("i",{class:"fa-brands fa-trello"},null,-1),Ds=t("p",null,"Trellox",-1),Us=[Es,Ds],Js=t("button",null,[g("Workspaces "),t("i",{class:"fa-solid fa-chevron-down"})],-1),Ls=t("button",null,[g("Recent "),t("i",{class:"fa-solid fa-chevron-down"})],-1),Ps=t("button",null,[g("Starred "),t("i",{class:"fa-solid fa-chevron-down"})],-1),js=t("button",null,[g("Templates "),t("i",{class:"fa-solid fa-chevron-down"})],-1),Qs={class:"right-header"},Vs=t("label",null,[t("i",{class:"fa-solid fa-magnifying-glass"}),t("input",{type:"text",placeholder:"Search"})],-1),Hs=t("button",{class:"notifications"},[t("i",{class:"fa-solid fa-bell"})],-1),Rs=["title"],Fs=["src"],Ks={key:1};function qs(s,e,n,a,r,o){var c;const u=N("click-outside");return i(),d("header",Os,[t("div",Gs,[t("div",{onClick:e[0]||(e[0]=l=>this.$router.push("/workspace")),class:"logo"},Us),Js,Ls,Ps,js,t("button",{onClick:e[1]||(e[1]=l=>r.openCreate=!0)},"Create")]),t("div",Qs,[Vs,Hs,t("div",{onClick:e[2]||(e[2]=l=>o.openModal("user-modal")),class:"avatar-container",title:o.member?o.member.fullname:"Guest"},[(c=o.member)!=null&&c.imgUrl?(i(),d("img",{key:0,src:o.member.imgUrl,alt:""},null,8,Fs)):(i(),d("span",Ks,m(o.checkMember),1))],8,Rs),r.cmpName?b((i(),M(W(r.cmpName),{key:0,onCloseModal:o.closeModal},null,8,["onCloseModal"])),[[u,()=>o.closeModal()]]):p("",!0)])])}var de=k(Ns,[["render",qs]]);const Ws={name:"workspace-view",components:{boardList:se,AppHeader:de,BoardList:se},data(){return{currpage:"board"}},methods:{setCurrpage(s){this.currpage=s}},computed:{boards(){return this.$store.getters.boards},starredBoards(){return this.boards},recentlyViewd(){return this.boards},yourWorkspace(){return this.boards},templates(){return this.boards}}},zs={class:"workspace-view"},Ys={class:"workspace-wrapper"},Xs={class:"workspace-nav"},Zs={class:"nav-options-top"},eo=t("span",{class:"board-icon icon"},null,-1),to=t("span",{class:"view-name"},"Boards",-1),so=t("span",{class:"template-icon icon"},null,-1),oo=t("span",{class:"view-name"},"Templates",-1),ro=t("span",{class:"home-icon icon"},null,-1),no=t("span",{class:"view-name"},"Home",-1),lo={key:0,class:"board-list-container"},io=g("Recently viewed"),ao=g("Recently viewed"),co=g("YOUR WORKSPACES"),uo={key:1,class:"board-list-container"},po=g("Templates");function ho(s,e,n,a,r,o){const u=v("app-header"),c=v("router-link"),l=v("board-list");return i(),d("section",zs,[y(u,{class:"workspace-header"}),t("div",Ys,[t("nav",Xs,[t("div",Zs,[y(c,{to:"/workspace",class:f({active:r.currpage==="board"}),onClick:e[0]||(e[0]=_=>o.setCurrpage("board"))},{default:h(()=>[eo,to]),_:1},8,["class"]),y(c,{to:"/workspace",class:f({active:r.currpage==="template"}),onClick:e[1]||(e[1]=_=>o.setCurrpage("template"))},{default:h(()=>[so,oo]),_:1},8,["class"]),y(c,{to:"/",class:f({active:r.currpage==="home"}),onClick:e[2]||(e[2]=_=>o.setCurrpage("home"))},{default:h(()=>[ro,no]),_:1},8,["class"])])]),r.currpage==="board"?(i(),d("div",lo,[y(l,{boards:o.starredBoards,showCreate:!1},{"boards-name":h(()=>[io]),_:1},8,["boards"]),y(l,{boards:o.recentlyViewd,showCreate:!1},{"boards-name":h(()=>[ao]),_:1},8,["boards"]),y(l,{boards:o.yourWorkspace,showCreate:!0},{"boards-name":h(()=>[co]),_:1},8,["boards"])])):p("",!0),r.currpage==="template"?(i(),d("div",uo,[y(l,{boards:o.templates,showCreate:!1},{"boards-name":h(()=>[po]),_:1},8,["boards"])])):p("",!0)])])}var mo=k(Ws,[["render",ho]]);const _o={name:"card-actions",props:{},components:{},created(){},data(){return{}},methods:{},computed:{},unmounted(){}},go=t("ul",null,[t("li",null,"Open card"),t("li",null,"Edit labels"),t("li",null,"Change members"),t("li",null,"Change cover"),t("li",null,"Move"),t("li",null,"Copy"),t("li",null,"Edit dates"),t("li",null,"Remove")],-1),vo=[go];function fo(s,e,n,a,r,o){return i(),d("section",null,vo)}var bo=k(_o,[["render",fo]]);const yo={props:{card:Object},components:{customModal:G},data(){return{labelIds:JSON.parse(JSON.stringify(this.card.labelIds)),newLabel:null,selectedColor:"color0",wantToDelete:!1,filterBy:""}},created(){},methods:{goBack(){this.newLabel=null},closeModal(){this.$emit("closeModal")},toggleLabel(s){const e=this.labelIds.findIndex(n=>n===s);e===-1?this.labelIds.push(s):this.labelIds.splice(e,1),this.save()},startCreating(s,e=!1){s&&!e?(this.newLabel=s,this.selectedColor=s.className):this.newLabel={title:e?s:"",className:this.selectedColor}},changeColor(s){this.newLabel.className=s,this.selectedColor=s},async saveLabel(){var s=this.$store.getters.currBoard,e=!1;if(this.newLabel.id){const n=s.labels.findIndex(a=>a.id===this.newLabel.id);s.labels.splice(n,1,this.newLabel)}else{e=!0;const n=this.labels.findIndex(a=>a.className===this.newLabel.className&&a.title===this.newLabel.title);n===-1?(this.newLabel.id=U.makeId(),s.labels.push(this.newLabel)):this.labelIds.findIndex(r=>r===this.labels[n].id)===-1&&this.labelIds.push(this.labels[n].id)}await this.$store.dispatch({type:"saveBoard",board:s}),e&&(this.labelIds.push(this.newLabel.id),this.save()),this.goBack()},async deleteLabel(){var s=this.$store.getters.currBoard;const e=s.labels.findIndex(n=>n.id===this.newLabel.id);s.labels.splice(e,1),s.groups=s.groups.map(n=>(n.cards=n.cards.map(a=>(a.labelIds=a.labelIds.filter(r=>r!==this.newLabel.id),a)),n)),await this.$store.dispatch({type:"saveBoard",board:s}),this.goBack(),this.wantToDelete=!1},save(){this.$emit("updateKey","labelIds",JSON.parse(JSON.stringify(this.labelIds)))}},computed:{labels(){var s=this.$store.getters.currBoard.labels;if(!this.filterBy)return s;const e=new RegExp(this.filterBy,"i");return s.filter(n=>e.test(n.title))},classColors(){var s=this.$store.getters.labelColors;return s.pop(),s},emptyColor(){return this.$store.getters.labelColors.pop()},btnTxt(){return this.newLabel.id?"Save":"Create"},titleTxt(){return this.newLabel.id?"Change label":"Create label"}},emits:["closeModal","updateKey"]},Co=g(" Labels "),ko=t("h4",null,"Labels",-1),wo={class:"labels-container"},Bo=["onClick"],$o=["onClick"],xo={key:0,class:"v-icon"},Io=t("hr",null,null,-1),Mo=t("button",{class:"custom-btn"},"Enable color blind friendly mode",-1),So=t("label",{for:"name"},"Name",-1),To=t("label",{for:"color"},"Select a color",-1),Ao=["onClick"],No={key:0,class:"v-icon"},Oo={class:"empty-card-container"},Go={key:0,class:"v-icon"},Eo=t("div",null,[t("p",null,"No color."),t("p",null,"This won't show up on the front of cards.")],-1),Do={class:"add-btn"},Uo=g("Delete label?"),Jo=t("p",null,"There is no undo. This will remove this label from all cards and destroy its history.",-1);function Lo(s,e,n,a,r,o){const u=v("custom-modal"),c=N("focus");return i(),d(C,null,[r.newLabel?p("",!0):(i(),M(u,{key:0,onCloseModal:o.closeModal,onGoBack:o.goBack,class:"label-picker"},{header:h(()=>[Co]),default:h(()=>[b(t("input",{"onUpdate:modelValue":e[0]||(e[0]=l=>r.filterBy=l),class:"custom-input",type:"text",placeholder:"Search labels..."},null,512),[[c],[S,r.filterBy]]),ko,t("ul",wo,[(i(!0),d(C,null,w(o.labels,l=>(i(),d("li",{key:l.id,onClick:_=>o.toggleLabel(l.id)},[t("span",{class:"edit-label",onClick:x(_=>o.startCreating(l),["stop"])},null,8,$o),t("div",{class:f(["label-in-label-picker",l.className])},[g(m(l.title)+" ",1),r.labelIds.includes(l.id)?(i(),d("span",xo)):p("",!0)],2)],8,Bo))),128))]),o.labels.length?(i(),d("button",{key:0,class:"custom-btn",onClick:e[1]||(e[1]=l=>o.startCreating(null))},"Create new label")):(i(),d("button",{key:1,class:"custom-btn",onClick:e[2]||(e[2]=l=>o.startCreating(r.filterBy,!0))},'Create new "'+m(r.filterBy)+'"" label',1)),Io,Mo]),_:1},8,["onCloseModal","onGoBack"])),r.newLabel&&!r.wantToDelete?(i(),M(u,{key:1,onCloseModal:o.closeModal,onGoBack:o.goBack,isFirstPage:!1,class:"label-picker"},{header:h(()=>[g(m(o.titleTxt),1)]),default:h(()=>[t("form",{onSubmit:e[6]||(e[6]=x((...l)=>o.saveLabel&&o.saveLabel(...l),["prevent"])),class:"form-label"},[So,b(t("input",{"onUpdate:modelValue":e[3]||(e[3]=l=>r.newLabel.title=l),id:"name",class:"custom-input",type:"text"},null,512),[[c],[S,r.newLabel.title]]),To,t("div",null,[(i(!0),d(C,null,w(o.classColors,l=>(i(),d("span",{key:l,class:f([l,"colorPalette"]),onClick:_=>o.changeColor(l)},[r.selectedColor===l?(i(),d("span",No)):p("",!0)],10,Ao))),128))]),t("div",Oo,[t("span",{class:f([o.emptyColor,"colorPalette"]),onClick:e[4]||(e[4]=l=>o.changeColor(o.emptyColor))},[r.selectedColor===o.emptyColor?(i(),d("span",Go)):p("",!0)],2),Eo]),t("button",Do,m(o.btnTxt),1),r.newLabel.id?(i(),d("div",{key:0,class:"delete-btn",onClick:e[5]||(e[5]=l=>r.wantToDelete=!0)},"Delete")):p("",!0)],32)]),_:1},8,["onCloseModal","onGoBack"])):p("",!0),r.newLabel&&r.wantToDelete?(i(),M(u,{key:2,onCloseModal:o.closeModal,onGoBack:e[8]||(e[8]=l=>r.wantToDelete=!1),isFirstPage:!1,class:"label-picker delete-mode"},{header:h(()=>[Uo]),default:h(()=>[Jo,t("div",{class:"delete-btn",onClick:e[7]||(e[7]=(...l)=>o.deleteLabel&&o.deleteLabel(...l))},"Delete")]),_:1},8,["onCloseModal"])):p("",!0)],64)}var ce=k(yo,[["render",Lo]]);const Po={props:{card:Object},components:{customModal:G},created(){},data(){return{newMember:null,memberIds:JSON.parse(JSON.stringify(this.card.memberIds)),filterBy:""}},methods:{closeModal(){this.$emit("closeModal")},toggleMember(s){const e=this.memberIds.findIndex(n=>n===s);e===-1?this.memberIds.push(s):this.memberIds.splice(e,1),this.save()},save(){this.$emit("updateKey","memberIds",JSON.parse(JSON.stringify(this.memberIds)))}},computed:{members(){var s=this.$store.getters.currBoard.members;if(!this.filterBy)return s;const e=new RegExp(this.filterBy,"i");return s.filter(n=>e.test(n.fullname)||e.test(n.username))}},unmounted(){}},jo=g(" Members "),Qo=t("h4",null,"Board members",-1),Vo={key:0,class:"members-container"},Ho=["onClick"],Ro={class:"avatar-container"},Fo=["src"],Ko={key:1},qo=t("span",{class:"v-icon"},null,-1),Wo={key:1,class:"msg-no-members"},zo={key:2,class:"custom-btn"};function Yo(s,e,n,a,r,o){const u=v("custom-modal"),c=N("focus");return i(),M(u,{onCloseModal:o.closeModal},{header:h(()=>[jo]),default:h(()=>[b(t("input",{"onUpdate:modelValue":e[0]||(e[0]=l=>r.filterBy=l),class:"custom-input",type:"text",placeholder:"Search members..."},null,512),[[c],[S,r.filterBy]]),Qo,o.members.length?(i(),d("ul",Vo,[(i(!0),d(C,null,w(o.members,l=>(i(),d("li",{key:l._id,onClick:_=>o.toggleMember(l._id)},[t("div",{class:f(["member",{active:r.memberIds.includes(l._id)}])},[t("div",Ro,[l.imgUrl?(i(),d("img",{key:0,src:l.imgUrl,alt:""},null,8,Fo)):(i(),d("span",Ko,m(l.fullname.split(" ")[0].split("")[0]+l.fullname.split(" ")[1].split("")[0]),1))]),t("span",null,m(l.fullname),1),t("span",null,"("+m(l.username)+")",1),qo],2)],8,Ho))),128))])):(i(),d("p",Wo,"Looks like that person isn't a member yet. Enter their email address to add them to the card and board.")),o.members.length?(i(),d("button",zo,"Show other Workspace members")):p("",!0)]),_:1},8,["onCloseModal"])}var ue=k(Po,[["render",Yo]]);const Xo={name:"",data(){return{checklist:{title:"Checklist",newTodo:"",todos:[]}}},methods:{closeModal(){this.$emit("closeModal")},save(){this.$emit("updateKey","checklists",JSON.parse(JSON.stringify(this.checklist))),this.$emit("closeModal")}},computed:{},components:{customModal:G}},Zo=g(" Add checklist "),er=t("h4",null,"Title",-1),tr=t("h4",null,"Copy items from...",-1),sr=t("p",null,"to put here dropdown select",-1);function or(s,e,n,a,r,o){const u=v("custom-modal"),c=N("focus");return i(),M(u,{onCloseModal:o.closeModal},{header:h(()=>[Zo]),default:h(()=>[er,b(t("input",{"onUpdate:modelValue":e[0]||(e[0]=l=>r.checklist.title=l),class:"custom-input",type:"text"},null,512),[[S,r.checklist.title],[c]]),tr,sr,t("button",{class:"add-btn",onClick:e[1]||(e[1]=(...l)=>o.save&&o.save(...l))},"Add")]),_:1},8,["onCloseModal"])}var rr=k(Xo,[["render",or]]);const Q={getBgImages:lr,uploadImg:nr};function nr(s){const e="Trellox_1",a="https://api.cloudinary.com/v1_1/trellox/image/upload",r=new FormData;return r.append("file",s.target.files[0]),r.append("upload_preset",e),fetch(a,{method:"POST",body:r}).then(o=>o.json()).then(o=>o).catch(o=>console.error(o))}async function lr(s){try{const e=await fetch(`https://api.unsplash.com/search?query=${s}&client_id=oMe4LiG85eXMR9Nf7b8cxU6jsTRHCtO81O_MjX-J4L0`,{method:"GET"});return console.log("res",e),e.json()}catch(e){console.log("cannot get images",e)}}const ir={props:{card:Object},name:"",data(){return{style:JSON.parse(JSON.stringify(this.card.style)),attachments:JSON.parse(JSON.stringify(this.card.attachments)),colors:this.$store.getters.coverColors,images:this.$store.getters.coverImages}},methods:{closeModal(){this.$emit("closeModal")},async onUploadImg(s){const e=await Q.uploadImg(s),n={name:e.public_id,createdAt:e.created_at,url:e.url,format:e.format};this.attachments.push(n),this.$emit("updateKey","attachments",JSON.parse(JSON.stringify(this.attachments))),this.style.cover=e.url,this.style.type="url",this.save()},setColor(s){this.style.cover===s?(this.style.cover="",this.style.type=""):(this.style.cover=s,this.style.type="color"),this.save()},setBgUrl(s){this.style.cover===s?(this.style.cover="",this.style.type=""):(this.style.cover=s,this.style.type="url"),this.save()},setCoverSize(s){this.style.fullCover=s,this.save()},save(){this.$emit("updateKey","style",JSON.parse(JSON.stringify(this.style)))}},computed:{background(){return this.style.type==="url"?`background-image:url('${this.style.cover}')`:`background-color: ${this.style.cover}`}},components:{customModal:G}},ar=g(" Cover "),dr=t("h4",null,"Size",-1),cr={class:"cover-preview-container"},ur=t("div",{class:"cover-bottom"},[t("div",{class:"wide"}),t("div",{class:"narrow"}),t("div",{class:"content-container"},[t("div",{class:"content"}),t("div",{class:"content"})]),t("div",{class:"member"})],-1),pr=[ur],hr=t("div",{class:"full-content-container"},[t("div",{class:"wide"}),t("div",{class:"narrow"})],-1),mr=[hr],_r={key:0,class:"custom-btn"},gr=t("h4",null,"Colors",-1),vr={class:"colors-container"},fr=["onClick"],br=t("h4",null,"Attachments",-1),yr={class:"attachment-container"},Cr=["onClick"],kr={for:"file-input",class:"custom-btn"},wr=g(" Upload a cover image "),Br=t("span",{class:"tip"},"Tip: Drag an image on to the card to upload it.",-1),$r=t("h4",{class:"images-header"},"Photos from Unsplash",-1),xr={class:"images-container"},Ir=["onClick"],Mr=t("button",{class:"custom-btn"},"Search for photos",-1);function Sr(s,e,n,a,r,o){const u=v("custom-modal");return i(),M(u,{onCloseModal:o.closeModal,class:"cover-picker"},{header:h(()=>[ar]),default:h(()=>[dr,t("div",cr,[t("div",{onClick:e[0]||(e[0]=c=>o.setCoverSize(!1)),class:f(["cover-preview",!r.style.fullCover&&r.style.cover?"active":""])},[t("div",{class:"cover-top",style:A(o.background)},pr,4)],2),t("div",{onClick:e[1]||(e[1]=c=>o.setCoverSize(!0)),class:f(["full-cover-preview",r.style.fullCover&&r.style.cover?"active":""])},[t("div",{class:"cover-top",style:A(o.background)},mr,4)],2)]),r.style.cover?(i(),d("button",_r,"Remove cover")):p("",!0),gr,t("div",vr,[(i(!0),d(C,null,w(r.colors,c=>(i(),d("div",{key:c,class:f(["color-preview",c===r.style.cover?"active":""]),style:A("background-color:"+c),onClick:l=>o.setColor(c)},null,14,fr))),128))]),br,t("div",yr,[(i(!0),d(C,null,w(r.attachments,c=>(i(),d("div",{key:c,class:f(["attachment-preview",c.url===r.style.cover?"active":""]),onClick:l=>o.setBgUrl(c.url),style:A(`background-image: url('${c.url}')`)},null,14,Cr))),128))]),t("label",kr,[wr,t("input",{type:"file",onInput:e[2]||(e[2]=(...c)=>o.onUploadImg&&o.onUploadImg(...c)),class:"file-input",hidden:"",id:"file-input"},null,32)]),Br,$r,t("div",xr,[(i(!0),d(C,null,w(r.images,c=>(i(),d("div",{key:c,class:f(["attachment-preview",c===r.style.cover?"active":""]),onClick:l=>o.setBgUrl(c),style:A(`background-image: url('${c}')`)},null,14,Ir))),128))]),Mr]),_:1},8,["onCloseModal"])}var pe=k(ir,[["render",Sr]]);const Tr={name:"",props:{card:Object},data(){return{attachments:JSON.parse(JSON.stringify(this.card.attachments))}},methods:{async onUploadImg(s){const e=await Q.uploadImg(s);console.log("res",e);const n={name:e.public_id,createdAt:e.created_at,url:e.url,format:e.format};this.attachments.push(n),this.$emit("updateKey","attachments",JSON.parse(JSON.stringify(this.attachments)))}},components:{customModal:G}},Ar=g(" Attach from... "),Nr={class:"attachment-picker"},Or=g("Computer "),Gr=t("li",null,[t("label",null,"Google Drive ")],-1);function Er(s,e,n,a,r,o){const u=v("custom-modal");return i(),M(u,{class:"attachment-container"},{header:h(()=>[Ar]),default:h(()=>[t("ul",Nr,[t("li",null,[t("label",null,[Or,t("input",{type:"file",onChange:e[0]||(e[0]=(...c)=>o.onUploadImg&&o.onUploadImg(...c))},null,32)])]),Gr])]),_:1})}var Dr=k(Tr,[["render",Er]]);const Ur={data(){return{}},methods:{removeCard(){this.$emit("removeCard")}},computed:{},components:{customModal:G}},Jr=g(" Delete card? "),Lr=t("p",{style:{margin:"0 0 8px"}}," All actions will be removed from the activity feed and you won\u2019t be able to re-open the card. There is no undo. ",-1);function Pr(s,e,n,a,r,o){const u=v("custom-modal");return i(),M(u,{onCloseModal:s.closeModal},{header:h(()=>[Jr]),default:h(()=>[Lr,t("button",{class:"delete-btn",style:{width:"100%","justify-content":"center"},onClick:e[0]||(e[0]=(...c)=>o.removeCard&&o.removeCard(...c))},"Delete")]),_:1},8,["onCloseModal"])}var he=k(Ur,[["render",Pr]]);const jr={components:{labelPicker:ce,memberPicker:ue,checklistAdd:rr,coverPicker:pe,attachments:Dr,confirmDelete:he},data(){return{isTextArea:!1,card:null,boardId:null,cardId:null,groupId:null,isShowActivity:!1,isCommentsInput:!1,newComment:{txt:"",createdAt:null,byMemberId:"u101"},cmpName:null,description:null,isAddTodo:null,newTodo:{title:"",isDone:!1},coverColor:null}},created(){this.cardId=this.$route.params.cardId,this.boardId=this.$route.params.boardId,this.loadCard()},methods:{openModal(s){this.cmpName=s},closeModal(){this.cmpName=null},updateKey(s,e){s==="checklists"?(e.id=U.makeId(),this.card[s].push(e)):this.card[s]=e,this.updateCard()},closeEdit(){this.$router.push(`/board/${this.boardId}`)},async loadCard(){var e;const s=await this.$store.dispatch({type:"getCardById",boardId:this.boardId,cardId:this.cardId});this.card=s.card,this.description=((e=s.card)==null?void 0:e.description)||"",this.groupId=s.groupId,this.checkCover()},showActivity(){this.isShowActivity=!this.isShowActivity},toggleCommentsInput(){this.isCommentsInput=!this.isCommentsInput},postComment(){if(console.log("here"),!!this.newComment.txt){var s=JSON.parse(JSON.stringify(this.newComment));s.txt.trim(),s.createdAt=Date.now(),s.id=U.makeId(),this.card.comments.unshift(s),this.updateCard(),this.newComment.txt=""}},async updateCard(){await this.$store.dispatch({type:"updateCard",groupId:this.groupId,card:this.card}),this.loadCard()},calcProgress(s){if(!s.length)return"0%";var n=(s.reduce((a,r)=>(r.isDone&&a++,a),0)*100/s.length).toFixed(0)+"%";return n},toggleTodo(s,e){const n=this.card.checklists.findIndex(r=>r.id===e),a=this.card.checklists[n].todos.findIndex(r=>r.id===s);this.card.checklists[n].todos[a].isDone=!this.card.checklists[n].todos[a].isDone,this.updateCard()},updateDescription(){this.card.description=this.description,this.updateCard(),this.isTextArea=!1},getMemberById(s){console.log("memberId",s)},addTodo(s,e){var n=JSON.parse(JSON.stringify(this.newTodo));if(n.title=JSON.parse(JSON.stringify(e.newTodo)),e.newTodo="",!n.title)return;n.id=U.makeId();const a=this.card.checklists.findIndex(r=>r.id===s);this.card.checklists[a].todos.push(n),this.updateCard()},closeTodoInput(s){s.newTodo="",this.isAddTodo=null},openUrl(s){window.open(s)},removeChecklist(s){this.card.checklists.splice(s,1),this.updateCard()},async checkCover(){if(!this.card.style.cover)return"";try{const s=new oe;this.card.style.type==="url"&&(this.coverColor=await s.getColorAsync(this.card.style.cover))}catch(s){console.log(s)}},async removeCard(){await this.$store.dispatch("removeCard",{groupId:this.groupId,cardId:this.cardId}),this.closeEdit()}},computed:{commentsInputStyle(){return this.isCommentsInput?"active-input":""},isCommentsText(){return this.newComment.txt?"save-btn":"not-allowed-btn"},labels(){var s=this.$store.getters.currBoard.labels;return s.filter(e=>this.card.labelIds.includes(e.id))},members(){var s=this.$store.getters.currBoard.members;return s.filter(e=>this.card.memberIds.includes(e._id))},comments(){var s=JSON.parse(JSON.stringify(this.$store.getters.currBoard.members));return JSON.parse(JSON.stringify(this.card)).comments.map(n=>{var a=s.find(r=>r._id===n.byMemberId);return n.byMember=a,n})},groupTitle(){return this.$store.getters.currBoard.groups.find(n=>n.id===this.groupId).title},cover(){return this.card.style.type==="url"?`background-image:url('${this.card.style.cover}')`:`background-color: ${this.card.style.cover}`},coverType(){return this.card.style.type==="url"?"card-cover-image":"card-cover-color"},coverButtonClass(){return this.card.style.cover?this.card.style.type==="color"?this.card.style.cover==="#172B4D"?"on-cover-icon-dark":"on-cover-icon":this.coverColor.isDark?"on-cover-icon-dark":"on-cover-icon":""}}},Qr={key:0,class:"card-edit"},Vr={class:"card-modal-details"},Hr={class:"modal-header"},Rr=t("span",{class:"modal-header-icon"},null,-1),Fr={class:"modal-header-title"},Kr={class:"inline-content"},qr=g("in list "),Wr={style:{"text-decoration":"underline"}},zr={class:"modal-main-content"},Yr={class:"card-details"},Xr={key:0,class:"card-details-item"},Zr=t("h3",null,"Members",-1),en=["title"],tn=["src"],sn={key:1},on=t("i",{class:"fa-solid fa-plus"},null,-1),rn=[on],nn={key:1,class:"card-details-item"},ln=t("h3",null,"Labels",-1),an=["title"],dn=t("i",{class:"fa-solid fa-plus"},null,-1),cn=[dn],un={class:"description-container"},pn=t("div",{class:"title"},[t("span",{class:"icon-description"}),t("h3",null,"Description")],-1),hn={class:"description-input"},mn=t("p",null,"Add a more detailed description\u2026",-1),_n=[mn],gn={key:2},vn=t("i",{class:"fa-solid fa-xmark"},null,-1),fn=[vn],bn={key:0,class:"attachments-container"},yn=t("div",{class:"title"},[t("span",{class:"icon-attachment"}),t("h3",null,"Attachments")],-1),Cn={class:"attachment-info"},kn=["onClick"],wn={class:"title"},Bn=t("span",{style:{top:"7px"},class:"icon-checklist"},null,-1),$n=["onClick"],xn={class:"checklist-progress"},In={class:"progress-precent"},Mn={class:"progress-bar"},Sn=["onClick"],Tn={class:"todo-title"},An={class:"add-todo-container"},Nn=["onUpdate:modelValue","onKeydown","hidden"],On=["onClick"],Gn=["onClick"],En=["onClick"],Dn=t("i",{class:"fa-solid fa-xmark"},null,-1),Un=[Dn],Jn={class:"activity-container"},Ln={class:"title"},Pn=t("span",{style:{top:"7px"},class:"icon-activity"},null,-1),jn=t("h3",null,"Activity",-1),Qn={class:"comments-frame"},Vn={class:"comments-input"},Hn={class:"avatar-container member"},Rn=["src"],Fn={key:1},Kn={class:"card-comment"},qn={class:"comment-by"},Wn={class:"comment-date"},zn={class:"the-comment"},Yn={class:"modal-side-bar"},Xn={class:"action-container"},Zn=t("h3",null,"Suggested",-1),el=t("span",{class:"icon ic-join"},null,-1),tl=t("span",null,"Join",-1),sl=[el,tl],ol={class:"action-container"},rl=t("h3",null,"Add to card",-1),nl=t("span",{class:"icon ic-join"},null,-1),ll=t("span",null,"Members",-1),il=[nl,ll],al=t("span",{class:"icon ic-label"},null,-1),dl=t("span",null,"Labels",-1),cl=[al,dl],ul=t("span",{class:"icon ic-checklist"},null,-1),pl=t("span",null,"Checklist",-1),hl=[ul,pl],ml=t("div",{class:"action-btn"},[t("span",{class:"icon ic-date"}),t("span",null,"Dates")],-1),_l=t("span",{class:"icon ic-attachment"},null,-1),gl=t("span",null,"Attachment",-1),vl=[_l,gl],fl=t("span",{class:"icon ic-cover"},null,-1),bl=t("span",null,"Cover",-1),yl=[fl,bl],Cl={class:"action-container"},kl=ke('<h3>Actions</h3><div class="action-btn"><span class="icon ic-move"></span><span>Move</span></div><div class="action-btn"><span class="icon ic-copy"></span><span>Copy</span></div><div class="action-btn"><span class="icon ic-template"></span><span>Make template</span></div><div class="action-btn"><span class="icon ic-watch"></span><span>Watch</span></div><hr>',6),wl=t("span",{class:"icon ic-remove remove"},null,-1),Bl=t("span",null,"Delete",-1),$l=[wl,Bl],xl=t("div",{class:"action-btn"},[t("span",{class:"icon ic-share"}),t("span",null,"Share")],-1);function Il(s,e,n,a,r,o){const u=N("focus"),c=N("click-outside");return r.card?(i(),d("section",Qr,[t("div",{onMousedown:e[24]||(e[24]=(...l)=>o.closeEdit&&o.closeEdit(...l)),class:"window-overlay"},[t("div",{onMousedown:e[23]||(e[23]=x(()=>{},["stop"])),class:"card-modal"},[t("div",Vr,[r.card.style.cover?(i(),d("div",{key:0,style:A(o.cover),class:f(o.coverType)},null,6)):p("",!0),t("span",{onClick:e[0]||(e[0]=(...l)=>o.closeEdit&&o.closeEdit(...l)),class:f(["close-modal-button",o.coverButtonClass])},null,2),t("div",Hr,[Rr,t("div",Fr,[b(t("textarea",{"onUpdate:modelValue":e[1]||(e[1]=l=>r.card.title=l),onKeyup:e[2]||(e[2]=(...l)=>o.updateCard&&o.updateCard(...l)),dir:"auto","data-autosize":"true"},null,544),[[S,r.card.title]])]),t("div",Kr,[qr,t("span",Wr,m(o.groupTitle),1)])]),t("div",zr,[t("div",Yr,[o.members.length?(i(),d("div",Xr,[Zr,(i(!0),d(C,null,w(o.members,l=>(i(),d("div",{class:"avatar-container",key:l.id,title:l.fullname},[l.imgUrl?(i(),d("img",{key:0,src:l.imgUrl,alt:""},null,8,tn)):(i(),d("span",sn,m(l.fullname.split(" ")[0].split("")[0]+l.fullname.split(" ")[1].split("")[0]),1))],8,en))),128)),t("div",{class:"add-member",onClick:e[3]||(e[3]=l=>o.openModal("member-picker"))},rn)])):p("",!0),o.labels.length?(i(),d("div",nn,[ln,t("div",null,[(i(!0),d(C,null,w(o.labels,l=>(i(),d("span",{class:f(["label-span",l.className]),key:l.id,title:l.title},[t("span",{onClick:e[4]||(e[4]=_=>o.openModal("label-picker"))},m(l.title),1)],10,an))),128)),t("div",{class:"add-label",onClick:e[5]||(e[5]=l=>o.openModal("label-picker"))},cn)])])):p("",!0)]),t("div",un,[pn,t("div",hn,[!r.isTextArea&&r.card.description.length?(i(),d("pre",{key:0,onClick:e[6]||(e[6]=l=>r.isTextArea=!0)},m(r.card.description),1)):p("",!0),!r.isTextArea&&!r.card.description?(i(),d("div",{key:1,class:"fake-text-area",onClick:e[7]||(e[7]=l=>r.isTextArea=!0)},_n)):p("",!0),r.isTextArea?b((i(),d("div",gn,[b(t("textarea",{"onUpdate:modelValue":e[8]||(e[8]=l=>r.description=l),placeholder:"Add a more detailed description\u2026"},null,512),[[u],[S,r.description]]),t("button",{onClick:e[9]||(e[9]=(...l)=>o.updateDescription&&o.updateDescription(...l)),class:"save-btn"},"Save"),t("span",{onClick:e[10]||(e[10]=l=>r.isTextArea=!1),class:"x-icon"},fn)])),[[c,()=>r.isTextArea=!1]]):p("",!0)])]),r.card.attachments.length?(i(),d("div",bn,[yn,t("ul",null,[(i(!0),d(C,null,w(r.card.attachments,l=>(i(),d("li",{key:l},[t("div",{class:"attachment",style:A({"background-image":"url("+l.url+")"})},null,4),t("div",Cn,[t("h5",null,[g(m(l.name)+"."+m(l.format)+" ",1),t("span",{onClick:_=>o.openUrl(l.url)},null,8,kn)]),t("p",null,"Added "+m(l.createdAt),1)])]))),128))])])):p("",!0),(i(!0),d(C,null,w(r.card.checklists,(l,_)=>(i(),d("div",{key:l.id,class:"checklist-container"},[t("div",wn,[Bn,t("h3",null,m(l.title),1),t("button",{onClick:I=>o.removeChecklist(_),class:"grey-btn"},"Delete",8,$n)]),t("div",xn,[t("span",In,m(o.calcProgress(l.todos)),1),t("div",Mn,[t("div",{style:A("width:"+o.calcProgress(l.todos)),class:f([o.calcProgress(l.todos)==="100%"?"progress-completed":"","current-progress"])},null,6)])]),t("div",null,[(i(!0),d(C,null,w(l.todos,I=>(i(),d("div",{key:I.id,class:"checklist-todos-container"},[t("div",{onClick:j=>o.toggleTodo(I.id,l.id),class:f(["todo-checkbox",I.isDone?"completed":""])},[t("span",{class:f(I.isDone?"checked":"")},null,2)],10,Sn),t("div",{class:f(["todo-title-container",I.isDone?"todo-completed":""])},[t("div",Tn,m(I.title),1)],2)]))),128))]),b((i(),d("div",An,[r.isAddTodo===l.id?b((i(),d("textarea",{key:0,"onUpdate:modelValue":I=>l.newTodo=I,onKeydown:J(x(I=>o.addTodo(l.id,l),["prevent"]),["enter"]),placeholder:"Add an item",hidden:!r.isAddTodo},null,40,Nn)),[[S,l.newTodo],[u]]):p("",!0),r.isAddTodo===l.id?(i(),d("button",{key:1,class:f(l.newTodo?"save-btn":"not-allowed-btn"),onClick:x(I=>o.addTodo(l.id,l),["stop"])},"Add",10,On)):(i(),d("button",{key:2,class:"grey-btn",onClick:x(I=>r.isAddTodo=l.id,["stop"]),style:{margin:"unset"}},"Add an item",8,Gn)),r.isAddTodo===l.id&&l.newTodo?(i(),d("span",{key:3,onClick:I=>o.closeTodoInput(l),class:"x-icon"},Un,8,En)):p("",!0)])),[[c,()=>r.isAddTodo=null]])]))),128)),t("div",Jn,[t("div",Ln,[Pn,jn,r.isShowActivity?(i(),d("button",{key:0,onClick:e[11]||(e[11]=(...l)=>o.showActivity&&o.showActivity(...l)),class:"grey-btn"},"Hide details")):(i(),d("button",{key:1,onClick:e[12]||(e[12]=(...l)=>o.showActivity&&o.showActivity(...l)),class:"grey-btn"},"Show details"))]),t("div",Qn,[b((i(),d("div",Vn,[b(t("textarea",{onFocus:e[13]||(e[13]=l=>r.isCommentsInput=!0),class:f(o.commentsInputStyle),"onUpdate:modelValue":e[14]||(e[14]=l=>r.newComment.txt=l),placeholder:"Write a comment..."},null,34),[[S,r.newComment.txt]]),r.isCommentsInput?(i(),d("button",{key:0,onClick:e[15]||(e[15]=x((...l)=>o.postComment&&o.postComment(...l),["stop"])),class:f(o.isCommentsText)},"Save",2)):p("",!0)])),[[c,()=>r.isCommentsInput=!1]])])]),t("div",null,[(i(!0),d(C,null,w(o.comments,l=>(i(),d("div",{class:"card-comment-container",key:l.id},[t("div",Hn,[l.byMember.imgUrl?(i(),d("img",{key:0,src:l.byMember.imgUrl,alt:""},null,8,Rn)):(i(),d("span",Fn,m(l.byMember.fullname.split(" ")[0].split("")[0]+l.byMember.fullname.split(" ")[1].split("")[0]),1))]),t("div",Kn,[t("span",qn,m(l.byMember.fullname),1),t("span",Wn,m(new Date(l.createdAt)),1),t("div",zn,[t("pre",null,m(l.txt),1)])])]))),128))])]),t("div",Yn,[t("div",Xn,[Zn,t("div",{onClick:e[16]||(e[16]=(...l)=>s.joinToCard&&s.joinToCard(...l)),class:"action-btn"},sl)]),t("div",ol,[rl,t("div",{class:"action-btn",onClick:e[17]||(e[17]=l=>o.openModal("member-picker"))},il),t("div",{class:"action-btn",onClick:e[18]||(e[18]=l=>o.openModal("label-picker"))},cl),r.cmpName?b((i(),M(W(r.cmpName),{key:0,card:r.card,onRemoveCard:o.removeCard,onCloseModal:o.closeModal,onUpdateKey:o.updateKey},null,8,["card","onRemoveCard","onCloseModal","onUpdateKey"])),[[c,()=>o.closeModal()]]):p("",!0),t("div",{class:"action-btn",onClick:e[19]||(e[19]=l=>o.openModal("checklist-add"))},hl),ml,t("div",{class:"action-btn",onClick:e[20]||(e[20]=l=>o.openModal("attachments"))},vl),t("div",{class:"action-btn",onClick:e[21]||(e[21]=l=>o.openModal("cover-picker"))},yl)]),t("div",Cl,[kl,t("div",{class:"action-btn remove",onClick:e[22]||(e[22]=l=>o.openModal("confirm-delete"))},$l),xl])])])],32)],32)])):p("",!0)}var me=k(jr,[["render",Il]]);const Ml={name:"",data(){return{}},methods:{openModal(s){this.$emit("openModal",s)}},computed:{},components:{}},Sl={class:"quick-edit-actions-container"},Tl=t("span",{class:"icon card"},null,-1),Al=t("span",{class:"txt"},"Open card",-1),Nl=[Tl,Al],Ol=t("span",{class:"icon label"},null,-1),Gl=t("span",{class:"txt"},"Edit labels",-1),El=[Ol,Gl],Dl=t("span",{class:"icon member"},null,-1),Ul=t("span",{class:"txt"},"Change members",-1),Jl=[Dl,Ul],Ll=t("span",{class:"icon cover"},null,-1),Pl=t("span",{class:"txt"},"Change cover",-1),jl=[Ll,Pl],Ql=t("span",{class:"icon move"},null,-1),Vl=t("span",{class:"txt"},"Move",-1),Hl=[Ql,Vl],Rl=t("span",{class:"icon copy"},null,-1),Fl=t("span",{class:"txt"},"Copy",-1),Kl=[Rl,Fl],ql=t("span",{class:"icon date"},null,-1),Wl=t("span",{class:"txt"},"Edit dates",-1),zl=[ql,Wl],Yl=t("span",{class:"icon remove"},null,-1),Xl=t("span",{class:"txt"},"Delete",-1),Zl=[Yl,Xl];function ei(s,e,n,a,r,o){return i(),d("section",Sl,[t("div",{onClick:e[0]||(e[0]=u=>s.$emit("openCard")),class:"action-button"},Nl),t("div",{onClick:e[1]||(e[1]=u=>o.openModal("label-picker")),class:"action-button"},El),t("div",{onClick:e[2]||(e[2]=u=>o.openModal("member-picker")),class:"action-button"},Jl),t("div",{onClick:e[3]||(e[3]=u=>o.openModal("cover-picker")),class:"action-button"},jl),t("div",{onClick:e[4]||(e[4]=u=>o.openModal("move-place-picker")),class:"action-button"},Hl),t("div",{onClick:e[5]||(e[5]=u=>o.openModal("copy-place-picker")),class:"action-button"},Kl),t("div",{onClick:e[6]||(e[6]=u=>o.openModal("date-picker")),class:"action-button"},zl),t("div",{onClick:e[7]||(e[7]=u=>o.openModal("confirm-delete")),class:"action-button"},Zl)])}var ti=k(Ml,[["render",ei]]);const si={props:{card:Object},components:{customModal:G},created(){},data(){return{newMember:null,memberIds:JSON.parse(JSON.stringify(this.card.memberIds))}},methods:{closeModal(){this.$emit("closeModal")},toggleMember(s){const e=this.memberIds.findIndex(n=>n===s);e===-1?this.memberIds.push(s):this.memberIds.splice(e,1),this.save()},save(){this.$emit("updateKey","memberIds",JSON.parse(JSON.stringify(this.memberIds)))}},computed:{members(){return this.$store.getters.currBoard.members}},unmounted(){}},oi=g(" Dates "),ri=t("label",{for:"reminder"},"Set due date reminder",-1),ni=t("select",{name:"reminder"},[t("option",null,"None"),t("option",null,"At time of due date"),t("option",null,"5 Minutes before"),t("option",null,"10 Minutes before"),t("option",null,"15 Minutes before"),t("option",null,"1 Hour before"),t("option",null,"2 Hour before"),t("option",null,"1 Day before"),t("option",null,"2 Day before")],-1),li=t("h4",null,"Reminders will be sent to all members and watchers of this card.",-1),ii=t("button",{class:"custom-btn"},"Save",-1),ai=t("button",{class:"custom-btn"},"Remove",-1);function di(s,e,n,a,r,o){const u=v("custom-modal");return i(),M(u,{onCloseModal:o.closeModal},{header:h(()=>[oi]),default:h(()=>[ri,ni,li,ii,ai]),_:1},8,["onCloseModal"])}var ci=k(si,[["render",di]]);const ui={name:"card-preview",props:{card:Object,isQuickEdit:Object,groupId:String},components:{cardActions:bo,cardEdit:me,quickEditActions:ti,labelPicker:ce,memberPicker:ue,coverPicker:pe,datePicker:ci,confirmDelete:he},data(){return{activeColor:"red",isChecklistDone:!1,newTitle:"",cmpName:null}},methods:{openCard(){this.$emit("closeQuickEdit")},openCardEdit(){if(this.isQuickEdit.boolean)return;const s=this.$router.currentRoute._value.fullPath;this.$router.push(`${s}/edit/${this.card.id}`)},toggleLabelTitle(){this.$store.commit({type:"toggleLabelTitle"})},calcProgress(){const s=this.card.checklists.reduce((e,n)=>{const a=n.todos.reduce((r,o)=>(o.isDone&&r++,r),0);return e.todosCount+=n.todos.length,e.doneTodos+=a,e},{todosCount:0,doneTodos:0});return s.todosCount===s.doneTodos?this.isChecklistDone=!0:this.isChecklistDone=!1,`${s.doneTodos}/${s.todosCount}`},openQuickEdit(){this.newTitle=JSON.parse(JSON.stringify(this.card.title)),this.$emit("openQuickEdit",this.card.id)},updateTitle(){if(!this.newTitle)return;const s=JSON.parse(JSON.stringify(this.card));s.title=this.newTitle,this.$store.dispatch({type:"updateCard",groupId:this.groupId,card:s}),this.$emit("closeQuickEdit")},openModal(s){this.cmpName=s},closeModal(){this.cmpName=null},updateKey(s,e){const n=JSON.parse(JSON.stringify(this.card));s==="checklists"?(e.id=utilService.makeId(),n[s].push(e)):n[s]=e,this.$store.dispatch({type:"updateCard",groupId:this.groupId,card:n})},async removeCard(){await this.$store.dispatch("removeCard",{groupId:this.groupId,cardId:this.cardId}),this.$emit("closeQuickEdit")}},computed:{labels(){var s=this.$store.getters.currBoard.labels;return s=s.filter(({className:e})=>e!=="color10"),s.filter(e=>this.card.labelIds.includes(e.id))},labelTitleShown(){return this.$store.getters.labelTitleShown?"open":""},doneChecklist(){return this.isChecklistDone?"completed":""},computedQuickEdit(){return this.isQuickEdit.boolean&&this.isQuickEdit.cardId===this.card.id?"quick-card-editor-open":""},checkQuickEdit(){return this.isQuickEdit.boolean&&this.isQuickEdit.cardId===this.card.id},members(){var s=this.$store.getters.currBoard.members;return s.filter(e=>this.card.memberIds.includes(e._id))}}},pi=t("div",{class:"card-preview-cover-color"},null,-1),hi={key:1,class:"card-preview-inside-container"},mi={key:0,class:"card-preview-cover"},_i=["src"],gi=["src"],vi={class:"card-label-container"},fi=["title"],bi={key:0},yi={key:2},Ci={key:4,class:"card-preview-title"},ki={class:"card-icons-container"},wi={key:0,title:"description",class:"icon-div"},Bi=t("span",{class:"desc"},null,-1),$i=[Bi],xi={key:1,title:"comments",class:"icon-div"},Ii=t("span",{class:"comment"},null,-1),Mi={class:"txt"},Si={key:2,title:"attachments",class:"icon-div"},Ti=t("span",{class:"attachment"},null,-1),Ai={class:"txt"},Ni=t("span",{class:"check"},null,-1),Oi={class:"txt"},Gi=["title"],Ei=["src"],Di={key:1};function Ui(s,e,n,a,r,o){const u=v("quick-edit-actions"),c=N("focus"),l=N("click-outside");return i(),d("section",null,[t("div",{onClick:e[8]||(e[8]=(..._)=>o.openCardEdit&&o.openCardEdit(..._)),class:f(["card-preview",o.computedQuickEdit])},[n.card.style.fullCover&&!o.checkQuickEdit?(i(),d("div",{key:0,style:A(`background: ${n.card.style.cover}`),class:"card-preview-full-cover"},[pi,t("span",null,m(n.card.title),1),t("span",{onClick:e[0]||(e[0]=x((..._)=>o.openQuickEdit&&o.openQuickEdit(..._),["stop"])),class:"edit-card"})],4)):(i(),d("div",hi,[n.card.style.cover?(i(),d("div",mi,[n.card.style.type==="url"?(i(),d("img",{key:0,class:"card-image",src:n.card.style.cover},null,8,_i)):(i(),d("div",{key:1,class:"card-preview-cover-color",style:A(`background-color: ${n.card.style.cover};`)},null,4))])):p("",!0),n.card.attachments.length&&!n.card.style.cover?(i(),d("img",{key:1,class:"card-image",src:n.card.attachments[0].url},null,8,gi)):p("",!0),t("div",vi,[(i(!0),d(C,null,w(o.labels,_=>(i(),d("span",{key:_.id,onClick:e[1]||(e[1]=x((...I)=>o.toggleLabelTitle&&o.toggleLabelTitle(...I),["stop"])),class:f([[_.className,o.labelTitleShown],"card-label"]),title:_.title},[o.labelTitleShown?(i(),d("span",bi,m(_.title),1)):p("",!0)],10,fi))),128))]),o.checkQuickEdit&&o.labels.length?(i(),d("br",yi)):p("",!0),t("span",{onClick:e[2]||(e[2]=x((..._)=>o.openQuickEdit&&o.openQuickEdit(..._),["stop"])),class:"edit-card"}),o.checkQuickEdit?b((i(),d("textarea",{key:3,style:A(o.labels.length?"transform: translateY(-9px)":"transform: translateY(3px);"),"onUpdate:modelValue":e[3]||(e[3]=_=>r.newTitle=_),onFocus:e[4]||(e[4]=_=>_.target.select()),onKeydown:e[5]||(e[5]=J(x((..._)=>o.updateTitle&&o.updateTitle(..._),["prevent"]),["enter"]))},null,36)),[[S,r.newTitle],[c]]):(i(),d("span",Ci,m(n.card.title),1)),t("div",ki,[t("div",null,[n.card.description?(i(),d("div",wi,$i)):p("",!0),n.card.comments.length?(i(),d("div",xi,[Ii,t("span",Mi,m(n.card.comments.length),1)])):p("",!0),n.card.attachments.length?(i(),d("div",Si,[Ti,t("span",Ai,m(n.card.attachments.length),1)])):p("",!0),n.card.checklists.length?(i(),d("div",{key:3,title:"Checklist items",class:f(["icon-div",o.doneChecklist])},[Ni,t("span",Oi,m(o.calcProgress()),1)],2)):p("",!0),(i(!0),d(C,null,w(o.members,_=>(i(),d("div",{class:"avatar-container",key:_.id,title:_.fullname},[_.imgUrl?(i(),d("img",{key:0,src:_.imgUrl,alt:""},null,8,Ei)):(i(),d("span",Di,m(_.fullname.split(" ")[0].split("")[0]+_.fullname.split(" ")[1].split("")[0]),1))],8,Gi))),128))])]),o.checkQuickEdit?(i(),d("button",{key:5,class:"save-quick-edit",onClick:e[6]||(e[6]=x((..._)=>o.updateTitle&&o.updateTitle(..._),["stop"]))},"Save")):p("",!0),y(u,{onMousedown:e[7]||(e[7]=x(()=>{},["stop"])),onOpenCard:o.openCard,onOpenModal:o.openModal,hidden:!o.checkQuickEdit,class:f(o.checkQuickEdit?"fade-in":"")},null,8,["onOpenCard","onOpenModal","hidden","class"]),r.cmpName&&o.checkQuickEdit?b((i(),M(W(r.cmpName),{key:6,card:n.card,onRemoveCard:o.removeCard,onCloseModal:o.closeModal,onUpdateKey:o.updateKey},null,8,["card","onRemoveCard","onCloseModal","onUpdateKey"])),[[l,()=>o.closeModal()]]):p("",!0)]))],2)])}var Ji=k(ui,[["render",Ui]]);const Li={name:"group-actions",props:{isSort:Boolean},data(){return{groupTitle:"",openCopyGroup:!1,openMoveGroup:!1,openMoveCards:!1,openSortCards:!1,currentGroups:this.$store.getters.currBoard.groups,chosenBoard:this.$store.getters.currBoard,groupPos:null}},methods:{addCard(){this.$emit("addCard")},removeGroup(){this.$emit("removeGroup")},copyGroup(){this.$emit("copyGroup",this.groupTitle),this.groupTitle=""},moveGroup(){const s=this.boards.find(e=>e._id===this.chosenBoard._id);this.$emit("moveGroup",s,this.groupPos)},moveAllCards(s){this.$emit("moveAllCards",s)},removeCards(){this.$emit("removeCards")},closeGrpAct(){this.$emit("closeGrpAct")},sortBy(s){this.$emit("sortBy",s)}},computed:{boards(){return this.$store.getters.boards}},components:{}},Pi={class:"group-actions"},ji={class:"grp-act-header"},Qi=t("p",null,"List actions",-1),Vi=t("i",{class:"fa-solid fa-xmark"},null,-1),Hi=[Vi],Ri={key:0},Fi=t("a",null,"Add card...",-1),Ki=[Fi],qi=t("a",null,"Copy list...",-1),Wi=[qi],zi=t("a",null,"Move list...",-1),Yi=[zi],Xi={key:0},Zi=t("a",null,"Sort By...",-1),ea=[Zi],ta=t("hr",null,null,-1),sa=t("a",null,"Move all cards in this list...",-1),oa=[sa],ra=t("a",null,"Remove all cards in this list...",-1),na=[ra],la=t("hr",null,null,-1),ia=t("a",null,"Remove this list",-1),aa=[ia],da={key:1,class:"copy-group"},ca={key:2,class:"move-group"},ua={class:"board-info"},pa=t("p",null,"Board",-1),ha=["value"],ma={class:"board-info"},_a=t("p",null,"Position",-1),ga=["value"],va=t("button",null,"Save",-1),fa={key:3},ba=["onClick"],ya={key:4},Ca={class:"sort"};function ka(s,e,n,a,r,o){const u=N("focus");return i(),d("section",Pi,[t("div",ji,[Qi,t("span",{onClick:e[0]||(e[0]=(...c)=>o.closeGrpAct&&o.closeGrpAct(...c))},Hi)]),!r.openCopyGroup&&!r.openMoveGroup&&!r.openMoveCards&&!r.openSortCards?(i(),d("div",Ri,[t("ul",null,[t("li",{onClick:e[1]||(e[1]=(...c)=>o.addCard&&o.addCard(...c))},Ki),t("li",{onClick:e[2]||(e[2]=x(c=>r.openCopyGroup=!0,["stop"]))},Wi),t("li",{onClick:e[3]||(e[3]=x(c=>r.openMoveGroup=!0,["stop"]))},Yi)]),t("ul",null,[n.isSort?(i(),d("hr",Xi)):p("",!0),n.isSort?(i(),d("li",{key:1,onClick:e[4]||(e[4]=x(c=>r.openSortCards=!0,["stop"]))},ea)):p("",!0),ta]),t("ul",null,[t("li",{onClick:e[5]||(e[5]=x(c=>r.openMoveCards=!0,["stop"]))},oa),t("li",{onClick:e[6]||(e[6]=(...c)=>o.removeCards&&o.removeCards(...c))},na)]),t("ul",null,[la,t("li",{onClick:e[7]||(e[7]=(...c)=>o.removeGroup&&o.removeGroup(...c))},aa)])])):p("",!0),r.openCopyGroup?(i(),d("div",da,[b(t("input",{"onUpdate:modelValue":e[8]||(e[8]=c=>r.groupTitle=c),type:"text",placeholder:"Enter list title"},null,512),[[u],[S,r.groupTitle]]),t("button",{onClick:e[9]||(e[9]=(...c)=>o.copyGroup&&o.copyGroup(...c))},"Create list")])):p("",!0),r.openMoveGroup?(i(),d("div",ca,[t("form",{onSubmit:e[12]||(e[12]=x((...c)=>o.moveGroup&&o.moveGroup(...c),["prevent"]))},[t("label",null,[t("div",ua,[pa,t("p",null,m(r.chosenBoard.title),1),b(t("select",{"onUpdate:modelValue":e[10]||(e[10]=c=>r.chosenBoard=c)},[(i(!0),d(C,null,w(o.boards,c=>(i(),d("option",{key:c._id,value:c},m(c.title),9,ha))),128))],512),[[ee,r.chosenBoard]])])]),t("label",null,[t("div",ma,[_a,t("p",null,m(r.groupPos+1),1),b(t("select",{"onUpdate:modelValue":e[11]||(e[11]=c=>r.groupPos=c)},[(i(!0),d(C,null,w(r.chosenBoard.groups,(c,l)=>(i(),d("option",{key:c,value:l},m(l+1),9,ga))),128))],512),[[ee,r.groupPos]])])]),va],32)])):p("",!0),r.openMoveCards?(i(),d("div",fa,[t("ul",null,[(i(!0),d(C,null,w(r.currentGroups,c=>(i(),d("li",{onClick:l=>o.moveAllCards(c),key:c.id},m(c.title),9,ba))),128))])])):p("",!0),r.openSortCards?(i(),d("div",ya,[t("ul",Ca,[t("li",{onClick:e[13]||(e[13]=c=>o.sortBy("createdNew"))},"Date created (newest first)"),t("li",{onClick:e[14]||(e[14]=c=>o.sortBy("createdOld"))},"Date created (oldest first)"),t("li",{onClick:e[15]||(e[15]=c=>o.sortBy("name"))},"Card name (alphabetically)"),t("li",{onClick:e[16]||(e[16]=c=>o.sortBy("dueDate"))},"Due date")])])):p("",!0)])}var wa=k(Li,[["render",ka]]);const _e=(s,e)=>{const{removedIndex:n,addedIndex:a,payload:r}=e;if(n===null&&a===null)return s;const o=[...s];let u=r;return n!==null&&(u=o.splice(n,1)[0]),a!==null&&o.splice(a,0,u),o},Ba={name:"group",props:{group:Object},components:{cardPreview:Ji,groupActions:wa,Container:ne,Draggable:le},created(){},data(){return{isAddCard:!1,groupTitle:JSON.parse(JSON.stringify(this.group.title)),cardTitle:"",editTitle:!1,openGrpAct:!1,isQuickEdit:{boolean:!1,cardId:""}}},methods:{addCard(){!this.cardTitle||(this.$store.dispatch({type:"addCard",groupId:this.group.id,title:this.cardTitle}),this.cardTitle="")},actionAdd(){this.isAddCard=!0,this.openGrpAct=!1},removeGroup(){this.$store.dispatch({type:"removeGroup",groupId:this.group.id}),this.openGrpAct=!1},removeCard(s){this.$store.dispatch({type:"removeCard",groupId:this.group.id,cardId:s})},onCardDrop(s,e){const n=Object.assign({},JSON.parse(JSON.stringify(s)));n.cards=_e(n.cards,e),this.$emit("onCardDrop",{cards:n.cards,groupId:n.id})},copyGroup(s){this.openGrpAct=!1;const e=this.board.groups.findIndex(a=>a.id===this.group.id),n=JSON.parse(JSON.stringify(this.group));n.title=s,n.id=U.makeId,this.board.groups.splice(e+1,0,n),this.$store.dispatch({type:"saveBoard",board:this.board})},async moveGroup(s,e){this.openGrpAct=!1,s.groups.splice(e,0,JSON.parse(JSON.stringify(this.group))),await this.$store.dispatch({type:"saveBoard",board:s});const n=this.board.groups.findIndex(a=>a.id===this.group.id);this.board.groups.splice(n,1),this.$store.dispatch({type:"saveBoard",board:this.board})},moveAllCards(s){this.openGrpAct=!1;const e=JSON.parse(JSON.stringify(this.group)),n=JSON.parse(JSON.stringify(this.group.cards));s.cards.push(...n),e.cards=[];const a=this.board.groups.findIndex(o=>o.id===e.id);this.board.groups.splice(a,1,e);const r=this.board.groups.findIndex(o=>o.id===s.id);this.board.groups.splice(r,1,s),this.$store.dispatch({type:"saveBoard",board:this.board})},removeCards(){const s=JSON.parse(JSON.stringify(this.group));s.cards=[];const e=this.board.groups.findIndex(n=>n.id===this.group.id);this.board.groups[e]=s,this.$store.dispatch({type:"saveBoard",board:this.board})},closeQuickEdit(){this.isQuickEdit.boolean=!1,this.isQuickEdit.cardId=""},openQuickEdit(s){this.isQuickEdit.boolean=!0,this.isQuickEdit.cardId=s},getChildPayload(s){return this.group.cards[s]},changeGrpTitle(){const s=JSON.parse(JSON.stringify(this.group));s.title=this.groupTitle;const e=this.board.groups.findIndex(n=>n.id===this.group.id);this.board.groups.splice(e,1,s),this.$store.dispatch({type:"saveBoard",board:this.board}),this.editTitle=!1},sortCards(s){this.openGrpAct=!1,console.log("sortBy",sortBy);var e={type:"sort",sortBy:s};this.$store.dispatch({type:"filterBoard",boardId:this.board._id,filterBy:e})}},computed:{board(){return this.$store.getters.currBoard},computedQuickEdit(){return this.isQuickEdit.boolean?"quick-card-editor":""}}},$a={class:"group-preview"},xa={class:"group-header-container"},Ia={key:0,class:"add-card-container"},Ma={class:"add-card-actions"},Sa=t("i",{class:"fa-solid fa-xmark"},null,-1),Ta=[Sa],Aa=t("div",{class:"add-card-btn"},[t("i",{class:"fa-solid fa-plus"}),t("span",null,"Add a card")],-1),Na=[Aa];function Oa(s,e,n,a,r,o){const u=v("group-actions"),c=v("card-preview"),l=v("Draggable"),_=v("Container"),I=N("click-outside"),j=N("focus");return i(),d("section",$a,[t("div",null,[t("div",xa,[r.editTitle?p("",!0):(i(),d("p",{key:0,class:"group-title",onClick:e[0]||(e[0]=B=>r.editTitle=!0)},m(n.group.title),1)),r.editTitle?b((i(),d("input",{key:1,onKeyup:e[1]||(e[1]=J((...B)=>o.changeGrpTitle&&o.changeGrpTitle(...B),["enter"])),onFocus:e[2]||(e[2]=B=>B.target.select()),"onUpdate:modelValue":e[3]||(e[3]=B=>r.groupTitle=B)},null,544)),[[I,o.changeGrpTitle],[j],[S,r.groupTitle]]):p("",!0),t("span",{class:"act-btn",onClick:e[4]||(e[4]=B=>r.openGrpAct=!r.openGrpAct)}),r.openGrpAct?b((i(),M(u,{key:2,isSort:n.group.cards.length>1,onCloseGrpAct:e[5]||(e[5]=B=>r.openGrpAct=!1),onRemoveCards:o.removeCards,onMoveAllCards:o.moveAllCards,onMoveGroup:o.moveGroup,onCopyGroup:o.copyGroup,onRemoveGroup:o.removeGroup,onAddCard:o.actionAdd,onSortCards:o.sortCards},null,8,["isSort","onRemoveCards","onMoveAllCards","onMoveGroup","onCopyGroup","onRemoveGroup","onAddCard","onSortCards"])),[[I,()=>r.openGrpAct=!1]]):p("",!0)]),y(_,{class:"card-preview-container",onDrop:e[10]||(e[10]=B=>o.onCardDrop(n.group,B)),"group-name":"1","get-child-payload":o.getChildPayload},{default:h(()=>[(i(!0),d(C,null,w(n.group.cards,B=>(i(),M(l,{key:B.id},{default:h(()=>[y(c,{onOpenQuickEdit:o.openQuickEdit,onCloseQuickEdit:o.closeQuickEdit,groupId:n.group.id,isQuickEdit:r.isQuickEdit,card:B},null,8,["onOpenQuickEdit","onCloseQuickEdit","groupId","isQuickEdit","card"])]),_:2},1024))),128)),r.isAddCard?(i(),d("div",Ia,[b(t("textarea",{onKeyup:e[6]||(e[6]=J((...B)=>o.addCard&&o.addCard(...B),["enter"])),class:"add-card-textarea","onUpdate:modelValue":e[7]||(e[7]=B=>r.cardTitle=B),placeholder:"Enter a title for this card..."},null,544),[[I,()=>o.addCard()],[j],[S,r.cardTitle]]),t("div",Ma,[t("button",{onClick:e[8]||(e[8]=(...B)=>o.addCard&&o.addCard(...B))},"Add card"),t("span",{onClick:e[9]||(e[9]=B=>r.isAddCard=!1)},Ta)])])):p("",!0)]),_:1},8,["get-child-payload"]),r.isAddCard?p("",!0):(i(),d("div",{key:0,class:"open-card-container",onClick:e[11]||(e[11]=B=>r.isAddCard=!0)},Na))]),r.isQuickEdit.boolean?(i(),d("div",{key:0,name:"quick-card-editor",onMousedown:e[12]||(e[12]=x(()=>{},["stop"])),onClick:e[13]||(e[13]=x(B=>r.isQuickEdit.boolean=!1,["stop"])),class:f(o.computedQuickEdit)},null,34)):p("",!0)])}var Ga=k(Ba,[["render",Oa]]);const Ea={name:"",data(){return{openChangeBg:!1,images:null,colors:this.$store.getters.boardColors,search:"",openChangeImg:!1,openChangeColor:!1}},created(){this.searchImages("nature")},methods:{async searchImages(s){const e=await Q.getBgImages(s);console.log("images.photos.results",e.photos.results),this.images=e.photos.results},async onUploadImg(s){const e=await Q.uploadImg(s);this.$emit("setBoardBg",e.url)},setBoardBg(s){this.$emit("setBoardBg",s)},setBoardClr(s){this.$emit("setBoardClr",s)},closeModal(){this.$emit("closeMenu")}},computed:{},components:{imgService:Q,customModal:G}},O=s=>(ie("data-v-9a8f7f22"),s=s(),ae(),s),Da=O(()=>t("p",{class:"header-title"},"Menu",-1)),Ua={key:0},Ja={class:"menu-options"},La=O(()=>t("li",null,[t("i",{class:"fa-brands fa-trello"}),g(),t("a",null,"About this board")],-1)),Pa=O(()=>t("i",{class:"fa-solid fa-image"},null,-1)),ja=g(),Qa=O(()=>t("a",null,"Change background",-1)),Va=[Pa,ja,Qa],Ha=O(()=>t("hr",null,null,-1)),Ra=O(()=>t("ul",{class:"menu-options"},[t("li",null,[t("i",{class:"fa-solid fa-list-ul"}),g(),t("a",{class:"activity"},"Activity")])],-1)),Fa={key:0,class:"bg-choose"},Ka={class:"bg-choose-top"},qa=O(()=>t("img",{src:"https://res.cloudinary.com/trellox/image/upload/v1648369955/background_ffsmh3.jpg",alt:"background image picker"},null,-1)),Wa=O(()=>t("p",null,"Photos",-1)),za=[qa,Wa],Ya=O(()=>t("img",{src:"https://res.cloudinary.com/trellox/image/upload/v1648369959/colors_ucac3l.jpg",alt:"color picker"},null,-1)),Xa=O(()=>t("p",null,"Colors",-1)),Za=[Ya,Xa],ed=O(()=>t("hr",null,null,-1)),td=O(()=>t("h2",null,"Custom",-1)),sd={class:"bg-picker"},od={class:"custom-bg"},rd=O(()=>t("i",{class:"fa-solid fa-plus"},null,-1)),nd={key:0,class:"bg-choose-img"},ld={key:0,class:"bg-images"},id=["onClick"],ad=["src"],dd={key:0,class:"bg-choose-color"},cd={key:0,class:"bg-colors"},ud=["onClick"];function pd(s,e,n,a,r,o){const u=v("custom-modal");return i(),M(u,{class:"board-menu",onCloseModal:o.closeModal},{header:h(()=>[Da]),default:h(()=>[!r.openChangeBg&&!r.openChangeImg&&!r.openChangeColor?(i(),d("menu",Ua,[t("ul",Ja,[La,t("li",{onClick:e[0]||(e[0]=c=>r.openChangeBg=!0)},Va)]),Ha,Ra])):p("",!0),y(P,{name:"inside-menu"},{default:h(()=>[r.openChangeBg&&!r.openChangeImg&&!r.openChangeColor?(i(),d("div",Fa,[t("div",Ka,[t("div",{onClick:e[1]||(e[1]=c=>r.openChangeImg=!0),class:"bg-picker"},za),t("div",{onClick:e[2]||(e[2]=c=>r.openChangeColor=!0),class:"bg-picker"},Za)]),ed,td,t("div",sd,[t("div",od,[t("label",null,[rd,t("input",{type:"file",onChange:e[3]||(e[3]=(...c)=>o.onUploadImg&&o.onUploadImg(...c))},null,32)])])])])):p("",!0)]),_:1}),y(P,{name:"inside-menu"},{default:h(()=>[r.openChangeImg?(i(),d("div",nd,[b(t("input",{class:"custom-input",placeholder:"Photos",type:"text","onUpdate:modelValue":e[4]||(e[4]=c=>r.search=c),onInput:e[5]||(e[5]=c=>o.searchImages(r.search))},null,544),[[S,r.search]]),r.images?(i(),d("ul",ld,[(i(!0),d(C,null,w(r.images,c=>(i(),d("li",{key:c.id},[t("div",{onClick:l=>o.setBoardBg(c.urls.full)},[t("img",{src:c.urls.small},null,8,ad)],8,id)]))),128))])):p("",!0)])):p("",!0)]),_:1}),y(P,{name:"inside-menu"},{default:h(()=>[r.openChangeColor?(i(),d("div",dd,[r.images?(i(),d("ul",cd,[(i(!0),d(C,null,w(r.colors,c=>(i(),d("li",{key:c},[t("div",{onClick:l=>o.setBoardClr(c),class:"bg-color",style:A({"background-color":c})},null,12,ud)]))),128))])):p("",!0)])):p("",!0)]),_:1})]),_:1},8,["onCloseModal"])}var hd=k(Ea,[["render",pd],["__scopeId","data-v-9a8f7f22"]]);const md={components:{groupPreview:Ga,Container:ne,Draggable:le,appHeader:de,boardMenu:hd},data(){return{isAddGroup:!1,groupTitle:"",board:null,openMenu:!1,savingGroup:!1,lastBoard:null,groupsCount:0}},async created(){const{boardId:s}=this.$route.params;this.board=await this.$store.dispatch({type:"setCurrBoard",boardId:s})},methods:{async toggleStar(){const s=JSON.parse(JSON.stringify(this.board));s.isStarred=!s.isStarred,await this.$store.dispatch({type:"saveBoard",board:s}),this.board=s},async addGroup(){!this.groupTitle||(await this.$store.dispatch({type:"addGroup",title:this.groupTitle}),this.groupTitle="")},async onGroupDrop(s){try{const e=Object.assign({},this.board);e.groups=_e(e.groups,s),this.lastBoard=JSON.parse(JSON.stringify(this.board)),this.board=e,await this.$store.dispatch({type:"saveBoard",board:e})}catch(e){console.log("err",e),this.board=this.lastBoard}},async onCardDrop({cards:s,groupId:e}){try{const n=JSON.parse(JSON.stringify(this.board)),a=this.board.groups.findIndex(r=>r.id===e);n.groups[a].cards=s,this.groupsCount===0&&(this.lastBoard=JSON.parse(JSON.stringify(this.board))),this.board=n,this.groupsCount++,this.groupsCount===this.board.groups.length&&(await this.$store.dispatch({type:"saveBoard",board:n}),this.groupsCount=0)}catch(n){console.log("err",n),this.board=this.lastBoard}},setBoardBg(s){const e=JSON.parse(JSON.stringify(this.board));e.style.bgColor="",e.style.bgImgUrl=s,this.$store.dispatch({type:"saveBoard",board:e})},setBoardClr(s){console.log("boardClr",s);const e=JSON.parse(JSON.stringify(this.board));e.style.bgImgUrl="",e.style.bgColor=s,this.$store.dispatch({type:"saveBoard",board:e})},editBoardTitle(s){const e=JSON.parse(JSON.stringify(this.board));e.title=s.currentTarget.textContent,this.$store.dispatch({type:"saveBoard",board:e})}},computed:{boardFromStore(){return this.$store.getters.currBoard},members(){return this.$store.getters.currBoard.members}},watch:{boardFromStore:{handler(){this.board=this.boardFromStore},deep:!0}}},L=s=>(ie("data-v-62ba4858"),s=s(),ae(),s),_d={class:"board-view"},gd={class:"board-nav"},vd={class:"left-nav"},fd=L(()=>t("span",{class:"seperator"},"|",-1)),bd={class:"members-container"},yd=["title"],Cd=["src"],kd={key:1},wd=L(()=>t("button",{class:"invite"},"Invite",-1)),Bd={class:"right-nav"},$d=L(()=>t("button",null,[t("i",{class:"fa-solid fa-filter"}),g(" Filter")],-1)),xd=L(()=>t("i",{class:"fa-solid fa-ellipsis"},null,-1)),Id=g(" Show menu"),Md=[xd,Id],Sd=L(()=>t("i",{class:"fa-solid fa-plus"},null,-1)),Td=L(()=>t("span",null,"Add another list",-1)),Ad=[Sd,Td],Nd={key:1,class:"add-group-container"},Od={class:"add-group-actions"},Gd=L(()=>t("i",{class:"fa-solid fa-xmark"},null,-1)),Ed=[Gd];function Dd(s,e,n,a,r,o){const u=v("app-header"),c=v("board-menu"),l=v("group-preview"),_=v("Draggable"),I=v("Container"),j=v("router-view"),B=N("focus");return r.board?(i(),d("section",{key:0,class:"board-wrapper",style:A({"background-image":"url("+r.board.style.bgImgUrl+")","background-color":r.board.style.bgColor})},[y(u,{class:"board-header"}),t("div",_d,[t("nav",gd,[t("div",vd,[t("h2",{onInput:e[0]||(e[0]=(...$)=>o.editBoardTitle&&o.editBoardTitle(...$)),contenteditable:!0},m(r.board.title),33),t("button",{class:f(["star",{full:r.board.isStarred}]),onClick:e[1]||(e[1]=$=>o.toggleStar())},null,2),fd,t("div",bd,[(i(!0),d(C,null,w(o.members,$=>(i(),d("div",{class:"avatar-container",key:$.id,title:$.fullname},[$.imgUrl?(i(),d("img",{key:0,src:$.imgUrl,alt:""},null,8,Cd)):(i(),d("span",kd,m($.fullname.split(" ")[0].split("")[0]+$.fullname.split(" ")[1].split("")[0]),1))],8,yd))),128))]),wd]),t("div",Bd,[$d,t("button",{onClick:e[2]||(e[2]=$=>r.openMenu=!r.openMenu)},Md)])]),y(P,{name:"menu"},{default:h(()=>[r.openMenu?(i(),M(c,{key:0,onCloseMenu:e[3]||(e[3]=$=>r.openMenu=!1),onSetBoardClr:o.setBoardClr,onSetBoardBg:o.setBoardBg},null,8,["onSetBoardClr","onSetBoardBg"])):p("",!0)]),_:1}),y(I,{"drag-class":"on-dragging",orientation:"horizontal",class:"group-container",onDrop:e[9]||(e[9]=$=>o.onGroupDrop($))},{default:h(()=>[(i(!0),d(C,null,w(r.board.groups,$=>(i(),M(_,{key:$.id},{default:h(()=>[y(l,{group:$,onOnCardDrop:o.onCardDrop},null,8,["group","onOnCardDrop"])]),_:2},1024))),128)),r.isAddGroup?(i(),d("div",Nd,[b(t("input",{onKeyup:e[5]||(e[5]=J((...$)=>o.addGroup&&o.addGroup(...$),["enter"])),"onUpdate:modelValue":e[6]||(e[6]=$=>r.groupTitle=$),type:"text",placeholder:"Enter list title..."},null,544),[[S,r.groupTitle],[B]]),t("div",Od,[t("button",{onClick:e[7]||(e[7]=(...$)=>o.addGroup&&o.addGroup(...$))},"Add list"),t("span",{onClick:e[8]||(e[8]=$=>r.isAddGroup=!1)},Ed)])])):(i(),d("div",{key:0,class:"open-group-container",onClick:e[4]||(e[4]=$=>r.isAddGroup=!0)},Ad))]),_:1}),y(j)])],4)):p("",!0)}var Ud=k(md,[["render",Dd],["__scopeId","data-v-62ba4858"]]);const ge=we({history:Be("/"),routes:[{path:"/",name:"home",component:We},{path:"/login",name:"login",component:it},{path:"/signup",name:"signup",component:bt},{path:"/workspace",name:"workspace",component:mo},{path:"/board/:boardId",name:"board",component:Ud,children:[{path:"edit/:cardId",component:me}]}]});var Jd={state:{boards:null,filterBy:null,currBoard:null,labelTitleShown:!1,labelColors:["color0","color1","color2","color3","color4","color5","color6","color7","color8","color9","color10"],imagePicker:["https://images.unsplash.com/photo-1483728642387-6c3bdd6c93e5?crop=entropy&cs=srgb&fm=jpg&ixid=MnwzMTI4NzN8MHwxfHNlYXJjaHw0fHxtb3VudGFpbnxlbnwwfHx8fDE2NDgyMjMxMjg&ixlib=rb-1.2.1&q=85","https://images.unsplash.com/photo-1480497490787-505ec076689f?ixlib=rb-1.2.1&q=85&fm=jpg&crop=entropy&cs=srgb","https://images.unsplash.com/photo-1454496522488-7a8e488e8606?crop=entropy&cs=srgb&fm=jpg&ixid=MnwzMTI4NzN8MHwxfHNlYXJjaHwzfHxtb3VudGFpbnxlbnwwfHx8fDE2NDgyMjMxMjg&ixlib=rb-1.2.1&q=85","https://images.unsplash.com/photo-1433477155337-9aea4e790195?ixlib=rb-1.2.1&q=85&fm=jpg&crop=entropy&cs=srgb"],boardColors:["#0079bf","#d29034","#519839","#b04632","#89609e","#cd5a91","#4bbf6b","#00aecc"],coverColors:["#7BC86C","#F5DD29","#FFAF3F","#EF7564","#CD8DE5","#5BA4CF","#29CCE5","#6DECA9","#FF8ED4","#172B4D"],coverImages:["https://images.unsplash.com/photo-1499750310107-5fef28a66643?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=2070&q=80","https://images.unsplash.com/photo-1500673922987-e212871fec22?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1170&q=80","https://images.unsplash.com/photo-1486870591958-9b9d0d1dda99?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1170&q=80","https://images.unsplash.com/photo-1518655048521-f130df041f66?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1170&q=80","https://images.unsplash.com/photo-1463584954611-9d8ebd80dfd2?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1170&q=80","https://images.unsplash.com/photo-1483835724473-d69ca66efb25?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1170&q=80"]},getters:{boards(s){return JSON.parse(JSON.stringify(s.boards))},currBoard(s){return JSON.parse(JSON.stringify(s.currBoard))},labelTitleShown(s){return s.labelTitleShown},imagePicker(s){return s.imagePicker},boardColors(s){return s.boardColors},labelColors(s){return JSON.parse(JSON.stringify(s.labelColors))},coverColors(s){return JSON.parse(JSON.stringify(s.coverColors))},coverImages(s){return JSON.parse(JSON.stringify(s.coverImages))}},mutations:{setBoards(s,{boards:e}){s.boards=e},setCurrBoard(s,{board:e}){s.currBoard=e},toggleLabelTitle(s){s.labelTitleShown=!s.labelTitleShown},removeBoard(s,{id:e}){const n=s.boards.findIndex(a=>a._id===e);s.boards.splice(n,1)},saveBoard(s,{board:e}){const n=s.boards.findIndex(a=>a._id===e._id);console.log("idx",n),console.log("board._id",e._id),n!==-1?(e._id===s.currBoard._id&&(s.currBoard=e),s.boards.splice(n,1,e)):s.boards.push(e)},addGroup(s,{emptyGroup:e}){s.currBoard.groups.push(e)}},actions:{async loadBoards({commit:s,state:e}){try{var n=await T.query();s({type:"setBoards",boards:n}),K.off(te),K.on(te,a=>{s({type:"saveBoard",board:a})})}catch(a){throw console.error("Cannot Load boards",a),a}},async setCurrBoard({commit:s},{boardId:e}){try{const n=await T.getBoardById(e);return s({type:"setCurrBoard",board:n}),n}catch(n){throw console.log("Cannot find board",n),n}},async removeBoard({commit:s},{id:e}){try{var e=await T.removeBoard(e);s({type:"removeBoard",id:e})}catch(n){throw console.error("Cannot remove board",n),n}},async saveBoard({commit:s},{board:e}){try{var e=await T.updateBoard(e);s({type:"saveBoard",board:e})}catch(n){throw console.error("Cannot Edit/Add board",n),n}},async filterBoard({commit:s},{boardId:e,filterBy:n}){try{const a=await T.getBoardById(e,n);s({type:"saveBoard",board:a})}catch(a){throw console.log("Cannot find card",a),a}},async addGroup({commit:s,state:e},{title:n}){try{const a=await E.addGroup(e.currBoard._id,n);console.log("store addGroup board",a),s({type:"saveBoard",board:a})}catch(a){throw console.log("Cannot add group",a),a}},async addCard({commit:s,state:e},{groupId:n,title:a}){try{const r=await E.addCard(e.currBoard._id,n,a);s({type:"saveBoard",board:r})}catch(r){throw console.log("Cannot add card",r),r}},async removeGroup({commit:s,state:e},{groupId:n}){try{const a=await E.removeGroup(e.currBoard._id,n);s({type:"saveBoard",board:a})}catch(a){throw console.log("Cannot remove group",a),a}},async removeCard({commit:s,state:e},{groupId:n,cardId:a}){try{const r=await E.removeCard(e.currBoard._id,n,a);s({type:"saveBoard",board:r})}catch(r){throw console.log("Cannot remove group",r),r}},async updateCard({commit:s,state:e},{groupId:n,card:a}){try{const r=await E.updateCard(e.currBoard._id,n,a);s({type:"saveBoard",board:r})}catch(r){throw console.log("Cannot update card",r),r}},async getCardById({commit:s},{boardId:e,cardId:n}){try{return await E.getCardById(e,n)}catch(a){throw console.log("Cannot find card",a),a}}}};const z="loggedinUser",R={login:Ld,signup:Pd,logout:jd,getLoggedinUser:Qd};async function Ld(s){const e=await D.post("auth/login",s);if(e)return ve(e)}async function Pd(s){const e=await D.post("auth/signup",s);return ve(e)}async function jd(){return sessionStorage.removeItem(z),await D.post("auth/logout")}function ve(s){return sessionStorage.setItem(z,JSON.stringify(s)),s}function Qd(){return JSON.parse(sessionStorage.getItem(z)||"null")}var Vd={state:{loggedinUser:R.getLoggedinUser()},getters:{loggedinUser({loggedinUser:s}){return s}},mutations:{setLoggedinUser(s,{user:e}){s.loggedinUser=e?Z({},e):null}},actions:{async login({commit:s},{userCred:e}){try{const n=await R.login(e);return s({type:"setLoggedinUser",user:n}),n}catch(n){throw console.log("cannot set user",n),n}},async logout({commit:s}){try{await R.logout(),s({type:"setLoggedinUser",user:null})}catch(e){console.log("logout failed",e)}},async signup({commit:s},{userCred:e}){try{const n=await R.signup(e);s({type:"setLoggedinUser",user:n})}catch(n){throw console.log("signup failed",n),n}}}};const Hd=$e({strict:!0,state:{isLoading:!1},getters:{isLoading(s){return s.isLoading}},mutations:{setIsLoading(s,{isLoading:e}){s.isLoading=e}},actions:{},modules:{boardModules:Jd,userModules:Vd}});const Rd={mounted:s=>{s.focus()}},Fd={beforeMount(s,e,n){s.clickOutsideEvent=a=>{s===a.target||s.contains(a.target)||e.value(a,s)},window.requestAnimationFrame(()=>{document.addEventListener("click",s.clickOutsideEvent)})},unmounted(s){document.removeEventListener("click",s.clickOutsideEvent)}},V=xe(Ne);V.directive("focus",Rd);V.directive("click-outside",Fd);V.use(ge);V.use(Hd);V.mount("#app");
