var we=Object.defineProperty;var se=Object.getOwnPropertySymbols;var Be=Object.prototype.hasOwnProperty,xe=Object.prototype.propertyIsEnumerable;var oe=(s,e,n)=>e in s?we(s,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):s[e]=n,re=(s,e)=>{for(var n in e||(e={}))Be.call(e,n)&&oe(s,n,e[n]);if(se)for(var n of se(e))xe.call(e,n)&&oe(s,n,e[n]);return s};import{l as $e,c as B,r as f,o as l,a,b as t,d as I,w as _,t as m,e as v,T as j,f as G,g as b,h as g,v as M,i as T,j as h,F as le,n as x,k as y,m as q,p as ie,q as k,s as C,u as X,_ as Me,x as Ie,y as H,z as P,C as ae,D as de,A as Z,B as ee,E as Se,G as Te,H as Ae,I as De,J as Ue}from"./vendor.bba98bf7.js";const Ne=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const p of r.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&i(p)}).observe(document,{childList:!0,subtree:!0});function n(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerpolicy&&(r.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?r.credentials="include":o.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(o){if(o.ep)return;o.ep=!0;const r=n(o);fetch(o.href,r)}};Ne();const ne="board-changed",Oe="",Y=Ge();Y.setup();function Ge(){var s=null;return{async setup(){s=$e(Oe)},on(n,i){s.on(n,i)},off(n,i=null){!s||(i?s.off(n,i):s.removeAllListeners(n))},emit(n,i){s.emit(n,i)},terminate(){s=null}}}var w=(s,e)=>{const n=s.__vccOpts||s;for(const[i,o]of e)n[i]=o;return n};const Le={methods:{test(){console.log("hi")}},created(){this.$store.dispatch("loadBoards")},components:{}};function Ee(s,e,n,i,o,r){const p=f("router-view");return l(),B(p)}var Je=w(Le,[["render",Ee]]);const Pe={name:"app header",data(){return{}},methods:{async logout(){try{await this.$store.dispatch("logout")}catch(s){console.log(s)}}},created(){window.onscroll=function(){var s=document.getElementById("header");window.scrollY>10?(s.style.backgroundColor="white",s.style.boxShadow="0px 3px 3px 0px rgba(0,0,0,0.3)"):(s.style.backgroundColor="",s.style.boxShadow="")}},computed:{member(){return this.$store.getters.loggedinUser}},components:{}},Ve={id:"header",class:"home-header"},je=t("div",{class:"logo"},[t("span",null,[t("i",{class:"fa-brands fa-trello"})]),v(),t("h2",null,"Trellox")],-1),Fe={key:0,class:"guest-nav"},Qe=v("Log in"),Ke=v("Sign up"),He={key:1,class:"member-nav"};function Re(s,e,n,i,o,r){const p=f("router-link");return l(),a("header",Ve,[je,t("nav",null,[r.member?(l(),a("div",He,[t("a",{onClick:e[0]||(e[0]=(...c)=>r.logout&&r.logout(...c))},"Log out"),t("a",null,"Welcome "+m(r.member.fullname.split(" ")[0]),1)])):(l(),a("div",Fe,[I(p,{to:"/login"},{default:_(()=>[Qe]),_:1}),I(p,{to:"/signup"},{default:_(()=>[Ke]),_:1})]))])])}var qe=w(Pe,[["render",Re]]);const We={name:"home",data(){return{}},methods:{toWorkSpace(){this.$router.push("/workspace")}},computed:{},components:{homeHeader:qe}},ze={class:"home-wrapper"},Ye={class:"home-view main-layout"},Xe={class:"topside"},Ze=t("h1",null,"Trellox helps teams move work forward.",-1),et=t("p",null,"Collaborate, manage projects, and reach new productivity peaks. From high rises to the home office, the way your team works is unique\u2014accomplish it all with Trello.",-1),tt=v("Start now "),st=t("span",null,[t("i",{class:"fa-solid fa-arrow-right"})],-1),ot=[tt,st],rt=t("div",{class:"background"},null,-1),nt=t("div",{class:"middle"},[t("h1",null,"It\u2019s more than work. It\u2019s a way of working together."),t("p",null," It\u2019s more than work. It\u2019s a way of working together. Start with a Trello board, lists, and cards. Customize and expand with more features as your teamwork grows. Manage projects, organize tasks, and build team spirit\u2014all in one place. "),t("img",{src:"https://res.cloudinary.com/trellox/image/upload/v1648555830/board_esjncu.png"})],-1);function lt(s,e,n,i,o,r){const p=f("home-header");return l(),a("main",ze,[I(p),t("div",Ye,[t("div",Xe,[t("article",null,[Ze,et,t("button",{onClick:e[0]||(e[0]=(...c)=>r.toWorkSpace&&r.toWorkSpace(...c))},ot)]),rt]),nt])])}var it=w(We,[["render",lt]]);const at={name:"login-view",data(){return{failed:!1,loginCred:{email:"",password:""}}},methods:{async login(){(!this.loginCred.email||!this.loginCred.password)&&this.failedLog();try{await this.$store.dispatch({type:"login",userCred:this.loginCred}),this.$router.push("/workspace")}catch{this.failedLog()}},failedLog(){this.failed=!0,setTimeout(()=>{this.failed=!1},6e3)}},computed:{},components:{}},dt={class:"login-view"},ct=t("span",null,[t("i",{class:"fa-brands fa-trello"})],-1),ut=t("h2",null,"Trellox",-1),pt=[ct,ut],ht={class:"login-container"},mt={key:0,class:"failed"},_t=t("p",null,"Logged in failed. Please enter valid email or password.",-1),gt=[_t],vt=t("h3",null,"Log in to Trellox",-1),ft=t("hr",null,null,-1),yt=v("Sign up for an account");function bt(s,e,n,i,o,r){const p=f("router-link"),c=T("focus");return l(),a("section",dt,[t("div",{onClick:e[0]||(e[0]=d=>this.$router.push("/")),class:"logo"},pt),t("div",ht,[I(j,{name:"failed"},{default:_(()=>[o.failed?(l(),a("div",mt,gt)):h("",!0)]),_:1}),vt,t("form",{onKeyup:e[3]||(e[3]=G((...d)=>r.login&&r.login(...d),["enter"])),onSubmit:e[4]||(e[4]=b((...d)=>r.login&&r.login(...d),["prevent"])),class:"user-crad"},[g(t("input",{type:"email","onUpdate:modelValue":e[1]||(e[1]=d=>o.loginCred.email=d),placeholder:"Enter email"},null,512),[[c],[M,o.loginCred.email]]),g(t("input",{type:"password","onUpdate:modelValue":e[2]||(e[2]=d=>o.loginCred.password=d),placeholder:"Enter password"},null,512),[[M,o.loginCred.password]])],32),t("button",{onClick:e[5]||(e[5]=(...d)=>r.login&&r.login(...d)),class:"login-btn"},"Log in"),ft,I(p,{to:"/signup"},{default:_(()=>[yt]),_:1})])])}var kt=w(at,[["render",bt]]);const Ct={name:"",data(){return{failed:!1,signupCred:{email:"",username:"",password:"",fullname:""}}},methods:{async signup(){if((!this.signupCred.email||!this.signupCred.password||!this.signupCred.fullname)&&this.failedLog(),!(this.signupCred.fullname.split(" ").length<=1))try{this.signupCred.username=this.signupCred.fullname.split(" ").join("").toLowerCase(),await this.$store.dispatch({type:"signup",userCred:this.signupCred}),this.$router.push("/workspace")}catch{console.log("error")}},failedLog(){this.failed=!0,setTimeout(()=>{this.failed=!1},6e3)}},computed:{},components:{}},wt={class:"signup-view"},Bt=t("span",null,[t("i",{class:"fa-brands fa-trello"})],-1),xt=t("h2",null,"Trellox",-1),$t=[Bt,xt],Mt={class:"login-container"},It={key:0,class:"failed"},St=t("p",null,"Sign up failed. Please enter valid email or password.",-1),Tt=[St],At=t("h3",null,"Sign up to Trellox",-1),Dt=t("hr",null,null,-1),Ut=v("Already have an acount? Log in");function Nt(s,e,n,i,o,r){const p=f("router-link"),c=T("focus");return l(),a("section",wt,[t("div",{onClick:e[0]||(e[0]=d=>this.$router.push("/")),class:"logo"},$t),t("div",Mt,[I(j,{name:"failed"},{default:_(()=>[o.failed?(l(),a("div",It,Tt)):h("",!0)]),_:1}),At,t("form",{onKeyup:e[4]||(e[4]=G((...d)=>r.signup&&r.signup(...d),["enter"])),onSubmit:e[5]||(e[5]=b((...d)=>r.signup&&r.signup(...d),["prevent"])),class:"user-crad"},[g(t("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=d=>o.signupCred.fullname=d),placeholder:"Enter fullname"},null,512),[[c],[M,o.signupCred.fullname]]),g(t("input",{type:"email","onUpdate:modelValue":e[2]||(e[2]=d=>o.signupCred.email=d),placeholder:"Enter email"},null,512),[[M,o.signupCred.email]]),g(t("input",{type:"password","onUpdate:modelValue":e[3]||(e[3]=d=>o.signupCred.password=d),placeholder:"Enter password"},null,512),[[M,o.signupCred.password]])],32),t("button",{onClick:e[6]||(e[6]=(...d)=>r.signup&&r.signup(...d)),class:"login-btn"},"Sign up!"),Dt,I(p,{to:"/login"},{default:_(()=>[Ut]),_:1})])])}var Ot=w(Ct,[["render",Nt]]);const Gt={name:"board-preview",props:{board:Object},data(){return{color:null}},async created(){try{if(this.board.style.bgImgUrl){const s=new le;this.color=await s.getColorAsync(this.board.style.bgImgUrl)}}catch(s){console.log(s)}},methods:{linearGradient(){var s;return this.color?s=this.color.isDark?"0.1":"0.3":s="0.1",`linear-gradient(rgba(0, 0, 0, ${s}),rgba(0, 0, 0, ${s})), `},async toggleStar(){const s=JSON.parse(JSON.stringify(this.board));s.isStarred=!s.isStarred,await this.$store.dispatch({type:"saveBoard",board:s})}},computed:{},components:{}},Lt={class:"board-preview"},Et={class:"txt-on-borad-img"};function Jt(s,e,n,i,o,r){const p=f("router-link");return l(),a("section",Lt,[I(p,{to:"/board/"+n.board._id},{default:_(()=>[t("div",{style:x({"background-image":r.linearGradient()+"url("+n.board.style.bgImgUrl+")","background-color":n.board.style.bgColor}),class:"board-preview-container"},null,4),t("span",Et,m(n.board.title),1)]),_:1},8,["to"]),t("span",{class:y(["star",{full:n.board.isStarred}]),onClick:e[0]||(e[0]=c=>r.toggleStar())},null,2)])}var Pt=w(Gt,[["render",Jt]]);const Vt={props:{isFirstPage:{type:Boolean,default:!0}},created(){},data(){return{}},methods:{closeModal(){this.$emit("closeModal")},goBack(){this.$emit("goBack")}},computed:{},components:{},unmounted(){},emits:["closeModal","goBack"]},jt={class:"custom-modal-container"},Ft={class:"custom-modal-header"},Qt={class:"title"},Kt={class:"custom-modal-main"},Ht={class:"custom-modal-app-header"};function Rt(s,e,n,i,o,r){return l(),a("article",jt,[t("section",Ft,[n.isFirstPage?h("",!0):(l(),a("a",{key:0,onClick:e[0]||(e[0]=b((...p)=>r.goBack&&r.goBack(...p),["stop"])),class:"custom-back"})),t("span",Qt,[q(s.$slots,"header")]),t("a",{onClick:e[1]||(e[1]=b((...p)=>r.closeModal&&r.closeModal(...p),["stop"])),class:"custom-close"})]),t("section",Kt,[q(s.$slots,"default")]),t("section",Ht,[q(s.$slots,"main")])])}var U=w(Vt,[["render",Rt]]);const E={delay:Wt,getRandomInt:zt,makeId:Yt,makeAvatar:qt,getFormattedTime:Xt};function qt(s){s=s.split(" ");var e=(s.split(" ")[0].split("")[0]+s.split(" ")[1].split("")[0]).toUpperCases();return e.toUpperCases()}function Wt(s=1500){return new Promise(e=>{setTimeout(e,s)})}function zt(s,e){return s=Math.ceil(s),e=Math.floor(e),Math.floor(Math.random()*(e-s)+s)}function Yt(s=5){for(var e="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=0;i<s;i++)e+=n.charAt(Math.floor(Math.random()*n.length));return e}function Xt(s){const n=Date.now()-s;var i="",o;if(n<=5e3)i="just now";else if(n<=2e4)i="a few seconds ago";else if(n<=12e4)i="a minute ago";else if(n<=36e5)o=Math.floor(n/60/1e3),i=o+" minutes ago";else if(n<=72e5)i="a hour ago";else if(n<=864e5)o=Math.floor(n/60/60/1e3),i=o+" hours ago";else{s=new Date(s);const r=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],p=s.getMinutes(),c=s.getHours();i+=r[s.getMonth()]+" ",i+=s.getDate()+" at ",i+=c<10?"0"+c:c,i+=":",i+=p<10?"0"+p:p}return i}const Zt="/api/";var es=ie.create({withCredentials:!0});const J={get(s,e){return R(s,"GET",e)},post(s,e){return R(s,"POST",e)},put(s,e){return R(s,"PUT",e)},delete(s,e){return R(s,"DELETE",e)}};async function R(s,e="GET",n=null){try{return(await es({url:`${Zt}${s}`,method:e,data:n,params:e==="GET"?n:null})).data}catch(i){throw console.log(`Had Issues ${e}ing to the backend, endpoint: ${s}, with data:`,n),console.dir(i),i.response&&i.response.status===401&&be.push("/login"),i}}ie.defaults.withCredentials=!0;const D={query:ts,getBoardById:ss,removeBoard:os,updateBoard:rs};async function ts(s){return await J.get("board",s)}async function ss(s,e={type:"none"}){return await J.get(`board/${s}`,e)}async function os(s){return await J.delete(`board/${s}`)}async function rs(s){return s._id?await J.put(`board/${s._id}`,s):await J.post("board",s)}const te="loggedinUser",V={login:ls,signup:is,logout:as,getLoggedinUser:ds,getUsers:ns};async function ns(){return await J.get("user")}async function ls(s){const e=await J.post("auth/login",s);if(e)return ce(e)}async function is(s){const e=await J.post("auth/signup",s);return ce(e)}async function as(){return sessionStorage.removeItem(te),await J.post("auth/logout")}function ce(s){return sessionStorage.setItem(te,JSON.stringify(s)),s}function ds(){return JSON.parse(sessionStorage.getItem(te)||"null")}const L={getEmptyBoard:cs,addGroup:us,editGroup:ps,removeGroup:hs,addCard:ms,getCardById:_s,updateCard:gs,removeCard:vs};function cs(){return{title:"",recentlyViewed:Date.now(),isStarred:!1,createdBy:V.getLoggedinUser()||{},style:{bgImUrl:"",bgColor:""},labels:fs(),members:[V.getLoggedinUser()],groups:[W("Todo"),W("Doing"),W("Done")],activities:[],filterBy:{}}}async function us(s,e){try{var n=await D.getBoardById(s);return n.groups.push(W(e)),await D.updateBoard(n)}catch(i){throw i}}async function ps(s,e){try{var n=await D.getBoardById(s);const i=n.groups.findIndex(o=>o.id===e.id);return n.groups[i]=e,await D.updateBoard(n)}catch(i){throw i}}async function hs(s,e){try{var n=await D.getBoardById(s);const i=n.groups.findIndex(o=>o.id===e);return n.groups.splice(i,1)[0],await D.updateBoard(n)}catch(i){throw i}}async function ms(s,e,n){try{var i=await D.getBoardById(s);const o=i.groups.findIndex(r=>r.id===e);return i.groups[o].cards.push(ys(n)),await D.updateBoard(i)}catch(o){throw o}}async function _s(s,e){try{var n=await D.getBoardById(s),i=null;return n.groups.forEach(o=>{o.cards.forEach(r=>{r.id===e&&(i={groupId:o.id,card:r})})}),i}catch(o){throw o}}async function gs(s,e,n){try{const i=await D.getBoardById(s),o=i.groups.findIndex(p=>p.id===e),r=i.groups[o].cards.findIndex(p=>p.id===n.id);return i.groups[o].cards.splice(r,1,n),await D.updateBoard(i)}catch(i){throw console.log("Can not update card"),i}}async function vs(s,e,n){try{var i=await D.getBoardById(s);const o=i.groups.findIndex(p=>p.id===e),r=i.groups[o].cards.findIndex(p=>p.id===n);return i.groups[o].cards.splice(r,1)[0],await D.updateBoard(i)}catch(o){throw o}}function fs(){return[{id:"l101",title:"Copy Request",className:"color0"},{id:"l102",title:"One more step",className:"color1"},{id:"l103",title:"Priority",className:"color2"},{id:"l104",title:"Design Team",className:"color3"},{id:"l105",title:"Product Marketing",className:"color4"},{id:"l106",title:"Trello Tip",className:"color5"},{id:"l107",title:"Help",className:"color6"}]}function W(s=""){return{id:E.makeId(),title:s,cards:[]}}function ys(s=""){return{id:E.makeId(),title:s,status:"",description:"",dueDate:null,createdAt:Date.now(),attachments:[],checklists:[],comments:[],memberIds:[],labelIds:[],createdBy:V.getLoggedinUser()||{},style:{type:"",cover:"",fullCover:!1,isDark:!0}}}const bs={name:"",data(){return{newBoard:L.getEmptyBoard(),imagePicker:this.$store.getters.imagePicker,colorPicker:this.$store.getters.boardColors.slice(0,5)}},methods:{closeModal(){this.$emit("closeModal")},setBg(s){this.newBoard.style.bgColor="",this.newBoard.style.bgImgUrl=s},setColor(s){this.newBoard.style.bgImgUrl="",this.newBoard.style.bgColor=s},async createBoard(){const s=await this.$store.dispatch({type:"saveBoard",board:this.newBoard});console.log("board",s),this.$router.push(`/board/${s._id}`),this.newBoard=L.getEmptyBoard()}},created(){},computed:{},components:{customModal:U}},ks=v(" Create board "),Cs=t("img",{src:"https://res.cloudinary.com/trellox/image/upload/v1648370075/demo-board_kga9ov.svg",alt:"demo board"},null,-1),ws=[Cs],Bs={class:"background-picker"},xs=t("h4",null,"Background",-1),$s={class:"image-picker"},Ms=["onClick"],Is=["src"],Ss={class:"color-picker"},Ts=["onClick"],As=t("h4",{class:"board-title"},[v("Board title "),t("span",null,"*")],-1);function Ds(s,e,n,i,o,r){const p=f("custom-modal");return l(),B(p,{class:"board-add",onCloseModal:r.closeModal},{header:_(()=>[ks]),default:_(()=>[t("div",{style:x({"background-image":"url("+o.newBoard.style.bgImgUrl+")","background-color":o.newBoard.style.bgColor}),class:"demo-board"},ws,4),t("div",Bs,[xs,t("ul",$s,[(l(!0),a(C,null,k(o.imagePicker,c=>(l(),a("li",{onClick:d=>r.setBg(c),key:c},[t("img",{src:c,alt:"board background image"},null,8,Is)],8,Ms))),128))]),t("ul",Ss,[(l(!0),a(C,null,k(o.colorPicker,c=>(l(),a("li",{onClick:d=>r.setColor(c),key:c},[t("div",{class:"color",style:x({"background-color":c})},null,4)],8,Ts))),128))]),As,g(t("input",{"onUpdate:modelValue":e[0]||(e[0]=c=>o.newBoard.title=c),type:"text",placeholder:"Add board title"},null,512),[[M,o.newBoard.title]]),t("button",{onClick:e[1]||(e[1]=(...c)=>r.createBoard&&r.createBoard(...c))},"Create")])]),_:1},8,["onCloseModal"])}var Us=w(bs,[["render",Ds]]);const Ns={name:"board-list",props:{boards:Array,showCreate:Boolean},data(){return{openBoardCreation:!1,posLeft:null,posTop:null}},components:{boardPreview:Pt,boardAdd:Us},methods:{openCreateBoard(s){this.calcPosition(s.target.getBoundingClientRect()),this.openBoardCreation=!0},calcPosition(s){var{left:e,top:n}=s;const i=window.innerWidth;console.log("rect",s),i-e<500?this.posLeft=e-320:this.posLeft=e+160,this.posTop=n-350}},computed:{}},Os={class:"boards-area"},Gs={class:"boards-name"},Ls=t("span",{class:"icon"},null,-1),Es={class:"title"},Js={class:"board-list"},Ps={class:"boards"},Vs=t("section",{class:"board-preview new-board"},[t("div",{class:"board-preview-container"},[t("span",{class:"txt-on-borad-img"},"Create new board")])],-1),js=[Vs];function Fs(s,e,n,i,o,r){const p=f("board-preview"),c=f("board-add");return l(),a("section",Os,[t("div",Gs,[Ls,t("h3",Es,[q(s.$slots,"boards-name")])]),t("section",Js,[t("ul",Ps,[(l(!0),a(C,null,k(n.boards,d=>(l(),a("li",{key:d._id},[I(p,{board:d},null,8,["board"])]))),128)),n.showCreate?(l(),a("li",{key:0,onClick:e[0]||(e[0]=d=>r.openCreateBoard(d))},js)):h("",!0)]),o.openBoardCreation?(l(),B(c,{key:0,onCloseModal:e[1]||(e[1]=d=>o.openBoardCreation=!1),style:x(`top: ${o.posTop}px; left: ${o.posLeft}px`)},null,8,["style"])):h("",!0)])])}var Qs=w(Ns,[["render",Fs]]);const Ks={name:"user-modal",data(){return{}},methods:{},computed:{member(){return this.$store.getters.loggedinUser},checkMember(){return this.member?this.member.fullname.split(" ")[0].split("")[0]+this.member.fullname.split(" ")[1].split("")[0]:"G"},async logout(){this.$emit("logout")}},components:{customModal:U}},Hs=v(" Acount "),Rs={class:"member-container"},qs=["title"],Ws=["src"],zs={key:1},Ys={class:"member-details"},Xs=t("hr",null,null,-1),Zs={class:"member-options"},eo=t("li",null,"Activity",-1);function to(s,e,n,i,o,r){const p=f("custom-modal");return r.member?(l(),B(p,{key:0,class:"user-modal"},{header:_(()=>[Hs]),main:_(()=>{var c;return[t("div",Rs,[t("div",{class:"avatar-container",title:r.member?r.member.fullname:"Guest"},[(c=r.member)!=null&&c.imgUrl?(l(),a("img",{key:0,src:r.member.imgUrl,alt:""},null,8,Ws)):(l(),a("span",zs,m(r.checkMember),1))],8,qs),t("div",Ys,[t("h3",null,m(r.member.fullname),1),t("h5",null,m(r.member.email),1)])]),Xs,t("ul",Zs,[eo,t("li",{onClick:e[0]||(e[0]=(...d)=>r.logout&&r.logout(...d))},"Log out")])]}),_:1})):h("",!0)}var so=w(Ks,[["render",to]]);const oo={name:"",data(){return{}},components:{customModal:U},methods:{},computed:{boards(){return this.$store.getters.boards}}},ro=v(" Recent boards ");function no(s,e,n,i,o,r){const p=f("custom-modal");return l(),B(p,{class:"recent-modal"},{header:_(()=>[ro]),default:_(()=>[t("ul",null,[(l(!0),a(C,null,k(r.boards,c=>(l(),a("li",{key:c._id},m(c.title),1))),128))])]),_:1})}var lo=w(oo,[["render",no]]);const io={name:"",data(){return{}},components:{customModal:U},methods:{},computed:{starredBoards(){var s=this.$store.getters.boards;return s.filter(e=>e.isStarred)}}},ao=v(" Starred boards "),co={key:0},uo={key:1,class:"starred-container"},po=t("img",{src:"https://a.trellocdn.com/prgb/dist/images/starred-boards-menu/starred-board.cc47d0a8c646581ccd08.svg"},null,-1),ho=t("p",null,"Star important boards to access them quickly and easily.",-1),mo=[po,ho];function _o(s,e,n,i,o,r){const p=f("custom-modal");return l(),B(p,{class:"starred-modal"},{header:_(()=>[ao]),default:_(()=>[r.starredBoards.length?(l(),a("ul",co,[(l(!0),a(C,null,k(r.starredBoards,c=>(l(),a("li",{key:c._id},m(c.title),1))),128))])):(l(),a("div",uo,mo))]),_:1})}var go=w(io,[["render",_o]]);const vo={name:"",props:{posLeft:Number,posTop:Number},data(){return{openBoardCreation:!1,newBoard:L.getEmptyBoard(),imagePicker:this.$store.getters.imagePicker,colorPicker:this.$store.getters.boardColors.slice(0,5)}},methods:{closeModal(){this.$emit("closeModal")},setBg(s){this.newBoard.style.bgColor="",this.newBoard.style.bgImgUrl=s},setColor(s){this.newBoard.style.bgImgUrl="",this.newBoard.style.bgColor=s},async createBoard(){const s=await this.$store.dispatch({type:"saveBoard",board:this.newBoard});await this.$store.dispatch({type:"setCurrBoard",boardId:s._id}),this.$router.push(`/board/${s._id}`),this.newBoard=L.getEmptyBoard()}},computed:{},components:{customModal:U}},fo={class:"create-board-modal-container"},yo=v(" Create "),bo=t("h3",null,"Create Board",-1),ko=t("p",null,"A board is made up of cards ordered on lists. Use it to manage projects, track information, or organize anything.",-1),Co=[bo,ko],wo=t("li",{class:"template"},[t("h3",null,"Start with a template"),t("p",null,"Get started with a board template")],-1),Bo=v(" Create board "),xo=t("img",{src:"https://res.cloudinary.com/trellox/image/upload/v1648370075/demo-board_kga9ov.svg",alt:"demo board"},null,-1),$o=[xo],Mo={class:"background-picker"},Io=t("h4",null,"Background",-1),So={class:"image-picker"},To=["onClick"],Ao=["src"],Do={class:"color-picker"},Uo=["onClick"],No=t("h4",{class:"board-title"},[v("Board title "),t("span",null,"*")],-1);function Oo(s,e,n,i,o,r){const p=f("custom-modal");return l(),a("section",fo,[o.openBoardCreation?h("",!0):(l(),B(p,{key:0,onCloseModal:r.closeModal,class:"create-board-modal",style:x(`top: ${n.posTop}px; left: ${n.posLeft}px`)},{header:_(()=>[yo]),main:_(()=>[t("ul",null,[t("li",{onClick:e[0]||(e[0]=b(c=>o.openBoardCreation=!0,["stop"])),class:"create"},Co),wo])]),_:1},8,["onCloseModal","style"])),o.openBoardCreation?(l(),B(p,{key:1,onCloseModal:r.closeModal,class:"create-board-modal board-add",style:x(`top: ${n.posTop}px; left: ${n.posLeft}px`)},{header:_(()=>[Bo]),default:_(()=>[t("div",{style:x({"background-image":"url("+o.newBoard.style.bgImgUrl+")","background-color":o.newBoard.style.bgColor}),class:"demo-board"},$o,4),t("div",Mo,[Io,t("ul",So,[(l(!0),a(C,null,k(o.imagePicker,c=>(l(),a("li",{onClick:d=>r.setBg(c),key:c},[t("img",{src:c,alt:"board background image"},null,8,Ao)],8,To))),128))]),t("ul",Do,[(l(!0),a(C,null,k(o.colorPicker,c=>(l(),a("li",{onClick:d=>r.setColor(c),key:c},[t("div",{class:"color",style:x({"background-color":c})},null,4)],8,Uo))),128))]),No,g(t("input",{"onUpdate:modelValue":e[1]||(e[1]=c=>o.newBoard.title=c),type:"text",placeholder:"Add board title"},null,512),[[M,o.newBoard.title]]),t("button",{onClick:e[2]||(e[2]=(...c)=>r.createBoard&&r.createBoard(...c))},"Create")])]),_:1},8,["onCloseModal","style"])):h("",!0)])}var Go=w(vo,[["render",Oo]]);const Lo={name:"",data(){return{openCreate:!1,openUser:!1,cmpName:null,posLeft:null,posTop:null}},components:{userModal:so,recentModal:lo,createBoardModal:Go,starredModal:go},methods:{openModal(s,e){this.calcPosition(e.target.getBoundingClientRect()),this.cmpName=s},closeModal(){this.cmpName=null},async logout(){try{await this.$store.dispatch("logout"),this.$router.push("/")}catch(s){console.log(s)}},calcPosition(s){var{left:e}=s;const n=window.innerWidth;n-e<310&&(e=n-310),this.posTop=50,this.posLeft=e}},computed:{member(){return this.$store.getters.loggedinUser},checkMember(){return this.member?this.member.fullname.split(" ")[0].split("")[0]+this.member.fullname.split(" ")[1].split("")[0]:"G"}}},Eo={class:"app-header"},Jo={class:"left-header"},Po=t("i",{class:"fa-brands fa-trello"},null,-1),Vo=t("p",null,"Trellox",-1),jo=[Po,Vo],Fo=t("i",{class:"fa-solid fa-chevron-down"},null,-1),Qo=[Fo],Ko=t("i",{class:"fa-solid fa-chevron-down"},null,-1),Ho=[Ko],Ro={class:"right-header"},qo=t("label",null,[t("i",{class:"fa-solid fa-magnifying-glass"}),t("input",{type:"text",placeholder:"Search"})],-1),Wo=t("button",{class:"notifications"},[t("i",{class:"fa-solid fa-bell"})],-1),zo=["title"],Yo=["src"],Xo={key:1};function Zo(s,e,n,i,o,r){var c;const p=T("click-outside");return l(),a("header",Eo,[t("div",Jo,[t("div",{onClick:e[0]||(e[0]=d=>this.$router.push("/workspace")),class:"logo"},jo),t("button",{class:"workspace",onClick:e[1]||(e[1]=d=>this.$router.push("/workspace"))},"Workspace"),t("button",{class:"recent",onClick:e[2]||(e[2]=d=>r.openModal("recent-modal",d))},Qo),t("button",{class:"starred",onClick:e[3]||(e[3]=d=>r.openModal("starred-modal",d))},Ho),t("button",{onClick:e[4]||(e[4]=d=>r.openModal("create-board-modal",d))})]),t("div",Ro,[qo,Wo,t("div",{onClick:e[5]||(e[5]=d=>r.openModal("user-modal",d)),class:"avatar-container",title:r.member?r.member.fullname:"Guest"},[(c=r.member)!=null&&c.imgUrl?(l(),a("img",{key:0,src:r.member.imgUrl,alt:""},null,8,Yo)):(l(),a("span",Xo,m(r.checkMember),1))],8,zo)]),o.cmpName?g((l(),B(X(o.cmpName),{key:0,posLeft:o.posLeft,posTop:o.posTop,onCloseModal:r.closeModal,onLogout:r.logout,style:x(`top: ${o.posTop}px; left: ${o.posLeft}px`)},null,8,["posLeft","posTop","onCloseModal","onLogout","style"])),[[p,()=>r.closeModal()]]):h("",!0)])}var ue=w(Lo,[["render",Zo]]);const er={name:"workspace-view",components:{boardList:Qs,AppHeader:ue},data(){return{}},methods:{setCurrpage(s){this.currpage=s}},computed:{boards(){return this.$store.getters.boards},starredBoards(){var s=this.$store.getters.boards;return s.filter(e=>e.isStarred)},noneStarredBoards(){var s=this.$store.getters.boards;return s.filter(e=>!e.isStarred)}}},tr={class:"workspace-view"},sr={class:"workspace-wrapper"},or={class:"workspace-nav"},rr={class:"nav-options-top"},nr=t("span",{class:"board-icon icon"},null,-1),lr=t("span",{class:"view-name"},"Boards",-1),ir=t("span",{class:"home-icon icon"},null,-1),ar=t("span",{class:"view-name"},"Home",-1),dr={class:"board-list-container"},cr=v("Starred"),ur=v("Recently viewed"),pr=v("YOUR WORKSPACE");function hr(s,e,n,i,o,r){const p=f("app-header"),c=f("router-link"),d=f("board-list");return l(),a("section",tr,[I(p,{class:"workspace-header"}),t("div",sr,[t("nav",or,[t("div",rr,[I(c,{to:"/workspace",class:"active"},{default:_(()=>[nr,lr]),_:1}),I(c,{to:"/"},{default:_(()=>[ir,ar]),_:1})])]),t("div",dr,[I(d,{boards:r.starredBoards,showCreate:!1,class:"starred"},{"boards-name":_(()=>[cr]),_:1},8,["boards"]),I(d,{boards:r.noneStarredBoards,showCreate:!1,class:"recentlyViewed"},{"boards-name":_(()=>[ur]),_:1},8,["boards"]),I(d,{boards:r.boards,showCreate:!0,class:"yourWorkspace"},{"boards-name":_(()=>[pr]),_:1},8,["boards"])])])])}var mr=w(er,[["render",hr]]);const _r={props:{card:Object,posLeft:Number},components:{customModal:U},data(){return{labelIds:JSON.parse(JSON.stringify(this.card.labelIds)),newLabel:null,selectedColor:"color0",wantToDelete:!1,filterBy:""}},created(){},methods:{goBack(){this.newLabel=null},closeModal(){this.$emit("closeModal")},toggleLabel(s){const e=this.labelIds.findIndex(n=>n===s);e===-1?this.labelIds.push(s):this.labelIds.splice(e,1),this.save()},startCreating(s,e=!1){s&&!e?(this.newLabel=s,this.selectedColor=s.className):this.newLabel={title:e?s:"",className:this.selectedColor}},changeColor(s){this.newLabel.className=s,this.selectedColor=s},async saveLabel(){var s=this.$store.getters.currBoard,e=!1;if(this.newLabel.id){const n=s.labels.findIndex(i=>i.id===this.newLabel.id);s.labels.splice(n,1,this.newLabel)}else{e=!0;const n=this.labels.findIndex(i=>i.className===this.newLabel.className&&i.title===this.newLabel.title);n===-1?(this.newLabel.id=E.makeId(),s.labels.push(this.newLabel)):this.labelIds.findIndex(o=>o===this.labels[n].id)===-1&&this.labelIds.push(this.labels[n].id)}await this.$store.dispatch({type:"saveBoard",board:s}),e&&(this.labelIds.push(this.newLabel.id),this.save()),this.goBack()},async deleteLabel(){var s=this.$store.getters.currBoard;const e=s.labels.findIndex(n=>n.id===this.newLabel.id);s.labels.splice(e,1),s.groups=s.groups.map(n=>(n.cards=n.cards.map(i=>(i.labelIds=i.labelIds.filter(o=>o!==this.newLabel.id),i)),n)),await this.$store.dispatch({type:"saveBoard",board:s}),this.goBack(),this.wantToDelete=!1},save(){this.$emit("updateKey","labelIds",JSON.parse(JSON.stringify(this.labelIds)))}},computed:{labels(){var s=this.$store.getters.currBoard.labels;if(!this.filterBy)return s;const e=new RegExp(this.filterBy,"i");return s.filter(n=>e.test(n.title))},classColors(){var s=this.$store.getters.labelColors;return s.pop(),s},emptyColor(){return this.$store.getters.labelColors.pop()},btnTxt(){return this.newLabel.id?"Save":"Create"},titleTxt(){return this.newLabel.id?"Change label":"Create label"}},emits:["closeModal","updateKey"]},gr={class:"label-picker"},vr=v(" Labels "),fr=t("h4",null,"Labels",-1),yr={class:"labels-container"},br=["onClick"],kr=["onClick"],Cr={key:0,class:"v-icon"},wr=t("hr",null,null,-1),Br=t("button",{class:"custom-btn"},"Enable color blind friendly mode",-1),xr=t("label",{for:"name"},"Name",-1),$r=t("label",{for:"color"},"Select a color",-1),Mr=["onClick"],Ir={key:0,class:"v-icon"},Sr={class:"empty-card-container"},Tr={key:0,class:"v-icon"},Ar=t("div",null,[t("p",null,"No color."),t("p",null,"This won't show up on the front of cards.")],-1),Dr={class:"add-btn"},Ur=v("Delete label?"),Nr=t("p",null,"There is no undo. This will remove this label from all cards and destroy its history.",-1);function Or(s,e,n,i,o,r){const p=f("custom-modal"),c=T("focus");return l(),a("section",gr,[o.newLabel?h("",!0):(l(),B(p,{key:0,onCloseModal:r.closeModal,onGoBack:r.goBack,style:x(`left: ${n.posLeft}px`)},{header:_(()=>[vr]),default:_(()=>[g(t("input",{"onUpdate:modelValue":e[0]||(e[0]=d=>o.filterBy=d),class:"custom-input",type:"text",placeholder:"Search labels..."},null,512),[[c],[M,o.filterBy]]),fr,t("ul",yr,[(l(!0),a(C,null,k(r.labels,d=>(l(),a("li",{key:d.id,onClick:u=>r.toggleLabel(d.id)},[t("span",{class:"edit-label",onClick:b(u=>r.startCreating(d),["stop"])},null,8,kr),t("div",{class:y(["label-in-label-picker",d.className])},[v(m(d.title)+" ",1),o.labelIds.includes(d.id)?(l(),a("span",Cr)):h("",!0)],2)],8,br))),128))]),r.labels.length?(l(),a("button",{key:0,class:"custom-btn",onClick:e[1]||(e[1]=d=>r.startCreating(null))},"Create new label")):(l(),a("button",{key:1,class:"custom-btn",onClick:e[2]||(e[2]=d=>r.startCreating(o.filterBy,!0))},'Create new "'+m(o.filterBy)+'"" label',1)),wr,Br]),_:1},8,["onCloseModal","onGoBack","style"])),o.newLabel&&!o.wantToDelete?(l(),B(p,{key:1,onCloseModal:r.closeModal,onGoBack:r.goBack,style:x(`left: ${n.posLeft}px`),isFirstPage:!1},{header:_(()=>[v(m(r.titleTxt),1)]),default:_(()=>[t("form",{onSubmit:e[6]||(e[6]=b((...d)=>r.saveLabel&&r.saveLabel(...d),["prevent"])),class:"form-label"},[xr,g(t("input",{"onUpdate:modelValue":e[3]||(e[3]=d=>o.newLabel.title=d),id:"name",class:"custom-input",type:"text"},null,512),[[c],[M,o.newLabel.title]]),$r,t("div",null,[(l(!0),a(C,null,k(r.classColors,d=>(l(),a("span",{key:d,class:y([d,"colorPalette"]),onClick:u=>r.changeColor(d)},[o.selectedColor===d?(l(),a("span",Ir)):h("",!0)],10,Mr))),128))]),t("div",Sr,[t("span",{class:y([r.emptyColor,"colorPalette"]),onClick:e[4]||(e[4]=d=>r.changeColor(r.emptyColor))},[o.selectedColor===r.emptyColor?(l(),a("span",Tr)):h("",!0)],2),Ar]),t("button",Dr,m(r.btnTxt),1),o.newLabel.id?(l(),a("div",{key:0,class:"delete-btn",onClick:e[5]||(e[5]=d=>o.wantToDelete=!0)},"Delete")):h("",!0)],32)]),_:1},8,["onCloseModal","onGoBack","style"])):h("",!0),o.newLabel&&o.wantToDelete?(l(),B(p,{key:2,onCloseModal:r.closeModal,onGoBack:e[8]||(e[8]=d=>o.wantToDelete=!1),style:x(`left: ${n.posLeft}px`),isFirstPage:!1,class:"delete-mode"},{header:_(()=>[Ur]),default:_(()=>[Nr,t("div",{class:"delete-btn",onClick:e[7]||(e[7]=(...d)=>r.deleteLabel&&r.deleteLabel(...d))},"Delete")]),_:1},8,["onCloseModal","style"])):h("",!0)])}var pe=w(_r,[["render",Or]]);const Gr={props:{card:Object},components:{customModal:U},created(){},data(){return{newMember:null,memberIds:JSON.parse(JSON.stringify(this.card.memberIds)),filterBy:""}},methods:{closeModal(){this.$emit("closeModal")},toggleMember(s,e){var n="";const i=this.memberIds.findIndex(o=>o===s);i===-1?(this.memberIds.push(s),n=`${e} joined this card`):(this.memberIds.splice(i,1),n=`${e} left this card`),this.save(n)},save(s){this.$emit("updateKey","memberIds",JSON.parse(JSON.stringify(this.memberIds)),s)}},computed:{members(){var s=this.$store.getters.currBoard.members;if(!this.filterBy)return s;const e=new RegExp(this.filterBy,"i");return s.filter(n=>e.test(n.fullname)||e.test(n.username))}},unmounted(){}},Lr=v(" Members "),Er=t("h4",null,"Board members",-1),Jr={key:0,class:"members-container"},Pr=["onClick"],Vr={class:"avatar-container"},jr=["src"],Fr={key:1},Qr=t("span",{class:"v-icon"},null,-1),Kr={key:1,class:"msg-no-members"},Hr={key:2,class:"custom-btn"};function Rr(s,e,n,i,o,r){const p=f("custom-modal"),c=T("focus");return l(),B(p,{onCloseModal:r.closeModal},{header:_(()=>[Lr]),default:_(()=>[g(t("input",{"onUpdate:modelValue":e[0]||(e[0]=d=>o.filterBy=d),class:"custom-input",type:"text",placeholder:"Search members..."},null,512),[[c],[M,o.filterBy]]),Er,r.members.length?(l(),a("ul",Jr,[(l(!0),a(C,null,k(r.members,d=>(l(),a("li",{key:d._id,onClick:u=>r.toggleMember(d._id,d.fullname)},[t("div",{class:y(["member",{active:o.memberIds.includes(d._id)}])},[t("div",Vr,[d.imgUrl?(l(),a("img",{key:0,src:d.imgUrl,alt:""},null,8,jr)):(l(),a("span",Fr,m(d.fullname.split(" ")[0].split("")[0]+d.fullname.split(" ")[1].split("")[0]),1))]),t("span",null,m(d.fullname),1),t("span",null,"("+m(d.username)+")",1),Qr],2)],8,Pr))),128))])):(l(),a("p",Kr,"Looks like that person isn't a member yet. Enter their email address to add them to the card and board.")),r.members.length?(l(),a("button",Hr,"Show other Workspace members")):h("",!0)]),_:1},8,["onCloseModal"])}var he=w(Gr,[["render",Rr]]);const qr={props:{card:Object},components:{customModal:U,Calendar:Me,DatePicker:Ie},created(){},data(){return{date:new Date,time:null}},methods:{closeModal(){this.$emit("closeModal")},async setDate(){this.time||(this.time="00:00");const s={date:this.date,time:this.time,isCompleted:null};await this.$emit("updateKey","dueDate",JSON.parse(JSON.stringify(s)),`added a due date ${s.date} at ${s.time}`),this.closeModal()},async removeDate(){await this.$emit("updateKey","dueDate",JSON.parse(JSON.stringify(null)),"removed due date from card"),this.closeModal()}},computed:{readDate(){const s=this.date.getDate(),e=this.date.getMonth()+1,n=this.date.getFullYear(),i=s<10?"0"+s:s,o=e<10?"0"+e:e;return`${n}-${o}-${i}`}},unmounted(){}},Wr=v(" Dates "),zr={class:"calendar-container"},Yr=t("h4",null,"Due date",-1),Xr={class:"date-options"},Zr=t("h4",null,"Reminders will be sent to all members and watchers of this card.",-1);function en(s,e,n,i,o,r){const p=f("DatePicker",!0),c=f("custom-modal");return l(),B(c,{class:"date-picker",onCloseModal:r.closeModal},{header:_(()=>[Wr]),default:_(()=>[t("div",zr,[I(p,{modelValue:o.date,"onUpdate:modelValue":e[0]||(e[0]=d=>o.date=d)},null,8,["modelValue"])]),Yr,t("div",Xr,[g(t("input",{disabled:"",type:"date","onUpdate:modelValue":e[1]||(e[1]=d=>r.readDate=d),class:"custom-input"},null,512),[[M,r.readDate]]),g(t("input",{type:"time",class:"custom-input","onUpdate:modelValue":e[2]||(e[2]=d=>o.time=d)},null,512),[[M,o.time]])]),Zr,t("button",{onClick:e[3]||(e[3]=(...d)=>r.setDate&&r.setDate(...d)),class:"custom-btn save"},"Save"),t("button",{onClick:e[4]||(e[4]=(...d)=>r.removeDate&&r.removeDate(...d)),class:"custom-btn"},"Remove")]),_:1},8,["onCloseModal"])}var me=w(qr,[["render",en]]);const tn={name:"",data(){return{checklist:{title:"Checklist",newTodo:"",todos:[]}}},methods:{closeModal(){this.$emit("closeModal")},save(){!this.checklist.title||(this.$emit("updateKey","checklists",JSON.parse(JSON.stringify(this.checklist)),`added checklist ${this.checklist.title}`),this.$emit("closeModal"))}},computed:{},components:{customModal:U}},sn=v(" Add checklist "),on=t("h4",null,"Title",-1),rn=t("h4",null,"Copy items from...",-1),nn=t("p",null,"to put here dropdown select",-1);function ln(s,e,n,i,o,r){const p=f("custom-modal"),c=T("focus");return l(),B(p,{onCloseModal:r.closeModal},{header:_(()=>[sn]),default:_(()=>[on,g(t("input",{"onUpdate:modelValue":e[0]||(e[0]=d=>o.checklist.title=d),class:"custom-input",type:"text"},null,512),[[M,o.checklist.title],[c]]),rn,nn,t("button",{class:"add-btn",onClick:e[1]||(e[1]=(...d)=>r.save&&r.save(...d))},"Add")]),_:1},8,["onCloseModal"])}var an=w(tn,[["render",ln]]);const F={getBgImages:cn,uploadImg:dn};function dn(s){const e="Trellox_1",i="https://api.cloudinary.com/v1_1/trellox/image/upload",o=new FormData;return o.append("file",s.target.files[0]),o.append("upload_preset",e),fetch(i,{method:"POST",body:o}).then(r=>r.json()).then(r=>r).catch(r=>console.error(r))}async function cn(s){try{return(await fetch(`https://api.unsplash.com/search?query=${s}&client_id=oMe4LiG85eXMR9Nf7b8cxU6jsTRHCtO81O_MjX-J4L0`,{method:"GET"})).json()}catch(e){console.log("cannot get images",e)}}const un={props:{card:Object},name:"",data(){return{style:JSON.parse(JSON.stringify(this.card.style)),attachments:JSON.parse(JSON.stringify(this.card.attachments)),colors:this.$store.getters.coverColors,images:this.$store.getters.coverImages,searchPhotos:!1,searchVal:"",photos:null}},created(){this.searchImages("chill",!0)},methods:{closeModal(){this.$emit("closeModal")},async onUploadImg(s){const e=await F.uploadImg(s),n={name:e.public_id,createdAt:e.created_at,url:e.url,format:e.format};this.attachments.push(n),this.$emit("updateKey","attachments",JSON.parse(JSON.stringify(this.attachments)),"added an attachment"),this.style.cover=e.url,this.style.type="url",this.save()},setColor(s){this.style.cover===s?(this.style.cover="",this.style.type=""):(this.style.cover=s,this.style.type="color"),this.save()},setBgUrl(s){this.style.cover===s?(this.style.cover="",this.style.type=""):(this.style.cover=s,this.style.type="url"),this.goBack(),this.save()},setCoverSize(s){this.style.fullCover=s,this.save()},save(){const s=this.style.cover?"updated card cover":"removed card cover";this.$emit("updateKey","style",JSON.parse(JSON.stringify(this.style)),s)},async searchImages(s,e=!1){e||(this.searchVal=s);const n=await F.getBgImages(s);this.photos=n.photos.results},goBack(){this.searchVal="",this.searchPhotos=!1},setDark(s){this.style.isDark=s,this.save()}},computed:{background(){return this.style.type==="url"?`background-image:url('${this.style.cover}')`:`background-color: ${this.style.cover}`}},components:{customModal:U}},pn=v(" Cover "),hn=t("h4",null,"Size",-1),mn={class:"cover-preview-container"},_n=t("div",{class:"cover-bottom"},[t("div",{class:"wide"}),t("div",{class:"narrow"}),t("div",{class:"content-container"},[t("div",{class:"content"}),t("div",{class:"content"})]),t("div",{class:"member"})],-1),gn=[_n],vn=t("div",{class:"full-content-container"},[t("div",{class:"wide"}),t("div",{class:"narrow"})],-1),fn=[vn],yn={key:0,class:"custom-btn"},bn={key:1,class:"text-color-container"},kn=t("h4",null,"Text color",-1),Cn={class:"preview-container"},wn=t("h4",null,"Colors",-1),Bn={class:"colors-container"},xn=["onClick"],$n=t("h4",null,"Attachments",-1),Mn={class:"attachment-container"},In=["onClick"],Sn={for:"file-input",class:"custom-btn"},Tn=v(" Upload a cover image "),An=t("span",{class:"tip"},"Tip: Drag an image on to the card to upload it.",-1),Dn=t("h4",{class:"images-header"},"Photos from Unsplash",-1),Un={class:"images-container"},Nn=["onClick"],On=v("Photo search"),Gn={key:0},Ln=t("h4",{style:{"margin-top":"16px","margin-bottom":"4px"}},"Results",-1),En={class:"large-image-container"},Jn=["onClick"],Pn={key:1},Vn=t("h4",null,"Suggested searches",-1),jn={class:"buttons-container"},Fn=t("h4",{style:{"margin-top":"12px","margin-bottom":"4px"}},"Top photos",-1),Qn={key:0,class:"images-container"},Kn=["onClick"],Hn=t("span",{class:"unsplash-txt"},[v("Photos from "),t("a",{target:"_blank",href:"https://unsplash.com/"},"Unsplash")],-1);function Rn(s,e,n,i,o,r){const p=f("custom-modal"),c=T("focus");return o.searchPhotos?(l(),B(p,{key:1,isFirstPage:!1,onGoBack:r.goBack,class:"image-picker",onCloseModal:r.closeModal},{header:_(()=>[On]),default:_(()=>[g(t("input",{type:"text",onInput:e[6]||(e[6]=d=>r.searchImages(o.searchVal)),"onUpdate:modelValue":e[7]||(e[7]=d=>o.searchVal=d),class:"custom-input",placeholder:"Search Unsplash for photos"},null,544),[[c],[M,o.searchVal]]),o.searchVal?(l(),a("section",Gn,[Ln,t("div",En,[(l(!0),a(C,null,k(o.photos,d=>(l(),a("div",{key:d,class:"large-preview",onClick:u=>r.setBgUrl(d.urls.full),style:x(`background-image: url('${d.urls.small}')`)},null,12,Jn))),128))])])):(l(),a("section",Pn,[Vn,t("div",jn,[t("button",{onClick:e[8]||(e[8]=b(d=>r.searchImages("Productivity"),["stop"])),class:"grey-btn"},"Productivity"),t("button",{onClick:e[9]||(e[9]=b(d=>r.searchImages("Perspective"),["stop"])),class:"grey-btn"},"Perspective"),t("button",{onClick:e[10]||(e[10]=b(d=>r.searchImages("Organization"),["stop"])),class:"grey-btn"},"Organization"),t("button",{onClick:e[11]||(e[11]=b(d=>r.searchImages("Colorful"),["stop"])),class:"grey-btn"},"Colorful"),t("button",{onClick:e[12]||(e[12]=b(d=>r.searchImages("Nature"),["stop"])),class:"grey-btn"},"Nature"),t("button",{onClick:e[13]||(e[13]=b(d=>r.searchImages("Business"),["stop"])),class:"grey-btn"},"Business"),t("button",{onClick:e[14]||(e[14]=b(d=>r.searchImages("Minimal"),["stop"])),class:"grey-btn"},"Minimal"),t("button",{onClick:e[15]||(e[15]=b(d=>r.searchImages("Space"),["stop"])),class:"grey-btn"},"Space"),t("button",{onClick:e[16]||(e[16]=b(d=>r.searchImages("Animals"),["stop"])),class:"grey-btn"},"Animals")]),Fn,o.photos?(l(),a("div",Qn,[(l(!0),a(C,null,k(o.photos,d=>(l(),a("div",{key:d,class:y(["attachment-preview",d.urls.full===o.style.cover?"active":""]),onClick:u=>r.setBgUrl(d.urls.full),style:x(`background-image: url('${d.urls.small}')`)},null,14,Kn))),128))])):h("",!0),Hn]))]),_:1},8,["onGoBack","onCloseModal"])):(l(),B(p,{key:0,onCloseModal:r.closeModal,class:"cover-picker"},{header:_(()=>[pn]),default:_(()=>[hn,t("div",mn,[t("div",{onClick:e[0]||(e[0]=d=>r.setCoverSize(!1)),class:y(["cover-preview",!o.style.fullCover&&o.style.cover?"active":""])},[t("div",{class:"cover-top",style:x(r.background)},gn,4)],2),t("div",{onClick:e[1]||(e[1]=d=>r.setCoverSize(!0)),class:y(["full-cover-preview",o.style.fullCover&&o.style.cover?"active":""])},[t("div",{class:"cover-top",style:x(r.background)},fn,4)],2)]),o.style.cover?(l(),a("button",yn,"Remove cover")):h("",!0),o.style.type==="url"&&o.style.fullCover&&o.style.cover?(l(),a("section",bn,[kn,t("div",Cn,[t("div",{class:y(["dark",o.style.isDark?"active":""]),onClick:e[2]||(e[2]=d=>r.setDark(!0)),style:x(`background-image: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url('${o.style.cover}');`)},m(n.card.title),7),t("div",{class:y(["light",o.style.isDark?"":"active"]),onClick:e[3]||(e[3]=d=>r.setDark(!1)),style:x(`background-image: linear-gradient(rgba(255, 255, 255, 0.5), rgba(255, 255, 255, 0.5)), url('${o.style.cover}');`)},m(n.card.title),7)])])):h("",!0),wn,t("div",Bn,[(l(!0),a(C,null,k(o.colors,d=>(l(),a("div",{key:d,class:y(["color-preview",d===o.style.cover?"active":""]),style:x("background-color:"+d),onClick:u=>r.setColor(d)},null,14,xn))),128))]),$n,t("div",Mn,[(l(!0),a(C,null,k(o.attachments,d=>(l(),a("div",{key:d,class:y(["attachment-preview",d.url===o.style.cover?"active":""]),onClick:u=>r.setBgUrl(d.url),style:x(`background-image: url('${d.url}')`)},null,14,In))),128))]),t("label",Sn,[Tn,t("input",{type:"file",onInput:e[4]||(e[4]=(...d)=>r.onUploadImg&&r.onUploadImg(...d)),class:"file-input",hidden:"",id:"file-input"},null,32)]),An,Dn,t("div",Un,[(l(!0),a(C,null,k(o.images,d=>(l(),a("div",{key:d,class:y(["attachment-preview",d===o.style.cover?"active":""]),onClick:u=>r.setBgUrl(d),style:x(`background-image: url('${d}')`)},null,14,Nn))),128))]),t("button",{onClick:e[5]||(e[5]=d=>o.searchPhotos=!0),class:"custom-btn"},"Search for photos")]),_:1},8,["onCloseModal"]))}var _e=w(un,[["render",Rn]]);const qn={name:"",data(){return{}},methods:{async onUploadImg(s){const e=await F.uploadImg(s),n={name:e.public_id,createdAt:e.created_at,url:e.url,format:e.format};this.$emit("updateKey","attachments",JSON.parse(JSON.stringify(n)))}},components:{customModal:U}},Wn=v(" Attach from... "),zn={class:"attachment-picker"},Yn=v("Computer "),Xn=t("li",null,[t("label",null,"Google Drive ")],-1);function Zn(s,e,n,i,o,r){const p=f("custom-modal");return l(),B(p,{class:"attachment-container"},{header:_(()=>[Wn]),default:_(()=>[t("ul",zn,[t("li",null,[t("label",null,[Yn,t("input",{type:"file",onChange:e[0]||(e[0]=(...c)=>r.onUploadImg&&r.onUploadImg(...c))},null,32)])]),Xn])]),_:1})}var el=w(qn,[["render",Zn]]);const tl={data(){return{}},methods:{removeCard(){this.$emit("removeCard")},closeModal(){this.$emit("closeModal")}},computed:{},components:{customModal:U}},sl=v(" Delete card? "),ol=t("p",{style:{margin:"0 0 8px"}}," All actions will be removed from the activity feed and you won\u2019t be able to re-open the card. There is no undo. ",-1);function rl(s,e,n,i,o,r){const p=f("custom-modal");return l(),B(p,{onCloseModal:r.closeModal},{header:_(()=>[sl]),default:_(()=>[ol,t("button",{class:"delete-btn",style:{width:"100%","justify-content":"center"},onClick:e[0]||(e[0]=(...c)=>r.removeCard&&r.removeCard(...c))},"Delete")]),_:1},8,["onCloseModal"])}var ge=w(tl,[["render",rl]]);const nl={props:{card:Object,isCopyCard:Boolean},data(){return{chosenBoard:this.$store.getters.currBoard,groupPos:0,cardPos:0,newTitle:JSON.parse(JSON.stringify(this.card.title)),currBoard:this.$store.getters.currBoard}},methods:{closeModal(){this.$emit("closeModal")},async moveCard(){console.log("im here at move card");const s=JSON.parse(JSON.stringify(this.chosenBoard));var e=JSON.parse(JSON.stringify(this.card));this.isCopyCard&&(e.title=this.newTitle),s.groups[this.groupPos].cards.splice(this.cardPos,0,e),await this.$store.dispatch({type:"saveBoard",board:s}),await this.$store.dispatch({type:"saveBoard",board:this.currBoard}),this.isCopyCard||this.$emit("removeCard"),this.closeModal()}},computed:{boards(){return this.$store.getters.boards}},components:{customModal:U}},ll={key:0},il=t("h4",null,"Title",-1),al={class:"move-card"},dl={class:"board-info"},cl=t("p",null,"Board",-1),ul=["value"],pl={class:"board-info"},hl=t("p",null,"Group",-1),ml=["value"],_l={class:"board-info"},gl=t("p",null,"Position",-1),vl=["value"];function fl(s,e,n,i,o,r){const p=f("custom-modal");return l(),B(p,{onCloseModal:r.closeModal},{header:_(()=>[v(m(n.isCopyCard?"Copy":"Move")+" card ",1)]),default:_(()=>[n.isCopyCard?(l(),a("div",ll,[il,g(t("textarea",{type:"text","onUpdate:modelValue":e[0]||(e[0]=c=>o.newTitle=c),class:"custom-input"},null,512),[[M,o.newTitle]])])):h("",!0),t("h4",null,m(n.isCopyCard?"Copy to...":"Select destination"),1),t("div",al,[t("form",{onSubmit:e[4]||(e[4]=b((...c)=>r.moveCard&&r.moveCard(...c),["prevent"]))},[t("label",null,[t("div",dl,[cl,t("p",null,m(o.chosenBoard.title),1),g(t("select",{"onUpdate:modelValue":e[1]||(e[1]=c=>o.chosenBoard=c)},[(l(!0),a(C,null,k(r.boards,c=>(l(),a("option",{key:c._id,value:c},m(c.title),9,ul))),128))],512),[[H,o.chosenBoard]])])]),t("label",null,[t("div",pl,[hl,t("p",null,m(o.chosenBoard.groups[o.groupPos].title),1),g(t("select",{"onUpdate:modelValue":e[2]||(e[2]=c=>o.groupPos=c)},[(l(!0),a(C,null,k(o.chosenBoard.groups,(c,d)=>(l(),a("option",{key:c,value:d},m(c.title),9,ml))),128))],512),[[H,o.groupPos]])])]),t("label",null,[t("div",_l,[gl,t("p",null,m(o.cardPos+1),1),g(t("select",{"onUpdate:modelValue":e[3]||(e[3]=c=>o.cardPos=c)},[(l(!0),a(C,null,k(o.chosenBoard.groups[o.groupPos].cards,(c,d)=>(l(),a("option",{key:c.id,value:d},m(d+1),9,vl))),128))],512),[[H,o.cardPos]])])]),t("button",null,m(n.isCopyCard?"Copy":"Move"),1)],32)])]),_:1},8,["onCloseModal"])}var yl=w(nl,[["render",fl]]);const bl={props:{card:Object},data(){return{}},created(){console.log("this.$route.params",this.$route.params)},methods:{closeModal(){this.$emit("closeModal")}},computed:{cardLink(){return`https://trelloxx.herokuapp.com/#/board/${this.$route.params.boardId}/edit/${this.card.id}`}},components:{customModal:U}},kl=v("Share and more..."),Cl=t("h4",null,[v("Link to this card "),t("span",{class:"members-icon"})],-1);function wl(s,e,n,i,o,r){const p=f("custom-modal"),c=T("focus");return l(),B(p,{onCloseModal:r.closeModal},{header:_(()=>[kl]),default:_(()=>[Cl,g(t("input",{type:"text",autofocus:"","onUpdate:modelValue":e[0]||(e[0]=d=>r.cardLink=d),style:{resize:"none"},class:"custom-input"},null,512),[[c],[M,r.cardLink]])]),_:1},8,["onCloseModal"])}var Bl=w(bl,[["render",wl]]);const xl={components:{labelPicker:pe,memberPicker:he,checklistAdd:an,coverPicker:_e,attachments:el,confirmDelete:ge,datePicker:me,moveCard:yl,shareCard:Bl},data(){return{isTextArea:!1,card:null,boardId:null,cardId:null,groupId:null,isShowActivity:!1,isCommentsInput:!1,newComment:{txt:"",createdAt:null,byMemberId:"u101"},cmpName:null,description:null,isAddTodo:null,newTodo:{title:"",isDone:!1},coverColor:null,isCopyCard:!1,posTop:null,posLeft:null}},created(){this.cardId=this.$route.params.cardId,this.boardId=this.$route.params.boardId,this.loadCard()},methods:{openModal(s,e){this.calcPosition(e.target.getBoundingClientRect()),s==="copy-card"?(this.isCopyCard=!0,s="move-card"):this.isCopyCard=!1,console.log("cmpName",s),this.cmpName=s},calcPosition(s){var{left:e}=s;const n=window.innerWidth;n-e<300&&(e=n-330),this.posTop=100,this.posLeft=e},closeModal(){this.cmpName=null},async updateKey(s,e,n){s==="checklists"||s==="attachments"?(e.id=E.makeId(),this.card[s].push(e)):this.card[s]=e,n&&await this.addActivity(n),await this.updateCard()},closeEdit(){this.$router.push(`/board/${this.boardId}`)},async loadCard(){var e;const s=await this.$store.dispatch({type:"getCardById",boardId:this.boardId,cardId:this.cardId});this.card=s.card,this.description=((e=s.card)==null?void 0:e.description)||"",this.groupId=s.groupId,this.checkCover()},showActivity(){this.isShowActivity=!this.isShowActivity},toggleCommentsInput(){this.isCommentsInput=!this.isCommentsInput},postComment(){if(!!this.newComment.txt){var s=JSON.parse(JSON.stringify(this.newComment));s.txt.trim(),s.createdAt=Date.now(),s.id=E.makeId(),this.card.comments.unshift(s),this.updateCard(),this.newComment.txt=""}},async updateCard(){!this.card.title||(await this.$store.dispatch({type:"updateCard",groupId:this.groupId,card:this.card}),this.loadCard())},calcProgress(s){if(!s.length)return"0%";var n=(s.reduce((i,o)=>(o.isDone&&i++,i),0)*100/s.length).toFixed(0)+"%";return n},async toggleTodo(s,e){const n=this.card.checklists.findIndex(o=>o.id===e),i=this.card.checklists[n].todos.findIndex(o=>o.id===s);this.card.checklists[n].todos[i].isDone=!this.card.checklists[n].todos[i].isDone,this.card.checklists[n].todos[i].isDone?await this.addActivity(`marked ${this.card.checklists[n].todos[i].title} completed at checklist ${this.card.checklists[n].title}`):await this.addActivity(`unmarked ${this.card.checklists[n].todos[i].title} at checklist ${this.card.checklists[n].title}`),this.updateCard()},async updateDescription(){this.card.description=this.description,await this.addActivity(`added description to card ${this.card.title}`),this.updateCard(),this.isTextArea=!1},getMemberById(s){console.log("memberId",s)},async addTodo(s,e){var n=JSON.parse(JSON.stringify(this.newTodo));if(n.title=JSON.parse(JSON.stringify(e.newTodo)),e.newTodo="",!n.title)return;n.id=E.makeId();const i=this.card.checklists.findIndex(o=>o.id===s);this.card.checklists[i].todos.push(n),await this.addActivity(`added ${n.title} to the checklist ${this.card.checklists[i].title}`),this.updateCard()},closeTodoInput(s){s.newTodo="",this.isAddTodo=null},openUrl(s){window.open(s)},async removeChecklist(s){await this.addActivity(`removed checklist ${this.card.checklists[s].title}`),this.card.checklists.splice(s,1),this.updateCard()},async checkCover(){if(!this.card.style.cover)return"";try{const s=new le;this.card.style.type==="url"&&(this.coverColor=await s.getColorAsync(this.card.style.cover))}catch(s){console.log(s)}},async removeCard(){this.addActivity(`removed card ${this.card.title}`),await this.$store.dispatch("removeCard",{groupId:this.groupId,cardId:this.cardId}),this.closeEdit()},async addActivity(s){await this.$store.dispatch({type:"addActivity",txt:s,card:this.card})},async joinToCard(){this.card.memberIds.push(this.$store.getters.loggedinUser._id),await this.addActivity(`${this.$store.getters.loggedinUser.fullname} Joined card`),this.updateCard()},formattedTime(s){return E.getFormattedTime(s)}},computed:{commentsInputStyle(){return this.isCommentsInput?"active-input":""},isCommentsText(){return this.newComment.txt?"save-btn":"not-allowed-btn"},labels(){var s=this.$store.getters.currBoard.labels;return s.filter(e=>this.card.labelIds.includes(e.id))},members(){var s=this.$store.getters.currBoard.members;return s.filter(e=>this.card.memberIds.includes(e._id))},comments(){var s=JSON.parse(JSON.stringify(this.$store.getters.currBoard.members));return JSON.parse(JSON.stringify(this.card)).comments.map(n=>{var i=s.find(o=>o._id===n.byMemberId);return n.byMember=i,n})},groupTitle(){return this.$store.getters.currBoard.groups.find(n=>n.id===this.groupId).title},cover(){return this.card.style.type==="url"?`background-image:url('${this.card.style.cover}')`:`background-color: ${this.card.style.cover}`},coverType(){return this.card.style.type==="url"?"card-cover-image":"card-cover-color"},coverButtonClass(){var s;return this.card.style.cover?this.card.style.type==="color"?this.card.style.cover==="#172B4D"?"on-cover-icon-dark":"on-cover-icon":(s=this.coverColor)!=null&&s.isDark?"on-cover-icon-dark":"on-cover-icon":""},formattedDate(){const s=new Date(this.card.dueDate.date),e=s.toLocaleString("en-US",{month:"short"}),n=s.getDate(),i=this.card.dueDate.time;return`${e} ${n} at ${i}`},activities(){const s=this.$store.getters.currBoard.activities;return s.length?s.filter(e=>e.card.id===this.card.id):[]},checkUser(){return this.card.memberIds.includes(this.$store.getters.loggedinUser._id)}}},$l={key:0,class:"card-edit"},Ml={class:"card-modal-details"},Il={class:"modal-header"},Sl=t("span",{class:"modal-header-icon"},null,-1),Tl={class:"modal-header-title"},Al={class:"inline-content"},Dl=v(" in list "),Ul={style:{"text-decoration":"underline"}},Nl={class:"modal-main-content"},Ol={class:"card-details"},Gl={key:0,class:"card-details-item"},Ll=t("h3",null,"Members",-1),El=["title"],Jl=["src"],Pl={key:1},Vl=t("i",{class:"fa-solid fa-plus"},null,-1),jl=[Vl],Fl={key:1,class:"card-details-item"},Ql=t("h3",null,"Labels",-1),Kl=["title"],Hl=t("i",{class:"fa-solid fa-plus"},null,-1),Rl=[Hl],ql={key:2,class:"card-details-item card-date"},Wl=t("h3",null,"Due date",-1),zl={key:0,class:"complete"},Yl=t("i",{class:"fa-solid fa-angle-down"},null,-1),Xl={class:"description-container"},Zl=t("div",{class:"title"},[t("span",{class:"icon-description"}),t("h3",null,"Description")],-1),ei={class:"description-input"},ti=t("p",null,"Add a more detailed description\u2026",-1),si=[ti],oi={key:2},ri=t("i",{class:"fa-solid fa-xmark"},null,-1),ni=[ri],li={key:0,class:"attachments-container"},ii=t("div",{class:"title"},[t("span",{class:"icon-attachment"}),t("h3",null,"Attachments")],-1),ai={class:"attachment-info"},di=["onClick"],ci={class:"title"},ui=t("span",{style:{top:"7px"},class:"icon-checklist"},null,-1),pi=["onClick"],hi={class:"checklist-progress"},mi={class:"progress-precent"},_i={class:"progress-bar"},gi=["onClick"],vi={class:"todo-title"},fi={class:"add-todo-container"},yi=["onUpdate:modelValue","onKeydown","hidden"],bi=["onClick"],ki=["onClick"],Ci=["onClick"],wi=t("i",{class:"fa-solid fa-xmark"},null,-1),Bi=[wi],xi={class:"activity-container"},$i={class:"title"},Mi=t("span",{style:{top:"7px"},class:"icon-activity"},null,-1),Ii=t("h3",null,"Activity",-1),Si={class:"comments-frame"},Ti={class:"comments-input"},Ai={class:"avatar-container member"},Di=["src"],Ui={key:1},Ni={class:"card-comment"},Oi={class:"comment-by"},Gi={class:"comment-date"},Li={class:"the-comment"},Ei={key:1},Ji={class:"avatar-container member"},Pi=["src"],Vi={key:1},ji={class:"card-comment activities"},Fi={class:"comment-by"},Qi={class:"activity-txt"},Ki={class:"comment-date"},Hi={class:"modal-side-bar"},Ri={key:0,class:"action-container"},qi=t("h3",null,"Suggested",-1),Wi=t("span",{class:"icon ic-join"},null,-1),zi=t("span",null,"Join",-1),Yi=[Wi,zi],Xi={class:"action-container"},Zi=t("h3",null,"Add to card",-1),ea=t("span",{class:"icon ic-join"},null,-1),ta=t("span",null,"Members",-1),sa=[ea,ta],oa=t("span",{class:"icon ic-label"},null,-1),ra=t("span",null,"Labels",-1),na=[oa,ra],la=t("span",{class:"icon ic-checklist"},null,-1),ia=t("span",null,"Checklist",-1),aa=[la,ia],da=t("span",{class:"icon ic-date"},null,-1),ca=t("span",null,"Dates",-1),ua=[da,ca],pa=t("span",{class:"icon ic-attachment"},null,-1),ha=t("span",null,"Attachment",-1),ma=[pa,ha],_a=t("span",{class:"icon ic-cover"},null,-1),ga=t("span",null,"Cover",-1),va=[_a,ga],fa={class:"action-container"},ya=t("h3",null,"Actions",-1),ba=t("span",{class:"icon ic-move"},null,-1),ka=t("span",null,"Move",-1),Ca=[ba,ka],wa=t("span",{class:"icon ic-copy"},null,-1),Ba=t("span",null,"Copy",-1),xa=[wa,Ba],$a=t("div",{class:"action-btn"},[t("span",{class:"icon ic-template"}),t("span",null,"Make template")],-1),Ma=t("div",{class:"action-btn"},[t("span",{class:"icon ic-watch"}),t("span",null,"Watch")],-1),Ia=t("hr",null,null,-1),Sa=t("span",{class:"icon ic-remove remove"},null,-1),Ta=t("span",null,"Delete",-1),Aa=[Sa,Ta],Da=t("span",{class:"icon ic-share"},null,-1),Ua=t("span",null,"Share",-1),Na=[Da,Ua];function Oa(s,e,n,i,o,r){var d;const p=T("focus"),c=T("click-outside");return o.card?(l(),a("section",$l,[t("div",{onMousedown:e[33]||(e[33]=(...u)=>r.closeEdit&&r.closeEdit(...u)),class:"window-overlay"},[t("div",{onMousedown:e[32]||(e[32]=b(()=>{},["stop"])),class:"card-modal"},[t("div",Ml,[o.card.style.cover?(l(),a("div",{key:0,style:x(r.cover),class:y(r.coverType)},null,6)):h("",!0),t("span",{onClick:e[0]||(e[0]=(...u)=>r.closeEdit&&r.closeEdit(...u)),class:y(["close-modal-button",r.coverButtonClass])},null,2),t("div",Il,[Sl,t("div",Tl,[g(t("textarea",{placeholder:"Enter card title","onUpdate:modelValue":e[1]||(e[1]=u=>o.card.title=u),onInput:e[2]||(e[2]=(...u)=>r.updateCard&&r.updateCard(...u)),onKeydown:e[3]||(e[3]=G(b((...u)=>r.updateCard&&r.updateCard(...u),["prevent"]),["enter"])),dir:"auto","data-autosize":"true"},null,544),[[M,o.card.title]])]),t("div",Al,[Dl,t("span",Ul,m(r.groupTitle),1)])]),t("div",Nl,[t("div",Ol,[r.members.length?(l(),a("div",Gl,[Ll,(l(!0),a(C,null,k(r.members,u=>(l(),a("div",{class:"avatar-container",key:u.id,title:u.fullname},[u.imgUrl?(l(),a("img",{key:0,src:u.imgUrl,alt:""},null,8,Jl)):(l(),a("span",Pl,m(u.fullname.split(" ")[0].split("")[0]+u.fullname.split(" ")[1].split("")[0]),1))],8,El))),128)),t("div",{class:"add-member",onClick:e[4]||(e[4]=u=>r.openModal("member-picker"))},jl)])):h("",!0),r.labels.length?(l(),a("div",Fl,[Ql,t("div",null,[(l(!0),a(C,null,k(r.labels,u=>(l(),a("span",{class:y(["label-span",u.className]),key:u.id,title:u.title},[t("span",{onClick:e[5]||(e[5]=O=>r.openModal("label-picker"))},m(u.title),1)],10,Kl))),128)),t("div",{class:"add-label",onClick:e[6]||(e[6]=u=>r.openModal("label-picker"))},Rl)])])):h("",!0),(d=o.card.dueDate)!=null&&d.date?(l(),a("div",ql,[Wl,g(t("input",{onInput:e[7]||(e[7]=(...u)=>r.updateCard&&r.updateCard(...u)),"onUpdate:modelValue":e[8]||(e[8]=u=>o.card.dueDate.isCompleted=u),type:"checkbox",class:y({full:o.card.dueDate.isCompleted})},null,34),[[P,o.card.dueDate.isCompleted]]),t("span",{class:"date-info",onClick:e[9]||(e[9]=u=>r.openModal("date-picker"))},[v(m(r.formattedDate),1),o.card.dueDate.isCompleted?(l(),a("span",zl,"complete")):h("",!0),Yl])])):h("",!0)]),t("div",Xl,[Zl,t("div",ei,[!o.isTextArea&&o.card.description.length?(l(),a("pre",{key:0,onClick:e[10]||(e[10]=u=>o.isTextArea=!0)},m(o.card.description),1)):h("",!0),!o.isTextArea&&!o.card.description?(l(),a("div",{key:1,class:"fake-text-area",onClick:e[11]||(e[11]=u=>o.isTextArea=!0)},si)):h("",!0),o.isTextArea?g((l(),a("div",oi,[g(t("textarea",{"onUpdate:modelValue":e[12]||(e[12]=u=>o.description=u),placeholder:"Add a more detailed description\u2026"},null,512),[[p],[M,o.description]]),t("button",{onClick:e[13]||(e[13]=(...u)=>r.updateDescription&&r.updateDescription(...u)),class:"save-btn"},"Save"),t("span",{onClick:e[14]||(e[14]=u=>o.isTextArea=!1),class:"x-icon"},ni)])),[[c,()=>o.isTextArea=!1]]):h("",!0)])]),o.card.attachments.length?(l(),a("div",li,[ii,t("ul",null,[(l(!0),a(C,null,k(o.card.attachments,u=>(l(),a("li",{key:u},[t("div",{class:"attachment",style:x({"background-image":"url("+u.url+")"})},null,4),t("div",ai,[t("h5",null,[v(m(u.name)+"."+m(u.format)+" ",1),t("span",{onClick:O=>r.openUrl(u.url)},null,8,di)]),t("p",null,"Added "+m(u.createdAt),1)])]))),128))])])):h("",!0),(l(!0),a(C,null,k(o.card.checklists,(u,O)=>(l(),a("div",{key:u.id,class:"checklist-container"},[t("div",ci,[ui,t("h3",null,m(u.title),1),t("button",{onClick:A=>r.removeChecklist(O),class:"grey-btn"},"Delete",8,pi)]),t("div",hi,[t("span",mi,m(r.calcProgress(u.todos)),1),t("div",_i,[t("div",{style:x("width:"+r.calcProgress(u.todos)),class:y([r.calcProgress(u.todos)==="100%"?"progress-completed":"","current-progress"])},null,6)])]),t("div",null,[(l(!0),a(C,null,k(u.todos,A=>(l(),a("div",{key:A.id,class:"checklist-todos-container"},[t("div",{onClick:S=>r.toggleTodo(A.id,u.id),class:y(["todo-checkbox",A.isDone?"completed":""])},[t("span",{class:y(A.isDone?"checked":"")},null,2)],10,gi),t("div",{class:y(["todo-title-container",A.isDone?"todo-completed":""])},[t("div",vi,m(A.title),1)],2)]))),128))]),g((l(),a("div",fi,[o.isAddTodo===u.id?g((l(),a("textarea",{key:0,"onUpdate:modelValue":A=>u.newTodo=A,onKeydown:G(b(A=>r.addTodo(u.id,u),["prevent"]),["enter"]),placeholder:"Add an item",hidden:!o.isAddTodo},null,40,yi)),[[M,u.newTodo],[p]]):h("",!0),o.isAddTodo===u.id?(l(),a("button",{key:1,class:y(u.newTodo?"save-btn":"not-allowed-btn"),onClick:b(A=>r.addTodo(u.id,u),["stop"])},"Add",10,bi)):(l(),a("button",{key:2,class:"grey-btn",onClick:b(A=>o.isAddTodo=u.id,["stop"]),style:{margin:"unset"}},"Add an item",8,ki)),o.isAddTodo===u.id&&u.newTodo?(l(),a("span",{key:3,onClick:A=>r.closeTodoInput(u),class:"x-icon"},Bi,8,Ci)):h("",!0)])),[[c,()=>o.isAddTodo=null]])]))),128)),t("div",xi,[t("div",$i,[Mi,Ii,o.isShowActivity?(l(),a("button",{key:0,onClick:e[15]||(e[15]=(...u)=>r.showActivity&&r.showActivity(...u)),class:"grey-btn"},"Hide details")):(l(),a("button",{key:1,onClick:e[16]||(e[16]=(...u)=>r.showActivity&&r.showActivity(...u)),class:"grey-btn"},"Show details"))]),t("div",Si,[g((l(),a("div",Ti,[g(t("textarea",{onFocus:e[17]||(e[17]=u=>o.isCommentsInput=!0),class:y(r.commentsInputStyle),"onUpdate:modelValue":e[18]||(e[18]=u=>o.newComment.txt=u),onKeydown:e[19]||(e[19]=G(b((...u)=>r.postComment&&r.postComment(...u),["prevent"]),["enter"])),placeholder:"Write a comment..."},null,34),[[M,o.newComment.txt]]),o.isCommentsInput?(l(),a("button",{key:0,onClick:e[20]||(e[20]=b((...u)=>r.postComment&&r.postComment(...u),["stop"])),class:y(r.isCommentsText)},"Save",2)):h("",!0)])),[[c,()=>o.isCommentsInput=!1]])])]),t("div",null,[(l(!0),a(C,null,k(r.comments,u=>(l(),a("div",{class:"card-comment-container",key:u.id},[t("div",Ai,[u.byMember.imgUrl?(l(),a("img",{key:0,src:u.byMember.imgUrl,alt:""},null,8,Di)):(l(),a("span",Ui,m(u.byMember._id?u.byMember.fullname.split(" ")[0].split("")[0]+u.byMember.fullname.split(" ")[1].split("")[0]:"G"),1))]),t("div",Ni,[t("span",Oi,m(u.byMember.fullname),1),t("span",Gi,m(r.formattedTime(u.createdAt)),1),t("div",Li,[t("p",null,m(u.txt),1)])])]))),128))]),r.activities.length&&o.isShowActivity?(l(),a("div",Ei,[(l(!0),a(C,null,k(r.activities,u=>(l(),a("div",{class:"card-comment-container",key:u.id},[t("div",Ji,[u.byMember.imgUrl?(l(),a("img",{key:0,src:u.byMember.imgUrl,alt:""},null,8,Pi)):(l(),a("span",Vi,m(u.byMember._id?u.byMember.fullname.split(" ")[0].split("")[0]+u.byMember.fullname.split(" ")[1].split("")[0]:"G"),1))]),t("div",ji,[t("div",null,[t("span",Fi,m(u.byMember.fullname),1),t("span",Qi,m(u.txt),1)]),t("span",Ki,m(r.formattedTime(u.createdAt)),1)])]))),128))])):h("",!0)]),t("div",Hi,[r.checkUser?h("",!0):(l(),a("div",Ri,[qi,t("div",{onClick:e[21]||(e[21]=(...u)=>r.joinToCard&&r.joinToCard(...u)),class:"action-btn"},Yi)])),t("div",Xi,[Zi,t("div",{class:"action-btn",onClick:e[22]||(e[22]=u=>r.openModal("member-picker",u))},sa),t("div",{class:"action-btn",onClick:e[23]||(e[23]=u=>r.openModal("label-picker",u))},na),o.cmpName?g((l(),B(X(o.cmpName),{key:0,card:o.card,posLeft:o.posLeft,isCopyCard:o.isCopyCard,onRemoveCard:r.removeCard,onCloseModal:r.closeModal,onUpdateKey:r.updateKey,style:x(`top: ${o.posTop}px; left: ${o.posLeft}px`)},null,8,["card","posLeft","isCopyCard","onRemoveCard","onCloseModal","onUpdateKey","style"])),[[c,()=>r.closeModal()]]):h("",!0),t("div",{class:"action-btn",onClick:e[24]||(e[24]=u=>r.openModal("checklist-add",u))},aa),t("div",{class:"action-btn",onClick:e[25]||(e[25]=u=>r.openModal("date-picker",u))},ua),t("div",{class:"action-btn",onClick:e[26]||(e[26]=u=>r.openModal("attachments",u))},ma),t("div",{class:"action-btn",onClick:e[27]||(e[27]=u=>r.openModal("cover-picker",u))},va)]),t("div",fa,[ya,t("div",{class:"action-btn",onClick:e[28]||(e[28]=u=>r.openModal("move-card",u))},Ca),t("div",{class:"action-btn",onClick:e[29]||(e[29]=u=>r.openModal("copy-card",u))},xa),$a,Ma,Ia,t("div",{class:"action-btn remove",onClick:e[30]||(e[30]=u=>r.openModal("confirm-delete",u))},Aa),t("div",{class:"action-btn",onClick:e[31]||(e[31]=u=>r.openModal("share-card",u))},Na)])])])],32)],32)])):h("",!0)}var ve=w(xl,[["render",Oa]]);const Ga={name:"",data(){return{}},methods:{openModal(s){this.$emit("openModal",s)}},computed:{},components:{}},La={class:"quick-edit-actions-container"},Ea=t("span",{class:"icon card"},null,-1),Ja=t("span",{class:"txt"},"Open card",-1),Pa=[Ea,Ja],Va=t("span",{class:"icon label"},null,-1),ja=t("span",{class:"txt"},"Edit labels",-1),Fa=[Va,ja],Qa=t("span",{class:"icon member"},null,-1),Ka=t("span",{class:"txt"},"Change members",-1),Ha=[Qa,Ka],Ra=t("span",{class:"icon cover"},null,-1),qa=t("span",{class:"txt"},"Change cover",-1),Wa=[Ra,qa],za=t("span",{class:"icon move"},null,-1),Ya=t("span",{class:"txt"},"Move",-1),Xa=[za,Ya],Za=t("span",{class:"icon copy"},null,-1),ed=t("span",{class:"txt"},"Copy",-1),td=[Za,ed],sd=t("span",{class:"icon date"},null,-1),od=t("span",{class:"txt"},"Edit dates",-1),rd=[sd,od],nd=t("span",{class:"icon remove"},null,-1),ld=t("span",{class:"txt"},"Delete",-1),id=[nd,ld];function ad(s,e,n,i,o,r){return l(),a("section",La,[t("div",{onClick:e[0]||(e[0]=p=>s.$emit("openCard")),class:"action-button"},Pa),t("div",{onClick:e[1]||(e[1]=p=>r.openModal("label-picker")),class:"action-button"},Fa),t("div",{onClick:e[2]||(e[2]=p=>r.openModal("member-picker")),class:"action-button"},Ha),t("div",{onClick:e[3]||(e[3]=p=>r.openModal("cover-picker")),class:"action-button"},Wa),t("div",{onClick:e[4]||(e[4]=p=>r.openModal("move-place-picker")),class:"action-button"},Xa),t("div",{onClick:e[5]||(e[5]=p=>r.openModal("copy-place-picker")),class:"action-button"},td),t("div",{onClick:e[6]||(e[6]=p=>r.openModal("date-picker")),class:"action-button"},rd),t("div",{onClick:e[7]||(e[7]=p=>r.openModal("confirm-delete")),class:"action-button"},id)])}var dd=w(Ga,[["render",ad]]);const cd={name:"card-preview",props:{card:Object,isQuickEdit:Object,groupId:String},components:{cardEdit:ve,quickEditActions:dd,labelPicker:pe,memberPicker:he,coverPicker:_e,datePicker:me,confirmDelete:ge},data(){return{activeColor:"red",isChecklistDone:!1,newTitle:"",cmpName:null}},methods:{openCard(){this.$emit("closeQuickEdit")},openCardEdit(){if(this.isQuickEdit.boolean)return;const s=this.$router.currentRoute._value.fullPath;this.$router.push(`${s}/edit/${this.card.id}`)},toggleLabelTitle(){this.$store.commit({type:"toggleLabelTitle"})},calcProgress(){const s=this.card.checklists.reduce((e,n)=>{const i=n.todos.reduce((o,r)=>(r.isDone&&o++,o),0);return e.todosCount+=n.todos.length,e.doneTodos+=i,e},{todosCount:0,doneTodos:0});return s.todosCount===s.doneTodos?this.isChecklistDone=!0:this.isChecklistDone=!1,`${s.doneTodos}/${s.todosCount}`},openQuickEdit(){this.newTitle=JSON.parse(JSON.stringify(this.card.title)),this.$emit("openQuickEdit",this.card.id)},async updateTitle(){if(!this.newTitle)return;const s=JSON.parse(JSON.stringify(this.card));s.title=this.newTitle,await this.addActivity("updated this card title"),this.$store.dispatch({type:"updateCard",groupId:this.groupId,card:s}),this.$emit("closeQuickEdit")},openModal(s){this.cmpName=s},closeModal(){this.cmpName=null},async updateKey(s,e,n){const i=JSON.parse(JSON.stringify(this.card));s==="checklists"?(e.id=utilService.makeId(),i[s].push(e)):i[s]=e,n&&await this.addActivity(n),this.$store.dispatch({type:"updateCard",groupId:this.groupId,card:i})},async removeCard(){await this.addActivity(`removed card ${this.card.title}`),await this.$store.dispatch("removeCard",{groupId:this.groupId,cardId:this.cardId}),this.$emit("closeQuickEdit")},async completeDate(){const s=JSON.parse(JSON.stringify(this.card));s.dueDate.isCompleted=!s.dueDate.isCompleted,s.dueDate.isCompleted?await this.addActivity("marked the due date complete"):await this.addActivity("marked the due date incomplete"),this.$store.dispatch({type:"updateCard",groupId:this.groupId,card:s})},async addActivity(s){await this.$store.dispatch({type:"addActivity",txt:s,card:this.card})}},computed:{labels(){var s=this.$store.getters.currBoard.labels;return s=s.filter(({className:e})=>e!=="color10"),s.filter(e=>this.card.labelIds.includes(e.id))},labelTitleShown(){return this.$store.getters.labelTitleShown?"open":""},doneChecklist(){return this.isChecklistDone?"completed":""},computedQuickEdit(){return this.isQuickEdit.boolean&&this.isQuickEdit.cardId===this.card.id?"quick-card-editor-open":""},checkQuickEdit(){return this.isQuickEdit.boolean&&this.isQuickEdit.cardId===this.card.id},members(){var s=this.$store.getters.currBoard.members;return s.filter(e=>this.card.memberIds.includes(e._id))},formattedDate(){const s=new Date(this.card.dueDate.date),e=s.toLocaleString("en-US",{month:"short"}),n=s.getDate();return`${e} ${n}`},checkUser(){return this.card.memberIds.includes(this.$store.getters.loggedinUser._id)}}},ud=t("div",{class:"card-preview-cover-color"},null,-1),pd={key:1,class:"card-preview-inside-container"},hd={key:0,class:"card-preview-cover"},md=["src"],_d=["src"],gd={class:"card-label-container"},vd=["title"],fd={key:0},yd={key:2},bd={key:4,class:"card-preview-title"},kd={class:"card-icons-container"},Cd={key:0,title:"watch",class:"icon-div"},wd=t("span",{class:"eyecon"},null,-1),Bd=[wd],xd={key:0,class:"date-complete-icon"},$d={key:1,class:"date-icon"},Md={class:"date"},Id={key:2,title:"description",class:"icon-div"},Sd=t("span",{class:"desc"},null,-1),Td=[Sd],Ad={key:3,title:"comments",class:"icon-div"},Dd=t("span",{class:"comment"},null,-1),Ud={class:"txt"},Nd={key:4,title:"attachments",class:"icon-div"},Od=t("span",{class:"attachment"},null,-1),Gd={class:"txt"},Ld=t("span",{class:"check"},null,-1),Ed={class:"txt"},Jd=["title"],Pd=["src"],Vd={key:1};function jd(s,e,n,i,o,r){const p=f("quick-edit-actions"),c=T("focus"),d=T("click-outside");return l(),a("section",null,[t("div",{onClick:e[9]||(e[9]=(...u)=>r.openCardEdit&&r.openCardEdit(...u)),class:y(["card-preview",r.computedQuickEdit])},[n.card.style.fullCover&&!r.checkQuickEdit?(l(),a("div",{key:0,style:x(n.card.style.type==="color"?`background: ${n.card.style.cover}`:`background-image: url('${n.card.style.cover}')`),class:y(["card-preview-full-cover",n.card.style.type==="color"?"":"imgUrl"])},[ud,t("div",{class:y(["full-cover-title",n.card.style.isDark?"dark":"light"])},[t("span",null,m(n.card.title),1)],2),t("span",{onClick:e[0]||(e[0]=b((...u)=>r.openQuickEdit&&r.openQuickEdit(...u),["stop"])),class:"edit-card"})],6)):(l(),a("div",pd,[n.card.style.cover?(l(),a("div",hd,[n.card.style.type==="url"?(l(),a("img",{key:0,class:"card-image",src:n.card.style.cover},null,8,md)):(l(),a("div",{key:1,class:"card-preview-cover-color",style:x(`background-color: ${n.card.style.cover};`)},null,4))])):h("",!0),n.card.attachments.length&&!n.card.style.cover?(l(),a("img",{key:1,class:"card-image",src:n.card.attachments[0].url},null,8,_d)):h("",!0),t("div",gd,[(l(!0),a(C,null,k(r.labels,u=>(l(),a("span",{key:u.id,onClick:e[1]||(e[1]=b((...O)=>r.toggleLabelTitle&&r.toggleLabelTitle(...O),["stop"])),class:y([[u.className,r.labelTitleShown],"card-label"]),title:u.title},[r.labelTitleShown?(l(),a("span",fd,m(u.title),1)):h("",!0)],10,vd))),128))]),r.checkQuickEdit&&r.labels.length?(l(),a("br",yd)):h("",!0),t("span",{onClick:e[2]||(e[2]=b((...u)=>r.openQuickEdit&&r.openQuickEdit(...u),["stop"])),class:"edit-card"}),r.checkQuickEdit?g((l(),a("textarea",{key:3,style:x(r.labels.length?"transform: translateY(-9px)":"transform: translateY(3px);"),"onUpdate:modelValue":e[3]||(e[3]=u=>o.newTitle=u),onFocus:e[4]||(e[4]=u=>u.target.select()),onKeydown:e[5]||(e[5]=G(b((...u)=>r.updateTitle&&r.updateTitle(...u),["prevent"]),["enter"]))},null,36)),[[M,o.newTitle],[c]]):(l(),a("span",bd,m(n.card.title),1)),t("div",kd,[t("div",null,[r.checkUser?(l(),a("div",Cd,Bd)):h("",!0),n.card.dueDate?(l(),a("div",{key:1,class:y([{complete:n.card.dueDate.isCompleted},"icon-div date-preview"]),title:"date",onClick:e[6]||(e[6]=b((...u)=>r.completeDate&&r.completeDate(...u),["stop"]))},[n.card.dueDate.isCompleted?(l(),a("span",xd)):(l(),a("span",$d)),t("span",Md,m(r.formattedDate),1)],2)):h("",!0),n.card.description?(l(),a("div",Id,Td)):h("",!0),n.card.comments.length?(l(),a("div",Ad,[Dd,t("span",Ud,m(n.card.comments.length),1)])):h("",!0),n.card.attachments.length?(l(),a("div",Nd,[Od,t("span",Gd,m(n.card.attachments.length),1)])):h("",!0),n.card.checklists.length?(l(),a("div",{key:5,title:"Checklist items",class:y(["icon-div",r.doneChecklist])},[Ld,t("span",Ed,m(r.calcProgress()),1)],2)):h("",!0),(l(!0),a(C,null,k(r.members,u=>(l(),a("div",{class:"avatar-container",key:u.id,title:u.fullname},[u.imgUrl?(l(),a("img",{key:0,src:u.imgUrl,alt:""},null,8,Pd)):(l(),a("span",Vd,m(u.fullname.split(" ")[0].split("")[0]+u.fullname.split(" ")[1].split("")[0]),1))],8,Jd))),128))])]),r.checkQuickEdit?(l(),a("button",{key:5,class:"save-quick-edit",onClick:e[7]||(e[7]=b((...u)=>r.updateTitle&&r.updateTitle(...u),["stop"]))},"Save")):h("",!0),I(p,{onMousedown:e[8]||(e[8]=b(()=>{},["stop"])),onOpenCard:r.openCard,onOpenModal:r.openModal,hidden:!r.checkQuickEdit,class:y(r.checkQuickEdit?"fade-in":"")},null,8,["onOpenCard","onOpenModal","hidden","class"]),o.cmpName&&r.checkQuickEdit?g((l(),B(X(o.cmpName),{key:6,card:n.card,onRemoveCard:r.removeCard,onCloseModal:r.closeModal,onUpdateKey:r.updateKey},null,8,["card","onRemoveCard","onCloseModal","onUpdateKey"])),[[d,()=>r.closeModal()]]):h("",!0)]))],2)])}var Fd=w(cd,[["render",jd]]);const Qd={name:"group-actions",props:{isSort:Boolean},data(){return{groupTitle:"",openCopyGroup:!1,openMoveGroup:!1,openMoveCards:!1,openSortCards:!1,currentGroups:this.$store.getters.currBoard.groups,chosenBoard:this.$store.getters.currBoard,groupPos:null}},methods:{addCard(){this.$emit("addCard")},removeGroup(){this.$emit("removeGroup")},copyGroup(){this.$emit("copyGroup",this.groupTitle),this.groupTitle=""},moveGroup(){const s=this.boards.find(e=>e._id===this.chosenBoard._id);this.$emit("moveGroup",s,this.groupPos)},moveAllCards(s){this.$emit("moveAllCards",s)},removeCards(){this.$emit("removeCards")},closeGrpAct(){this.$emit("closeGrpAct")},sortBy(s){this.$emit("sortBy",s)}},computed:{boards(){return this.$store.getters.boards}},components:{}},Kd={class:"group-actions"},Hd={class:"grp-act-header"},Rd=t("p",null,"List actions",-1),qd=t("i",{class:"fa-solid fa-xmark"},null,-1),Wd=[qd],zd={key:0},Yd=t("a",null,"Add card...",-1),Xd=[Yd],Zd=t("a",null,"Copy list...",-1),ec=[Zd],tc=t("a",null,"Move list...",-1),sc=[tc],oc={key:0},rc=t("a",null,"Sort By...",-1),nc=[rc],lc=t("hr",null,null,-1),ic=t("a",null,"Move all cards in this list...",-1),ac=[ic],dc=t("a",null,"Remove all cards in this list...",-1),cc=[dc],uc=t("hr",null,null,-1),pc=t("a",null,"Remove this list",-1),hc=[pc],mc={key:1,class:"copy-group"},_c={key:2,class:"move-group"},gc={class:"board-info"},vc=t("p",null,"Board",-1),fc=["value"],yc={class:"board-info"},bc=t("p",null,"Position",-1),kc=["value"],Cc=t("button",null,"Save",-1),wc={key:3},Bc=["onClick"],xc={key:4},$c={class:"sort"};function Mc(s,e,n,i,o,r){const p=T("focus");return l(),a("section",Kd,[t("div",Hd,[Rd,t("span",{onClick:e[0]||(e[0]=(...c)=>r.closeGrpAct&&r.closeGrpAct(...c))},Wd)]),!o.openCopyGroup&&!o.openMoveGroup&&!o.openMoveCards&&!o.openSortCards?(l(),a("div",zd,[t("ul",null,[t("li",{onClick:e[1]||(e[1]=(...c)=>r.addCard&&r.addCard(...c))},Xd),t("li",{onClick:e[2]||(e[2]=b(c=>o.openCopyGroup=!0,["stop"]))},ec),t("li",{onClick:e[3]||(e[3]=b(c=>o.openMoveGroup=!0,["stop"]))},sc)]),t("ul",null,[n.isSort?(l(),a("hr",oc)):h("",!0),n.isSort?(l(),a("li",{key:1,onClick:e[4]||(e[4]=b(c=>o.openSortCards=!0,["stop"]))},nc)):h("",!0),lc]),t("ul",null,[t("li",{onClick:e[5]||(e[5]=b(c=>o.openMoveCards=!0,["stop"]))},ac),t("li",{onClick:e[6]||(e[6]=(...c)=>r.removeCards&&r.removeCards(...c))},cc)]),t("ul",null,[uc,t("li",{onClick:e[7]||(e[7]=(...c)=>r.removeGroup&&r.removeGroup(...c))},hc)])])):h("",!0),o.openCopyGroup?(l(),a("div",mc,[g(t("input",{"onUpdate:modelValue":e[8]||(e[8]=c=>o.groupTitle=c),type:"text",placeholder:"Enter list title"},null,512),[[p],[M,o.groupTitle]]),t("button",{onClick:e[9]||(e[9]=(...c)=>r.copyGroup&&r.copyGroup(...c))},"Create list")])):h("",!0),o.openMoveGroup?(l(),a("div",_c,[t("form",{onSubmit:e[12]||(e[12]=b((...c)=>r.moveGroup&&r.moveGroup(...c),["prevent"]))},[t("label",null,[t("div",gc,[vc,t("p",null,m(o.chosenBoard.title),1),g(t("select",{"onUpdate:modelValue":e[10]||(e[10]=c=>o.chosenBoard=c)},[(l(!0),a(C,null,k(r.boards,c=>(l(),a("option",{key:c._id,value:c},m(c.title),9,fc))),128))],512),[[H,o.chosenBoard]])])]),t("label",null,[t("div",yc,[bc,t("p",null,m(o.groupPos+1),1),g(t("select",{"onUpdate:modelValue":e[11]||(e[11]=c=>o.groupPos=c)},[(l(!0),a(C,null,k(o.chosenBoard.groups,(c,d)=>(l(),a("option",{key:c,value:d},m(d+1),9,kc))),128))],512),[[H,o.groupPos]])])]),Cc],32)])):h("",!0),o.openMoveCards?(l(),a("div",wc,[t("ul",null,[(l(!0),a(C,null,k(o.currentGroups,c=>(l(),a("li",{onClick:d=>r.moveAllCards(c),key:c.id},m(c.title),9,Bc))),128))])])):h("",!0),o.openSortCards?(l(),a("div",xc,[t("ul",$c,[t("li",{onClick:e[13]||(e[13]=c=>r.sortBy("createdNew"))},"Date created (newest first)"),t("li",{onClick:e[14]||(e[14]=c=>r.sortBy("createdOld"))},"Date created (oldest first)"),t("li",{onClick:e[15]||(e[15]=c=>r.sortBy("name"))},"Card name (alphabetically)"),t("li",{onClick:e[16]||(e[16]=c=>r.sortBy("dueDate"))},"Due date")])])):h("",!0)])}var Ic=w(Qd,[["render",Mc]]);const fe=(s,e)=>{const{removedIndex:n,addedIndex:i,payload:o}=e;if(n===null&&i===null)return s;const r=[...s];let p=o;return n!==null&&(p=r.splice(n,1)[0]),i!==null&&r.splice(i,0,p),r};const Sc={name:"group",props:{group:Object},components:{cardPreview:Fd,groupActions:Ic,Container:ae,Draggable:de},created(){},data(){return{isAddCard:!1,groupTitle:JSON.parse(JSON.stringify(this.group.title)),cardTitle:"",editTitle:!1,openGrpAct:!1,isQuickEdit:{boolean:!1,cardId:""},posLeft:null}},methods:{toggleGroupActions(s){this.openGrpAct=!this.openGrpAct,this.calcPosition(s.target.getBoundingClientRect())},addCard(){!this.cardTitle||(this.$store.dispatch({type:"addCard",groupId:this.group.id,title:this.cardTitle}),this.cardTitle="")},actionAdd(){this.isAddCard=!0,this.openGrpAct=!1},removeGroup(){this.$store.dispatch({type:"removeGroup",groupId:this.group.id}),this.openGrpAct=!1},removeCard(s){this.$store.dispatch({type:"removeCard",groupId:this.group.id,cardId:s})},onCardDrop(s,e){const n=Object.assign({},JSON.parse(JSON.stringify(s)));n.cards=fe(n.cards,e),this.$emit("onCardDrop",{cards:n.cards,groupId:n.id})},copyGroup(s){this.openGrpAct=!1;const e=this.board.groups.findIndex(i=>i.id===this.group.id),n=JSON.parse(JSON.stringify(this.group));n.title=s,n.id=E.makeId,this.board.groups.splice(e+1,0,n),this.$store.dispatch({type:"saveBoard",board:this.board})},async moveGroup(s,e){this.openGrpAct=!1,s.groups.splice(e,0,JSON.parse(JSON.stringify(this.group))),await this.$store.dispatch({type:"saveBoard",board:s});const n=this.board.groups.findIndex(i=>i.id===this.group.id);this.board.groups.splice(n,1),this.$store.dispatch({type:"saveBoard",board:this.board})},moveAllCards(s){this.openGrpAct=!1;const e=JSON.parse(JSON.stringify(this.group)),n=JSON.parse(JSON.stringify(this.group.cards));s.cards.push(...n),e.cards=[];const i=this.board.groups.findIndex(r=>r.id===e.id);this.board.groups.splice(i,1,e);const o=this.board.groups.findIndex(r=>r.id===s.id);this.board.groups.splice(o,1,s),this.$store.dispatch({type:"saveBoard",board:this.board})},removeCards(){const s=JSON.parse(JSON.stringify(this.group));s.cards=[];const e=this.board.groups.findIndex(n=>n.id===this.group.id);this.board.groups[e]=s,this.$store.dispatch({type:"saveBoard",board:this.board})},closeQuickEdit(){this.isQuickEdit.boolean=!1,this.isQuickEdit.cardId=""},openQuickEdit(s){this.isQuickEdit.boolean=!0,this.isQuickEdit.cardId=s},getChildPayload(s){return this.group.cards[s]},changeGrpTitle(){const s=JSON.parse(JSON.stringify(this.group));s.title=this.groupTitle;const e=this.board.groups.findIndex(n=>n.id===this.group.id);this.board.groups.splice(e,1,s),this.$store.dispatch({type:"saveBoard",board:this.board}),this.editTitle=!1},sortCards(s){this.openGrpAct=!1;var e={type:"sort",groupId:this.group.id,sortBy:s};this.$store.dispatch({type:"filterBoard",boardId:this.board._id,filterBy:e})},calcPosition(s){}},computed:{board(){return this.$store.getters.currBoard},computedQuickEdit(){return this.isQuickEdit.boolean?"quick-card-editor":""}}},ye=s=>(Z("data-v-5818aac0"),s=s(),ee(),s),Tc={class:"group-preview"},Ac={class:"group-header-container"},Dc={key:0,class:"add-card-container"},Uc={class:"add-card-actions"},Nc=ye(()=>t("i",{class:"fa-solid fa-xmark"},null,-1)),Oc=[Nc],Gc=ye(()=>t("div",{class:"add-card-btn"},[t("i",{class:"fa-solid fa-plus"}),t("span",null,"Add a card")],-1)),Lc=[Gc];function Ec(s,e,n,i,o,r){const p=f("group-actions"),c=f("card-preview"),d=f("Draggable"),u=f("Container"),O=T("click-outside"),A=T("focus");return l(),a("section",Tc,[t("div",null,[t("div",Ac,[o.editTitle?h("",!0):(l(),a("p",{key:0,class:"group-title",onClick:e[0]||(e[0]=S=>o.editTitle=!0)},m(n.group.title),1)),o.editTitle?g((l(),a("input",{key:1,onKeyup:e[1]||(e[1]=G((...S)=>r.changeGrpTitle&&r.changeGrpTitle(...S),["enter"])),onFocus:e[2]||(e[2]=S=>S.target.select()),"onUpdate:modelValue":e[3]||(e[3]=S=>o.groupTitle=S)},null,544)),[[O,r.changeGrpTitle],[A],[M,o.groupTitle]]):h("",!0),t("span",{class:"act-btn",onClick:e[4]||(e[4]=S=>r.toggleGroupActions(S))}),o.openGrpAct?g((l(),B(p,{key:2,isSort:n.group.cards.length>1,onCloseGrpAct:e[5]||(e[5]=S=>o.openGrpAct=!1),onRemoveCards:r.removeCards,onMoveAllCards:r.moveAllCards,onMoveGroup:r.moveGroup,onCopyGroup:r.copyGroup,onRemoveGroup:r.removeGroup,onAddCard:r.actionAdd,onSortBy:r.sortCards,style:x(`left: ${o.posLeft}px`)},null,8,["isSort","onRemoveCards","onMoveAllCards","onMoveGroup","onCopyGroup","onRemoveGroup","onAddCard","onSortBy","style"])),[[O,()=>o.openGrpAct=!1]]):h("",!0)]),I(u,{"drag-class":"on-dragging",class:"card-preview-container",onDrop:e[10]||(e[10]=S=>r.onCardDrop(n.group,S)),"group-name":"1","get-child-payload":r.getChildPayload},{default:_(()=>[(l(!0),a(C,null,k(n.group.cards,S=>(l(),B(d,{key:S.id},{default:_(()=>[I(c,{onOpenQuickEdit:r.openQuickEdit,onCloseQuickEdit:r.closeQuickEdit,groupId:n.group.id,isQuickEdit:o.isQuickEdit,card:S},null,8,["onOpenQuickEdit","onCloseQuickEdit","groupId","isQuickEdit","card"])]),_:2},1024))),128)),o.isAddCard?(l(),a("div",Dc,[g(t("textarea",{onKeyup:e[6]||(e[6]=G((...S)=>r.addCard&&r.addCard(...S),["enter"])),class:"add-card-textarea","onUpdate:modelValue":e[7]||(e[7]=S=>o.cardTitle=S),placeholder:"Enter a title for this card..."},null,544),[[O,()=>r.addCard()],[A],[M,o.cardTitle]]),t("div",Uc,[t("button",{onClick:e[8]||(e[8]=(...S)=>r.addCard&&r.addCard(...S))},"Add card"),t("span",{onClick:e[9]||(e[9]=S=>o.isAddCard=!1)},Oc)])])):h("",!0)]),_:1},8,["get-child-payload"]),o.isAddCard?h("",!0):(l(),a("div",{key:0,class:"open-card-container",onClick:e[11]||(e[11]=S=>o.isAddCard=!0)},Lc))]),o.isQuickEdit.boolean?(l(),a("div",{key:0,name:"quick-card-editor",onMousedown:e[12]||(e[12]=b(()=>{},["stop"])),onClick:e[13]||(e[13]=b(S=>o.isQuickEdit.boolean=!1,["stop"])),class:y(r.computedQuickEdit)},null,34)):h("",!0)])}var Jc=w(Sc,[["render",Ec],["__scopeId","data-v-5818aac0"]]);const Pc={name:"",data(){return{openChangeBg:!1,images:null,colors:this.$store.getters.boardColors,search:"",openChangeImg:!1,openChangeColor:!1}},created(){this.searchImages("nature")},methods:{async searchImages(s){const e=await F.getBgImages(s);this.images=e.photos.results},async onUploadImg(s){const e=await F.uploadImg(s);this.$emit("setBoardBg",e.url)},setBoardBg(s){this.$emit("setBoardBg",s)},setBoardClr(s){this.$emit("setBoardClr",s)},closeModal(){this.$emit("closeMenu")},goBack(){this.openChangeImg||this.openChangeColor?(this.openChangeImg=!1,this.openChangeColor=!1):this.openChangeBg=!1},formattedTime(s){return E.getFormattedTime(s)}},computed:{isFirstPage(){return!(this.openChangeBg||this.openChangeImg||this.openChangeColor)},activities(){return this.$store.getters.currBoard.activities||[]}},components:{imgService:F,customModal:U}},N=s=>(Z("data-v-53154b46"),s=s(),ee(),s),Vc=N(()=>t("p",{class:"header-title"},"Menu",-1)),jc={key:0},Fc={class:"menu-options"},Qc=N(()=>t("li",null,[t("i",{class:"fa-brands fa-trello"}),v(),t("a",null,"About this board")],-1)),Kc=N(()=>t("i",{class:"fa-solid fa-image"},null,-1)),Hc=v(),Rc=N(()=>t("a",null,"Change background",-1)),qc=[Kc,Hc,Rc],Wc=N(()=>t("hr",null,null,-1)),zc=N(()=>t("ul",{class:"menu-options"},[t("li",null,[t("i",{class:"fa-solid fa-list-ul"}),v(),t("a",{class:"activity"},"Activity")])],-1)),Yc={key:0,class:"activities-container"},Xc={class:"avatar-container member"},Zc=["src"],eu={key:1},tu={class:"card-comment activities"},su={class:"comment-by"},ou={class:"activity-txt"},ru={class:"comment-date"},nu={key:0,class:"bg-choose"},lu={class:"bg-choose-top"},iu=N(()=>t("img",{src:"https://res.cloudinary.com/trellox/image/upload/v1648369955/background_ffsmh3.jpg",alt:"background image picker"},null,-1)),au=N(()=>t("p",null,"Photos",-1)),du=[iu,au],cu=N(()=>t("img",{src:"https://res.cloudinary.com/trellox/image/upload/v1648369959/colors_ucac3l.jpg",alt:"color picker"},null,-1)),uu=N(()=>t("p",null,"Colors",-1)),pu=[cu,uu],hu=N(()=>t("hr",null,null,-1)),mu=N(()=>t("h2",null,"Custom",-1)),_u={class:"bg-picker"},gu={class:"custom-bg"},vu=N(()=>t("i",{class:"fa-solid fa-plus"},null,-1)),fu={key:0,class:"bg-choose-img"},yu={key:0,class:"bg-images"},bu=["onClick"],ku=["src"],Cu={key:0,class:"bg-choose-color"},wu={key:0,class:"bg-colors"},Bu=["onClick"];function xu(s,e,n,i,o,r){const p=f("custom-modal");return l(),B(p,{isFirstPage:r.isFirstPage,onGoBack:r.goBack,class:"board-menu",onCloseModal:r.closeModal},{header:_(()=>[Vc]),default:_(()=>[!o.openChangeBg&&!o.openChangeImg&&!o.openChangeColor?(l(),a("menu",jc,[t("ul",Fc,[Qc,t("li",{onClick:e[0]||(e[0]=c=>o.openChangeBg=!0)},qc)]),Wc,zc,r.activities.length?(l(),a("div",Yc,[(l(!0),a(C,null,k(r.activities.splice(0,20),c=>(l(),a("div",{class:"card-comment-container",key:c.id},[t("div",Xc,[c.byMember.imgUrl?(l(),a("img",{key:0,src:c.byMember.imgUrl,alt:""},null,8,Zc)):(l(),a("span",eu,m(c.byMember._id?c.byMember.fullname.split(" ")[0].split("")[0]+c.byMember.fullname.split(" ")[1].split("")[0]:"G"),1))]),t("div",tu,[t("div",null,[t("span",su,m(c.byMember.fullname),1),t("span",ou,m(c.txt),1)]),t("span",ru,m(r.formattedTime(c.createdAt)),1)])]))),128))])):h("",!0)])):h("",!0),I(j,{name:"inside-menu"},{default:_(()=>[o.openChangeBg&&!o.openChangeImg&&!o.openChangeColor?(l(),a("div",nu,[t("div",lu,[t("div",{onClick:e[1]||(e[1]=c=>o.openChangeImg=!0),class:"bg-picker"},du),t("div",{onClick:e[2]||(e[2]=c=>o.openChangeColor=!0),class:"bg-picker"},pu)]),hu,mu,t("div",_u,[t("div",gu,[t("label",null,[vu,t("input",{type:"file",onChange:e[3]||(e[3]=(...c)=>r.onUploadImg&&r.onUploadImg(...c))},null,32)])])])])):h("",!0)]),_:1}),I(j,{name:"inside-menu"},{default:_(()=>[o.openChangeImg?(l(),a("div",fu,[g(t("input",{class:"custom-input",placeholder:"Photos",type:"text","onUpdate:modelValue":e[4]||(e[4]=c=>o.search=c),onInput:e[5]||(e[5]=c=>r.searchImages(o.search))},null,544),[[M,o.search]]),o.images?(l(),a("ul",yu,[(l(!0),a(C,null,k(o.images,c=>(l(),a("li",{key:c.id},[t("div",{onClick:d=>r.setBoardBg(c.urls.full)},[t("img",{src:c.urls.small},null,8,ku)],8,bu)]))),128))])):h("",!0)])):h("",!0)]),_:1}),I(j,{name:"inside-menu"},{default:_(()=>[o.openChangeColor?(l(),a("div",Cu,[o.images?(l(),a("ul",wu,[(l(!0),a(C,null,k(o.colors,c=>(l(),a("li",{key:c},[t("div",{onClick:d=>r.setBoardClr(c),class:"bg-color",style:x({"background-color":c})},null,12,Bu)]))),128))])):h("",!0)])):h("",!0)]),_:1})]),_:1},8,["isFirstPage","onGoBack","onCloseModal"])}var $u=w(Pc,[["render",xu],["__scopeId","data-v-53154b46"]]);const Mu={props:{card:Object},components:{customModal:U},created(){},data(){return{filterBy:{txt:"",by:{noOne:!1,options:[]},due:{none:!1,over:!1,tommarow:!1},label:{none:!1,options:[]}}}},methods:{closeModal(){this.$emit("closeModal")},updateKey(){this.$emit("updateKey","filterBy",this.filterBy)}},computed:{members(){return this.$store.getters.currBoard.members},labels(){return this.$store.getters.currBoard.labels},loggedinUserFullname(){return"Shani Kupiec"}},unmounted(){},watch:{filterBy:{handler(){this.updateKey()},deep:!0}}},Iu=v(" Filter "),Su={class:"board-filter-body"},Tu=t("p",null,"Keyword",-1),Au=t("p",{class:"mini"},"Search cards, members, labels, and more.",-1),Du=t("p",null,"Members",-1),Uu={key:0},Nu=t("div",{class:"avatar-container custom"},[t("i",{class:"fa-solid fa-user"})],-1),Ou=t("span",{class:"label-txt"},"No members",-1),Gu=["value"],Lu=t("div",{class:"avatar-container"},[t("span",null,"X")],-1),Eu={class:"label-txt"},Ju=t("p",null,"Due date",-1),Pu={key:0},Vu=t("div",{class:"avatar-container custom"},[t("i",{class:"fa-solid fa-user"})],-1),ju=t("span",{class:"label-txt"},"No dates",-1),Fu=t("div",{class:"avatar-container"},[t("span",null,"X")],-1),Qu=t("span",{class:"label-txt"},"Over due",-1),Ku=t("div",{class:"avatar-container"},[t("span",null,"X")],-1),Hu=t("span",{class:"label-txt"},"Due in the next day",-1),Ru={key:0},qu=t("p",null,"Labels",-1),Wu={key:0},zu=t("div",{class:"avatar-container custom"},[t("i",{class:"fa-solid fa-user"})],-1),Yu=t("span",{class:"label-txt"},"No labels",-1),Xu=["onUpdate:modelValue","value"],Zu={class:"label-txt"};function ep(s,e,n,i,o,r){const p=f("custom-modal"),c=T("focus");return l(),B(p,{onCloseModal:r.closeModal},{header:_(()=>[Iu]),default:_(()=>[t("section",Su,[Tu,g(t("input",{"onUpdate:modelValue":e[0]||(e[0]=d=>o.filterBy.txt=d),class:"custom-input",type:"text",placeholder:"Enter a keyword..."},null,512),[[c],[M,o.filterBy.txt]]),Au,t("div",null,[Du,t("ul",null,[o.filterBy.txt?h("",!0):(l(),a("li",Uu,[t("label",null,[g(t("input",{"onUpdate:modelValue":e[1]||(e[1]=d=>o.filterBy.by.noOne=d),class:y({full:o.filterBy.by.noOne}),type:"checkbox"},null,2),[[P,o.filterBy.by.noOne]]),Nu,Ou])])),(l(!0),a(C,null,k(r.members,d=>(l(),a("li",{key:d._id},[t("label",null,[g(t("input",{"onUpdate:modelValue":e[2]||(e[2]=u=>o.filterBy.by.options=u),class:y({full:o.filterBy.by.options.includes(d._id)}),value:d._id,type:"checkbox"},null,10,Gu),[[P,o.filterBy.by.options]]),Lu,t("span",Eu,m(d.fullname),1)])]))),128))])]),t("div",null,[Ju,t("ul",null,[o.filterBy.txt?h("",!0):(l(),a("li",Pu,[t("label",null,[g(t("input",{"onUpdate:modelValue":e[3]||(e[3]=d=>o.filterBy.due.none=d),class:y({full:o.filterBy.due.none}),type:"checkbox"},null,2),[[P,o.filterBy.due.none]]),Vu,ju])])),t("li",null,[t("label",null,[g(t("input",{"onUpdate:modelValue":e[4]||(e[4]=d=>o.filterBy.due.over=d),class:y({full:o.filterBy.due.over}),type:"checkbox"},null,2),[[P,o.filterBy.due.over]]),Fu,Qu])]),t("li",null,[t("label",null,[g(t("input",{"onUpdate:modelValue":e[5]||(e[5]=d=>o.filterBy.due.tommarow=d),class:y({full:o.filterBy.due.tommarow}),type:"checkbox"},null,2),[[P,o.filterBy.due.tommarow]]),Ku,Hu])])])]),r.labels.length?(l(),a("div",Ru,[qu,t("ul",null,[o.filterBy.txt?h("",!0):(l(),a("li",Wu,[t("label",null,[g(t("input",{"onUpdate:modelValue":e[6]||(e[6]=d=>o.filterBy.label.none=d),class:y({full:o.filterBy.label.none}),type:"checkbox"},null,2),[[P,o.filterBy.label.none]]),zu,Yu])])),(l(!0),a(C,null,k(r.labels,d=>(l(),a("li",{key:d.id},[t("label",null,[g(t("input",{"onUpdate:modelValue":u=>o.filterBy.label.options=u,class:y({full:o.filterBy.label.options.includes(d.id)}),value:d.id,type:"checkbox"},null,10,Xu),[[P,o.filterBy.label.options]]),t("span",Zu,m(d.title),1)])]))),128))])])):h("",!0),v(" "+m(o.filterBy.label.options)+" "+m(o.filterBy.by.options),1)])]),_:1},8,["onCloseModal"])}var tp=w(Mu,[["render",ep]]);const sp={components:{customModal:U},async created(){await this.$store.dispatch("loadUsers"),this.users=JSON.parse(JSON.stringify(this.$store.getters.users))},data(){return{filterBy:"",users:[]}},methods:{closeModal(){this.$emit("closeModal")},filterUsers(){const s=new RegExp(this.filterBy,"i");this.users=this.users.filter(e=>s.test(e.fullname)||s.test(e.email))}},computed:{members(){}},unmounted(){}},op=v(" Invite to board ");function rp(s,e,n,i,o,r){const p=f("custom-modal"),c=T("focus");return l(),B(p,{onCloseModal:r.closeModal},{header:_(()=>[op]),default:_(()=>[g(t("input",{"onUpdate:modelValue":e[0]||(e[0]=d=>o.filterBy=d),onInput:e[1]||(e[1]=(...d)=>r.filterUsers&&r.filterUsers(...d)),class:"custom-input",type:"text",placeholder:"Email address or name..."},null,544),[[c],[M,o.filterBy]]),t("ul",null,[(l(!0),a(C,null,k(o.users,d=>(l(),a("li",{key:d._id},m(d.fullname),1))),128))])]),_:1},8,["onCloseModal"])}var np=w(sp,[["render",rp]]);const lp={components:{groupPreview:Jc,Container:ae,Draggable:de,appHeader:ue,boardMenu:$u,boardFilter:tp,userInvite:np},data(){return{isAddGroup:!1,groupTitle:"",board:null,openMenu:!1,savingGroup:!1,lastBoard:null,groupsCount:0,openFilter:!1,openInvite:!1,editTitle:!0}},async created(){const{boardId:s}=this.$route.params;this.board=await this.$store.dispatch({type:"setCurrBoard",boardId:s}),this.updateKey("recentlyViewed",Date.now())},methods:{async updateKey(s,e){const n=JSON.parse(JSON.stringify(this.board));e==="toggle"?n[s]=!n[s]:n[s]=e,await this.$store.dispatch({type:"saveBoard",board:n}),this.board=n},_filter(s){const e=s.filterBy;return console.log("filterBy",e),e.by.noOne?s.groups=s.groups.map(n=>(n.cards=n.cards.filter(i=>i.memberIds.length===0),n)):e.by.options.length&&(s.groups=s.groups.map(n=>(n.cards=n.cards.filter(i=>{if(i.memberIds=i.memberIds.filter(o=>e.by.options.includes(o)),i.memberIds.length)return i}),n)),console.log("here2 board",s)),e.label.none?s.groups=s.groups.map(n=>(n.cards=n.cards.filter(i=>i.labelIds.length===0),n)):e.label.options.length&&(s.groups=s.groups.map(n=>(n.cards=n.cards.filter(i=>{if(i.labelIds=i.labelIds.filter(o=>e.label.options.includes(o)),i.labelIds.length)return i}),n)),console.log("here2 board",s)),s},async addGroup(){!this.groupTitle||(await this.$store.dispatch({type:"addGroup",title:this.groupTitle}),this.groupTitle="")},async onGroupDrop(s){try{const e=Object.assign({},this.board);e.groups=fe(e.groups,s),this.lastBoard=JSON.parse(JSON.stringify(this.board)),this.board=e,await this.$store.dispatch({type:"saveBoard",board:e})}catch(e){console.log("err",e),this.board=this.lastBoard}},async onCardDrop({cards:s,groupId:e}){try{const n=JSON.parse(JSON.stringify(this.board)),i=this.board.groups.findIndex(o=>o.id===e);n.groups[i].cards=s,this.groupsCount===0&&(this.lastBoard=JSON.parse(JSON.stringify(this.board))),this.board=n,this.groupsCount++,this.groupsCount===this.board.groups.length&&(await this.$store.dispatch({type:"saveBoard",board:n}),this.groupsCount=0)}catch(n){console.log("err",n),this.board=this.lastBoard}},setBoardBg(s){const e=JSON.parse(JSON.stringify(this.board));e.style.bgColor="",e.style.bgImgUrl=s,this.$store.dispatch({type:"saveBoard",board:e})},setBoardClr(s){console.log("boardClr",s);const e=JSON.parse(JSON.stringify(this.board));e.style.bgImgUrl="",e.style.bgColor=s,this.$store.dispatch({type:"saveBoard",board:e})},editBoardTitle(s){const e=JSON.parse(JSON.stringify(this.board));e.title=s.currentTarget.textContent,this.$store.dispatch({type:"saveBoard",board:e})}},computed:{boardFromStore(){return this.$store.getters.currBoard},members(){return this.$store.getters.currBoard.members}},watch:{boardFromStore:{handler(){this.board=this.boardFromStore},deep:!0}}},Q=s=>(Z("data-v-4aa84ecb"),s=s(),ee(),s),ip={class:"board-view"},ap={class:"board-nav"},dp={class:"left-nav"},cp=["contenteditable"],up=Q(()=>t("span",{class:"seperator"},"|",-1)),pp={class:"members-container"},hp=["title"],mp=["src"],_p={key:1},gp={class:"right-nav"},vp=Q(()=>t("i",{class:"fa-solid fa-filter"},null,-1)),fp=v(" Filter"),yp=[vp,fp],bp=Q(()=>t("i",{class:"fa-solid fa-ellipsis"},null,-1)),kp=v(" Show menu"),Cp=[bp,kp],wp=Q(()=>t("i",{class:"fa-solid fa-plus"},null,-1)),Bp=Q(()=>t("span",null,"Add another list",-1)),xp=[wp,Bp],$p={key:1,class:"add-group-container"},Mp={class:"add-group-actions"},Ip=Q(()=>t("i",{class:"fa-solid fa-xmark"},null,-1)),Sp=[Ip];function Tp(s,e,n,i,o,r){const p=f("app-header"),c=f("user-invite"),d=f("boardFilter"),u=f("board-menu"),O=f("group-preview"),A=f("Draggable"),S=f("Container"),ke=f("router-view"),z=T("click-outside"),Ce=T("focus");return o.board?(l(),a("section",{key:0,class:"board-wrapper",style:x({"background-image":"url("+o.board.style.bgImgUrl+")","background-color":o.board.style.bgColor})},[I(p,{class:"board-header"}),t("div",ip,[t("nav",ap,[t("div",dp,[g((l(),a("h2",{onKeydown:e[0]||(e[0]=G(b((...$)=>r.editBoardTitle&&r.editBoardTitle(...$),["prevent"]),["enter"])),onKeyup:e[1]||(e[1]=G(b($=>o.editTitle=!1,["prevent"]),["enter"])),onClick:e[2]||(e[2]=$=>o.editTitle=!0),contenteditable:o.editTitle},[v(m(o.board.title),1)],40,cp)),[[z,()=>r.editBoardTitle()]]),t("button",{class:y(["star",{full:o.board.isStarred}]),onClick:e[3]||(e[3]=$=>r.updateKey("isStarred","toggle"))},null,2),up,t("div",pp,[(l(!0),a(C,null,k(r.members,$=>(l(),a("div",{class:"avatar-container",key:$.id,title:$.fullname},[$.imgUrl?(l(),a("img",{key:0,src:$.imgUrl,alt:""},null,8,mp)):(l(),a("span",_p,m($.fullname.split(" ")[0].split("")[0]+$.fullname.split(" ")[1].split("")[0]),1))],8,hp))),128))]),t("button",{class:"invite",onClick:e[4]||(e[4]=$=>o.openInvite=!0)},"Invite"),o.openInvite?g((l(),B(c,{key:0,onCloseModal:e[5]||(e[5]=$=>o.openInvite=!1)},null,512)),[[z,()=>o.openInvite=!1]]):h("",!0)]),t("div",gp,[t("button",{onClick:e[6]||(e[6]=$=>o.openFilter=!o.openFilter)},yp),t("button",{onClick:e[7]||(e[7]=$=>o.openMenu=!o.openMenu)},Cp)]),o.openFilter?g((l(),B(d,{key:0,onUpdateKey:r.updateKey,onCloseModal:e[8]||(e[8]=$=>o.openFilter=!1)},null,8,["onUpdateKey"])),[[z,()=>o.openFilter=!1]]):h("",!0)]),I(j,{name:"menu"},{default:_(()=>[o.openMenu?(l(),B(u,{key:0,onCloseMenu:e[9]||(e[9]=$=>o.openMenu=!1),onSetBoardClr:r.setBoardClr,onSetBoardBg:r.setBoardBg},null,8,["onSetBoardClr","onSetBoardBg"])):h("",!0)]),_:1}),I(S,{"drag-class":"on-dragging",orientation:"horizontal",class:"group-container",onDrop:e[15]||(e[15]=$=>r.onGroupDrop($))},{default:_(()=>[(l(!0),a(C,null,k(o.board.groups,$=>(l(),B(A,{key:$.id},{default:_(()=>[I(O,{group:$,onOnCardDrop:r.onCardDrop},null,8,["group","onOnCardDrop"])]),_:2},1024))),128)),o.isAddGroup?(l(),a("div",$p,[g(t("input",{onKeyup:e[11]||(e[11]=G((...$)=>r.addGroup&&r.addGroup(...$),["enter"])),"onUpdate:modelValue":e[12]||(e[12]=$=>o.groupTitle=$),type:"text",placeholder:"Enter list title..."},null,544),[[M,o.groupTitle],[Ce]]),t("div",Mp,[t("button",{onClick:e[13]||(e[13]=(...$)=>r.addGroup&&r.addGroup(...$))},"Add list"),t("span",{onClick:e[14]||(e[14]=$=>o.isAddGroup=!1)},Sp)])])):(l(),a("div",{key:0,class:"open-group-container",onClick:e[10]||(e[10]=$=>o.isAddGroup=!0)},xp))]),_:1}),I(ke)])],4)):h("",!0)}var Ap=w(lp,[["render",Tp],["__scopeId","data-v-4aa84ecb"]]);const be=Se({history:Te("/"),routes:[{path:"/",name:"home",component:it},{path:"/login",name:"login",component:kt},{path:"/signup",name:"signup",component:Ot},{path:"/workspace",name:"workspace",component:mr},{path:"/board/:boardId",name:"board",component:Ap,children:[{path:"edit/:cardId",component:ve}]}]});var Dp={state:{boards:[],currBoard:null,labelTitleShown:!1,labelColors:["color0","color1","color2","color3","color4","color5","color6","color7","color8","color9","color10"],imagePicker:["https://images.unsplash.com/photo-1483728642387-6c3bdd6c93e5?crop=entropy&cs=srgb&fm=jpg&ixid=MnwzMTI4NzN8MHwxfHNlYXJjaHw0fHxtb3VudGFpbnxlbnwwfHx8fDE2NDgyMjMxMjg&ixlib=rb-1.2.1&q=85","https://images.unsplash.com/photo-1480497490787-505ec076689f?ixlib=rb-1.2.1&q=85&fm=jpg&crop=entropy&cs=srgb","https://images.unsplash.com/photo-1454496522488-7a8e488e8606?crop=entropy&cs=srgb&fm=jpg&ixid=MnwzMTI4NzN8MHwxfHNlYXJjaHwzfHxtb3VudGFpbnxlbnwwfHx8fDE2NDgyMjMxMjg&ixlib=rb-1.2.1&q=85","https://images.unsplash.com/photo-1433477155337-9aea4e790195?ixlib=rb-1.2.1&q=85&fm=jpg&crop=entropy&cs=srgb"],boardColors:["#0079bf","#d29034","#519839","#b04632","#89609e","#cd5a91","#4bbf6b","#00aecc"],coverColors:["#7BC86C","#F5DD29","#FFAF3F","#EF7564","#CD8DE5","#5BA4CF","#29CCE5","#6DECA9","#FF8ED4","#172B4D"],coverImages:["https://images.unsplash.com/photo-1499750310107-5fef28a66643?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=2070&q=80","https://images.unsplash.com/photo-1500673922987-e212871fec22?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1170&q=80","https://images.unsplash.com/photo-1486870591958-9b9d0d1dda99?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1170&q=80","https://images.unsplash.com/photo-1518655048521-f130df041f66?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1170&q=80","https://images.unsplash.com/photo-1463584954611-9d8ebd80dfd2?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1170&q=80","https://images.unsplash.com/photo-1483835724473-d69ca66efb25?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1170&q=80"]},getters:{boards(s){return JSON.parse(JSON.stringify(s.boards))},currBoard(s){return JSON.parse(JSON.stringify(s.currBoard))},labelTitleShown(s){return s.labelTitleShown},imagePicker(s){return s.imagePicker},boardColors(s){return s.boardColors},labelColors(s){return JSON.parse(JSON.stringify(s.labelColors))},coverColors(s){return JSON.parse(JSON.stringify(s.coverColors))},coverImages(s){return JSON.parse(JSON.stringify(s.coverImages))}},mutations:{setBoards(s,{boards:e}){s.boards=e},setCurrBoard(s,{board:e}){s.currBoard=e},toggleLabelTitle(s){s.labelTitleShown=!s.labelTitleShown},removeBoard(s,{id:e}){const n=s.boards.findIndex(i=>i._id===e);s.boards.splice(n,1)},saveBoard(s,{board:e}){const n=s.boards.findIndex(i=>i._id===e._id);n!==-1?(s.currBoard&&e._id===s.currBoard._id&&(s.currBoard=e),s.boards.splice(n,1,e)):(s.boards.push(e),s.currBoard=e)},addGroup(s,{emptyGroup:e}){s.currBoard.groups.push(e)},addActivity(s,{activity:e}){s.currBoard.activities.unshift(e)}},actions:{async loadBoards({commit:s,state:e}){try{var n=await D.query({});s({type:"setBoards",boards:n}),Y.off(ne),Y.on(ne,i=>{s({type:"saveBoard",board:i})})}catch(i){throw console.error("Cannot Load boards",i),i}},async setCurrBoard({commit:s},{boardId:e}){try{const n=await D.getBoardById(e);return s({type:"setCurrBoard",board:n}),n}catch(n){throw console.log("Cannot find board",n),n}},async removeBoard({commit:s},{id:e}){try{var e=await D.removeBoard(e);s({type:"removeBoard",id:e})}catch(n){throw console.error("Cannot remove board",n),n}},async saveBoard({commit:s},{board:e}){try{var e=await D.updateBoard(e);return s({type:"saveBoard",board:e}),e}catch(n){throw console.error("Cannot Edit/Add board",n),n}},async filterBoard({commit:s},{boardId:e,filterBy:n}){try{const i=await D.getBoardById(e,n);s({type:"saveBoard",board:i})}catch(i){throw console.log("Cannot find card",i),i}},async addGroup({commit:s,state:e},{title:n}){try{const i=await L.addGroup(e.currBoard._id,n);console.log("store addGroup board",i),s({type:"saveBoard",board:i})}catch(i){throw console.log("Cannot add group",i),i}},async addCard({commit:s,state:e},{groupId:n,title:i}){try{const o=await L.addCard(e.currBoard._id,n,i);s({type:"saveBoard",board:o})}catch(o){throw console.log("Cannot add card",o),o}},async removeGroup({commit:s,state:e},{groupId:n}){try{const i=await L.removeGroup(e.currBoard._id,n);s({type:"saveBoard",board:i})}catch(i){throw console.log("Cannot remove group",i),i}},async removeCard({commit:s,state:e},{groupId:n,cardId:i}){try{const o=await L.removeCard(e.currBoard._id,n,i);s({type:"saveBoard",board:o})}catch(o){throw console.log("Cannot remove group",o),o}},async updateCard({commit:s,state:e},{groupId:n,card:i}){try{const o=await L.updateCard(e.currBoard._id,n,i);s({type:"saveBoard",board:o})}catch(o){throw console.log("Cannot update card",o),o}},async getCardById({commit:s},{boardId:e,cardId:n}){try{return await L.getCardById(e,n)}catch(i){throw console.log("Cannot find card",i),i}},async addActivity({commit:s,getters:e,dispatch:n},{txt:i,card:o}){var p,c,d;const r={id:E.makeId(),txt:i,createdAt:Date.now(),byMember:{_id:((p=e.loggedinUser)==null?void 0:p._id)||"",fullname:((c=e.loggedinUser)==null?void 0:c.fullname)||"Guest",imgUrl:((d=e.loggedinUser)==null?void 0:d.imgUrl)||""},card:{id:o.id,title:o.title}};s({type:"addActivity",activity:r}),await n({type:"saveBoard",board:e.currBoard})}}},Up={state:{loggedinUser:V.getLoggedinUser(),users:[]},getters:{users({users:s}){return s},loggedinUser({loggedinUser:s}){return s}},mutations:{setLoggedinUser(s,{user:e}){s.loggedinUser=e?re({},e):null},setUsers(s,{users:e}){s.users=e}},actions:{async loadUsers({commit:s}){try{const e=await V.getUsers();s({type:"setUsers",users:e})}catch(e){throw console.log("Error load users",e),e}},async login({commit:s},{userCred:e}){try{const n=await V.login(e);return s({type:"setLoggedinUser",user:n}),n}catch(n){throw console.log("cannot set user",n),n}},async logout({commit:s}){try{await V.logout(),s({type:"setLoggedinUser",user:null})}catch(e){console.log("logout failed",e)}},async signup({commit:s},{userCred:e}){try{const n=await V.signup(e);s({type:"setLoggedinUser",user:n})}catch(n){throw console.log("signup failed",n),n}}}};const Np=Ae({strict:!0,state:{isLoading:!1},getters:{isLoading(s){return s.isLoading}},mutations:{setIsLoading(s,{isLoading:e}){s.isLoading=e}},actions:{},modules:{boardModules:Dp,userModules:Up}});const Op={mounted:s=>{s.focus()}},Gp={beforeMount(s,e,n){s.clickOutsideEvent=i=>{s===i.target||s.contains(i.target)||e.value(i,s)},window.requestAnimationFrame(()=>{document.addEventListener("click",s.clickOutsideEvent)})},unmounted(s){document.removeEventListener("click",s.clickOutsideEvent)}},K=De(Je);K.directive("focus",Op);K.directive("click-outside",Gp);K.use(Ue,{});K.use(be);K.use(Np);K.mount("#app");
